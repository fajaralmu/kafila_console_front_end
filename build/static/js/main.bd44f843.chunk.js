(this["webpackJsonpkafila-console-meeting-note"]=this["webpackJsonpkafila-console-meeting-note"]||[]).push([[0],{30:function(e,t,a){},44:function(e,t,a){e.exports=a(77)},49:function(e,t,a){},50:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},57:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(20),l=a.n(i),o=(a(49),a(1)),s=a(2),c=a(8),u=a(4),m=a(3),d=(a(50),a(9)),p="${contextPath}"==document.getElementById("rootPath").value||""==document.getElementById("rootPath").value,f=p?"/":document.getElementById("rootPath").value+"/",h=function(){var e=p?"http://localhost:8000".concat(f):f;return e},g=(h(),h(),h()),v=g+"api/account/",E=g+"api/accountdashboard/",b=function(e){return e.startLoading(),{type:"req_ID",payload:{},meta:{app:e,type:"req_ID",url:E.concat("user")}}},N=function(e){return e.startLoading(),{type:"do_logout",payload:{},meta:{app:e,type:"do_logout",url:E.concat("logout")}}},y=function(e,t,a){return a.startLoading(),{type:"do_login",payload:{user:{email:e,password:t}},meta:{type:"do_login",url:v.concat("login"),app:a}}},S=function(e,t){return{type:"store-app-data",payload:{data:t,key:e},meta:{type:"store-app-data"}}},D=a(6),O=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("footer",{className:"footer has-background-dark"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"content has-text-centered"},r.a.createElement("div",{className:"columns is-mobile is-centered"},r.a.createElement("div",{className:"field is-grouped is-grouped-multiline"},r.a.createElement("div",{className:"control"},r.a.createElement("div",{className:"tags has-addons"},r.a.createElement("a",{className:"tag is-link",href:"https://kafila.sch.id"},"KIIS Jakarta"),r.a.createElement("span",{className:"tag is-light"},"\xa9 Kafila Console 2020"))))))))}}]),a}(n.Component),k=a(7),j=a(5),w=(a(30),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Object(o.a)(this,a),(n=t.call(this,e)).state={updated:new Date},n.parentApp=e.app,n.authenticated=i,n.validateLoginStatus=function(){return!i||(1==n.props.loginStatus&&null!=n.props.loggedUser||(n.backToLogin(),!1))},n.getParentApp=function(){return n.props.app},n.getLoggedUser=function(){return n.props.loggedUser},n.isLoggedUserAdmin=function(){return 0==n.isLoggedUserNull()&&"admin"==n.getLoggedUser().role},n.getLoggedUserDepartementName=function(){return n.isLoggedUserNull()?null:n.getLoggedUser().departement.name},n.isLoggedUserNull=function(){return 0==n.props.loginStatus||null==n.props.loggedUser},n.showConfirmation=function(e){return new Promise((function(t,a){n.parentApp.showAlert("Confirmation",e,!1,(function(e){t(!0)}),(function(e){t(!1)}))}))},n.showConfirmationDanger=function(e){return new Promise((function(t,a){n.parentApp.showAlertError("Confirmation",e,!1,(function(e){t(!0)}),(function(e){t(!1)}))}))},n.showInfo=function(e){n.parentApp.showAlert("Info",e,!0,(function(){}))},n.showError=function(e){n.parentApp.showAlertError("Error",e,!0,(function(){}))},n.backToLogin=function(){i&&null!=n.props.history&&n.props.history.push("/login")},n.startLoading=function(e){n.parentApp.startLoading(e)},n.endLoading=function(){n.parentApp.endLoading()},n.doAjax=function(e,t,a,r,i){if(e){n.startLoading(a);var l=Object(c.a)(n);e(t).then((function(e){r&&r(e),l.refresh()})).catch((function(e){i?i(e):("string"==typeof e&&l.showInfo("Operation Failed: "+e),l.showInfo("resource not found"))})).finally((function(e){n.endLoading()}))}else console.warn("Method Not Found! ")},n.commonAjax=function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;null==r&&(r=n.commonErrorCallback),n.doAjax(e,t,!1,a,r)},n.commonAjaxWithProgress=function(e,t,a,r){n.doAjax(e,t,!0,a,r)},n.commonErrorCallback=function(e){console.error(e),n.showError("Operation Failed: "+e)},n.title=function(e){return r.a.createElement(C,null,e)},n.refresh=function(){n.setState({updated:new Date})},n}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(){this.authenticated&&null==this.props.loggedUser&&this.backToLogin()}}]),a}(n.Component)),C=function(e){return r.a.createElement("h2",{style:{textAlign:"left",marginLeft:"10px"}},e.children)},I=function(e){return{loggedUser:e.userState.loggedUser,loginStatus:e.userState.loginStatus,applicationData:e.applicationState.applicationData}},T=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e,!1)).state={shownMenuList:{}},n.shownMenuList=function(e){var t=n.state.shownMenuList;t[e]=!0,n.setState({shownMenuList:t})},n.hideMenuList=function(e){var t=n.state.shownMenuList;t[e]=!1,n.setState({shownMenuList:t})},n.isMenuListShown=function(e){return 1==n.state.shownMenuList[e]},n.toggleMenuList=function(e){var t=e.target.getAttribute("menu-name");n.isMenuListShown(t)?n.hideMenuList(t):n.shownMenuList(t)},n}return Object(s.a)(a,[{key:"extractChildren",value:function(e){for(var t=[],a=0;a<e.length;a++){var n=e[a];n.authenticated&&this.isLoggedUserNull()||(0==this.isLoggedUserNull()&&null!=n.role&&this.getLoggedUser().role!=n.role||t.push(n))}return t}}]),a}(w),x=[{name:"Umum",children:[{name:"Home",link:"/home",iconClassName:"fas fa-home"},{name:"Dashboard",link:"/dashboard",iconClassName:"fas fa-tachometer-alt",authenticated:!0},{name:"Aduan",link:"/issues-public",iconClassName:"fas fa-envelope-open-text"}]},{name:"Notulensi",children:[{name:"List",link:"/discussiontopics",authenticated:!0,iconClassName:"fas fa-list"},{name:"Tambah Notulensi",link:"/meetingnote/create",authenticated:!0,iconClassName:"fas fa-plus-square"}]},{name:"Aduan",children:[{name:"List",link:"/issues",authenticated:!0,iconClassName:"fas fa-list"},{name:"Tambah",link:"/issues/create",authenticated:!0,iconClassName:"fas fa-plus-square",role:"admin"}]},{name:"Master Data",children:[{name:"Menu",link:"/management",authenticated:!0,role:"admin"},{name:"User",link:"/management/users",authenticated:!0,role:"admin",iconClassName:"fas fa-users"},{name:"Bidang",link:"/management/departements",authenticated:!0,role:"admin",iconClassName:"fas fa-object-group"}]}],R=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e,!1)).state=Object(k.a)(Object(k.a)({},n.state),{},{showBurger:!1}),n.toggleNavBurger=function(){n.setState({showBurger:!n.state.showBurger})},n.performLogout=function(){var e=n.props;n.showConfirmation("Apakah Anda ingin keluar?").then((function(t){t&&e.performLogout(e.app)}))},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("nav",{className:"navbar is-dark topNav"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"navbar-brand"},r.a.createElement(j.b,{style:{backgroundColor:"#fff"},className:"navbar-item",to:"/"},r.a.createElement("img",{src:"kiis-stroke.png",width:"38",height:"38"})),r.a.createElement("div",{onClick:this.toggleNavBurger,className:"navbar-burger burger"},r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null))),r.a.createElement("div",{id:"topNav",className:this.state.showBurger?"is-active navbar-menu":" navbar-menu"},r.a.createElement("div",{className:"navbar-start"},x.map((function(t,a){var n=e.extractChildren(t.children);if(null==n||0==n.length)return null;var i=e.isMenuListShown(t.name),l=i?"fas fa-angle-up":"fas fa-angle-down";return r.a.createElement(r.a.Fragment,{key:"NavMenu_"+t.name},r.a.createElement("p",{style:{marginLeft:"10px"},onClick:e.toggleMenuList,"menu-name":t.name,className:"menu-label"},r.a.createElement("i",{style:{marginRight:"10px"},className:l}),t.name,"  "),i?r.a.createElement("ul",{className:"menu-list"},n.map((function(t,n){return r.a.createElement(_,{key:"header-link-"+n+"-"+a,loginStatus:e.props.loginStatus,loggedUser:e.props.loggedUser,linkProperty:t})}))):null)}))),r.a.createElement("div",{className:"navbar-end"},r.a.createElement("div",{className:"navbar-item"},r.a.createElement("div",{className:"buttons has-addons"},this.props.loginStatus?r.a.createElement(r.a.Fragment,null,r.a.createElement(j.b,{className:"button is-info",to:"/profile"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-user"})),r.a.createElement("span",null,this.props.loggedUser.display_name," - ",this.props.loggedUser.role)),r.a.createElement("a",{onClick:this.performLogout,className:"button is-danger"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-sign-out-alt"})),r.a.createElement("span",null,"Logout"))):r.a.createElement(j.b,{className:"button is-info",to:"/login"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-user"})),r.a.createElement("span",null,"Login"))))))))}}]),a}(T),_=function(e){var t=e.linkProperty,a=e.loginStatus,n=e.loggedUser,i=t.iconClassName?t.iconClassName:"fas fa-folder";return null==t.link||!a&&t.authenticated||null!=t.role&&null!=n&&n.role!=t.role?null:r.a.createElement(j.b,{key:t.name+"LINK",className:"navbar-item",to:t.link},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:i})),r.a.createElement("span",null,t.name))},L=Object(d.f)(Object(D.b)((function(e){return{loginStatus:e.userState.loginStatus,loggedUser:e.userState.loggedUser}}),(function(e){return{performLogout:function(t){return e(N(t))}}}))(R)),F=(a(57),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={show:!0},n.hide=function(){n.props.enableHidden&&n.setState({show:!1})},n.show=function(){n.setState({show:!0})},n}return Object(s.a)(a,[{key:"render",value:function(){if(0==this.state.show)return null;var e=this.props.className?"message "+this.props.className:"message is-info";return r.a.createElement("article",{style:{marginBottom:"10px"},id:"my-message",className:e},r.a.createElement("div",{className:"message-header"},r.a.createElement("p",null,this.props.header?this.props.header:"Info"),r.a.createElement("button",{onClick:this.hide,className:"delete","aria-label":"delete"})),r.a.createElement("div",{className:"message-body"},this.props.body,this.props.children))}}]),a}(n.Component)),A=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).child=r.a.createRef(),n.lastLoginAttempt=new Date,n.state={},n.validateLoginStatus=function(){1==n.props.loginStatus&&n.props.history.push("/dashboard")},n.handleSubmit=function(e){e.preventDefault();var t=e.target,a=(new FormData(e.target),t.elements[0]),r=t.elements[1];n.props.performLogin(a.value,r.value,n.props.app)},n.showLoginInfo=function(){n.props.loginFailed&&n.lastLoginAttempt!=n.props.lastLoginAttempt&&(n.child.current.show(),n.lastLoginAttempt=n.props.lastLoginAttempt)},n}return Object(s.a)(a,[{key:"componentWillMount",value:function(){this.validateLoginStatus()}},{key:"componentDidUpdate",value:function(){this.validateLoginStatus(),this.showLoginInfo()}},{key:"componentDidMount",value:function(){document.title="Login"}},{key:"render",value:function(){return r.a.createElement("div",null,this.props.loginFailed?r.a.createElement(F,{ref:this.child,className:"is-danger",body:"Login Failed"}):null,r.a.createElement("div",{className:"columns is-centered"},r.a.createElement("div",{style:{marginTop:"10px",marginBottom:"10px"},className:"column is-5-tablet is-5-desktop is-5-widescreen"},r.a.createElement("form",{id:"formLogin",onSubmit:this.handleSubmit,className:"box"},r.a.createElement("div",{className:"field has-text-centered"},r.a.createElement("span",{style:{fontSize:"70px"}},r.a.createElement("i",{className:"fas fa-user-circle"})),r.a.createElement("p",null,"Sign In")),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Email"),r.a.createElement("div",{className:"control has-icons-left"},r.a.createElement("input",{nam:"email",type:"email",placeholder:"e.g. user@gmail.com",className:"input",required:!0}),r.a.createElement("span",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fa fa-envelope"})))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Password"),r.a.createElement("div",{className:"control has-icons-left"},r.a.createElement("input",{name:"password",type:"password",placeholder:"*******",className:"input",required:!0}),r.a.createElement("span",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fa fa-lock"})))),r.a.createElement("div",{className:"field"},r.a.createElement("button",{className:"button is-success"},"Login"))))))}}]),a}(n.Component),U=Object(d.f)(Object(D.b)((function(e){return{loginStatus:e.userState.loginStatus,lastLoginAttempt:e.userState.lastLoginAttempt,loginFailed:e.userState.loginFailed,requestId:e.userState.requestId}}),(function(e){return{performLogin:function(t,a,n){return e(y(t,a,n))}}}))(A)),B=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).saveButtonOnClick=function(e){n.props.saveButtonOnClick&&n.props.saveButtonOnClick(e)},n.editButtonOnClick=function(e){n.props.editButtonOnClick&&n.props.editButtonOnClick(e)},n.deleteButtonOnClick=function(e){n.props.deleteButtonOnClick&&n.props.deleteButtonOnClick(e)},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.headerIconClassName,t=this.props.headerIconOnClick;return r.a.createElement("div",{className:"card",style:Object(k.a)({margin:"10px"},this.props.style)},r.a.createElement("header",{className:"card-header"},r.a.createElement("p",{className:"card-header-title"},this.props.title?this.props.title:"Card Title"),null==e?null:r.a.createElement(P,{className:e,onClick:t})),r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"content"},this.props.children)),this.props.withButtonFooter?r.a.createElement("footer",{className:"card-footer"},r.a.createElement("a",{href:"#",onClick:this.saveButtonOnClick,className:"card-footer-item"},"Save"),r.a.createElement("a",{href:"#",onClick:this.editButtonOnClick,className:"card-footer-item"},"Edit"),r.a.createElement("a",{href:"#",onClick:this.deleteButtonOnClick,className:"card-footer-item"},"Delete")):null,this.props.footerContent?r.a.createElement("footer",{className:"card-footer"},this.props.footerContent):null)}}]),a}(n.Component),P=function(e){return r.a.createElement("a",{className:"card-header-icon","aria-label":"more options",onClick:e.onClick},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:e.className,"aria-hidden":"true"})))},M=function(e){var t=e.className,a=e.iconClassName;return 0==e.show?null:r.a.createElement("a",{className:"button "+t,style:e.style,onClick:e.onClick},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:a})),r.a.createElement("span",null,e.children))},q=function(e){if(0==e.show)return null;var t=h()+e.to,a=function(e){var t=e.split(".");try{return t[t.length-1]}catch(a){return null}},n=e.showExtension&&a(t)?" | "+a(t):null;return r.a.createElement("a",{href:t,target:"_blank",className:"button is-small",style:e.style},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-link"})),r.a.createElement("span",null,"attachment ",n))},G=1;var K=2*Math.PI,W=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).id=function(){var e;return e=(new Date).getUTCMilliseconds(),++G+"-"+e}()+"_"+(new Date).getTime()+"_pie_chart_canvas",n.state={proportions:[],showDetail:!1},n.timeoutId=null,n.accumulationDegree=0,n.updatePie=function(){n.accumulationDegree=0;var e=n.state.proportions,t=document.getElementById(n.id);if(null!=t){var a=t.getContext("2d");a.clearRect(0,0,t.width,t.height),a.fillStyle="#ccc";for(var r=K,i=0,l=250,o=150,s=0;s<e.length;s++){var c=e[s];if(!(c.proportion<=0)){var u=r-c.proportion*K;a.fillStyle=c.color,a.strokeStyle=c.color,a.beginPath(),a.arc(150,150,100,r,u,!0),a.fill(),i=360*c.proportion,n.accumulationDegree+=i;var m=n.calculatePosition(u,c.proportion,a);a.fillStyle=c.color,c.proportion<.5&&(a.beginPath(),a.moveTo(150,150),a.lineTo(l,o),a.lineTo(m.x,m.y),a.fill());var d=m.labelCoord;a.font="15px Arial",a.fillStyle="#000",a.fillText(c.label+" "+parseFloat(100*c.proportion).toFixed(2)+"%",d.x,d.y),l=m.x,o=m.y,r=u}}}},n.calculatePosition=function(e,t,a){var r=n.calculateCoordinate(e,n.accumulationDegree,100),i=t*K/2,l=360*t/2,o=n.calculateCoordinate(e-i,n.accumulationDegree-l,50);return Object(k.a)(Object(k.a)({},r),{},{labelCoord:o})},n.calculateCoordinate=function(e,t,a){var r=0,i=0,l=n.getQuadrant(t),o=Math.abs(a*Math.cos(e)),s=Math.abs(a*Math.sin(e));return 1==l?(r=150+o,i=150-s):2==l?(r=150-o,i=150-s):3==l?(r=150-o,i=150+s):4==l&&(r=150+o,i=150+s),{x:r,y:i}},n.getQuadrant=function(e){return e<=90?1:e<=180?2:e<=270?3:4},n.toggleDetail=function(){n.setState({showDetail:!n.state.showDetail})},n.proportionIsFixed=function(){var e=n.state.proportions,t=n.getPropsProportion();return n.sumValues(e)>=n.sumValues(t)},n.proportionIsEmpty=function(){var e=n.state.proportions,t=n.getPropsProportion();return 0==n.sumValues(t)||0==n.sumValues(e)},n.getPropsProportion=function(){var e=n.props.proportions;return e.sort((function(e,t){return t.proportion-e.proportion})),e},n.animate=function(){for(var e=n.getPropsProportion(),t=n.state.proportions,a=0;a<e.length;a++){var r=e[a];null==t[a]&&t.push({proportion:0,value:r.value,label:r.label,color:r.color}),t[a].proportion<r.proportion&&(t[a].proportion+=.005),t[a].proportion>=r.proportion&&(t[a].proportion=r.proportion)}n.setState({proportions:t}),0==n.proportionIsFixed()&&n.requestAnimation()},n.requestAnimation=function(){null!=n.timeoutId&&clearTimeout(n.timeoutId),n.timeoutId=setTimeout(n.animate,1)},n.resetProportion=function(){n.setState({proportions:[]})},n}return Object(s.a)(a,[{key:"sumValues",value:function(e){for(var t=0,a=0;a<e.length;a++){t+=e[a].proportion}return t}},{key:"componentDidMount",value:function(){this.requestAnimation(),this.updatePie()}},{key:"componentDidUpdate",value:function(){this.requestAnimation(),this.updatePie()}},{key:"render",value:function(){return r.a.createElement("div",{style:{marginBottom:"20px"}},r.a.createElement("h3",null,this.props.title?this.props.title:"Grafik"),r.a.createElement("div",{style:{height:"auto"},className:"columns"},r.a.createElement("div",{className:"column has-text-centered ",style:{overflowX:"scroll"}},this.proportionIsEmpty()?r.a.createElement("h2",{style:{height:300}},"Tidak ada data"):r.a.createElement("canvas",{id:this.id,className:"has-background-light",width:300,height:300})),r.a.createElement("div",{className:"column "},r.a.createElement(M,{style:{marginBottom:"10px"},onClick:this.toggleDetail,iconClassName:this.state.showDetail?"fas fa-angle-up":"fas fa-angle-down"},this.state.showDetail?"Close":"Show"," Detail"),this.state.showDetail?r.a.createElement(V,{proportions:this.state.proportions}):null)))}}]),a}(n.Component),V=function(e){return r.a.createElement("article",{className:"message"},r.a.createElement("div",{className:"message-body",style:{overflowX:"scroll"}},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"No"),r.a.createElement("th",null,"Warna"),r.a.createElement("th",null,"Keterangan"),r.a.createElement("th",null,"Nilai"),r.a.createElement("th",null,"Presentase"))),r.a.createElement("tbody",null,e.proportions.map((function(e,t){return r.a.createElement("tr",{key:"PIE_PROP_"+t},r.a.createElement("td",{style:{width:"20px"}},t+1),r.a.createElement("td",{style:{padding:"5px",width:"50px"}},r.a.createElement("div",{style:{width:"40px",height:"40px",backgroundColor:e.color}}),"                            "),r.a.createElement("td",null,e.label),r.a.createElement("td",null,e.value),r.a.createElement("td",null,parseFloat(100*e.proportion).toFixed(2),"%"))}))))))},z=function(){var e=Y(),t={"Content-Type":"application/json"};return null!=e&&""!=e.toString().trim()&&(t.Authorization="Bearer "+e),t},Y=function(){return Q("kafila_api_token")},J=function(e){return console.log("setApiToken: ",e),H("kafila_api_token",e)},H=function(e,t,a){var n=new Date;n.setTime(n.getTime()+24*a*60*60*1e3);var r="expires="+n.toUTCString();document.cookie=e+"="+t+";"+r+";path=/"},Q=function(e){for(var t=e+"=",a=decodeURIComponent(document.cookie).split(";"),n=0;n<a.length;n++){for(var r=a[n];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return""},X=a(31),$=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=null==t?{}:t;return new Promise((function(t,n){X.post(e,a,{headers:z()}).then((function(e){return e.data})).then((function(e){"00"==e.code?t(e):n(e)})).catch((function(e){console.error(e),n(e)}))}))},Z=function e(){Object(o.a)(this,e),this.getStatistic=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t={filter:{fieldsFilter:{}}};null!=e&&(t.filter.fieldsFilter.departement_id=e);var a=h().concat("api/histories/statistic");return $(a,t)}};Z.instance=Z.instance||new Z;var ee=a(42),te=(a(75),function e(t){if(null==t||t.length<=1)return t;var a=new String(t),n=a.split("_");if(n.length>1){for(var r="",i=0;i<n.length;i++){r+=e(n[i])+" "}return r}var l=a.substring(0,1).toUpperCase();return l+=a.substring(1,a.length)}),ae=function(e){var t=e.headers,a=e.onButtonOrderClick;return r.a.createElement("thead",null,r.a.createElement("tr",null,t.map((function(e,t){var n=e.alias?e.alias:e.text;return r.a.createElement("th",{key:"TH_"+t},te(n),e.withFilter?r.a.createElement("div",{className:"field has-addons"},r.a.createElement("div",{className:"control"},r.a.createElement(ne,{type:"text",name:e.text})),r.a.createElement("div",{className:"control",style:{fontSize:"0.7em",backgroundColor:"#ccc"}},r.a.createElement("i",{sort:"asc",onClick:a,data:e.text,className:"fas fa-angle-up sort-button"}),r.a.createElement("i",{sort:"desc",onClick:a,data:e.text,className:"fas fa-angle-down sort-button"}))):null)}))))},ne=function(e){var t=e.type?e.type:"text";return r.a.createElement("input",{className:"input form-filter",type:t,name:e.name,id:"input-form-"+e.name})},re=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"buttons has-addons"},r.a.createElement("button",{type:"submit",className:"button is-info"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-play"})),r.a.createElement("span",null,"Apply Filter")),r.a.createElement("button",{type:"reset",className:"button is-danger"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-sync"})),r.a.createElement("span",null,"Reset Filter"))))},ie=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).id="input-form-field-"+n.props.name,n.setDateInput=function(e){var t=(new Date).toISOString().substring(0,10);document.getElementById(n.id).value=t},n}return Object(s.a)(a,[{key:"render",value:function(){var e=Object(k.a)({},this.props);if(0==e.show)return null;var t="input input-form-field "+e.className,a=e.orientation?e.orientation:"horizontal",n=e.label?e.label:e.name;return void 0!=this.props.required&&1==this.props.required&&(null==e.attributes?e.attributes={required:"required"}:e.attributes.required="required"),r.a.createElement("div",{className:"field is-"+a},r.a.createElement("div",{className:"field-label is-normal"},r.a.createElement("label",{className:"label"},te(n)),r.a.createElement(M,{onClick:this.setDateInput,show:"date"==e.type,className:"is-small",iconClassName:"fas fa-history"},"Today")),r.a.createElement("div",{className:"field-body"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},"textarea"==e.type?r.a.createElement("textarea",Object.assign({},e.attributes,{className:t+" textarea",id:this.id,name:e.name})):r.a.createElement("input",Object.assign({},e.attributes,{type:e.type?e.type:"text",id:this.id,name:e.name,className:t})),e.note?r.a.createElement("p",null,r.a.createElement("i",null,"Note: ",e.note)):null))))}}]),a}(n.Component),le=function(e){var t=(null==e.options?[]:e.options).map((function(e,t){return r.a.createElement("option",{key:"select-option-"+t,value:e.value},e.text)})),a=e.label?e.label:e.name;return r.a.createElement("div",{className:"field is-horizontal"},r.a.createElement("div",{className:"field-label is-normal"},r.a.createElement("label",{className:"label"},te(a))),r.a.createElement("div",{className:"field-body"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},1==e.required?r.a.createElement("select",Object.assign({},e.attributes,{required:!0,id:"input-form-field-"+e.name,name:e.name,className:"input input-form-field"}),t):r.a.createElement("select",Object.assign({},e.attributes,{id:"input-form-field-"+e.name,name:e.name,className:"input input-form-field"}),t)))))},oe=function(e){return r.a.createElement("div",{className:"field is-horizontal"},r.a.createElement("div",{className:"field-label is-normal"},r.a.createElement("label",{className:"label"},e.label?te(e.label):"Label")),r.a.createElement("div",{className:"field-body"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},e.value,e.children))))},se=function(e){var t=e.submitText?e.submitText:"Submit",a=e.submitIconClassName?e.submitIconClassName:"fas fa-save",n=e.submitButtonClassName?"button "+e.submitButtonClassName:"button is-link";return r.a.createElement("div",{className:"field is-horizontal"},r.a.createElement("div",{className:"field-label is-normal"}),r.a.createElement("div",{className:"field-body"},r.a.createElement("div",{className:"field"},r.a.createElement("button",{className:n,type:"submit",style:{marginRight:"10px"}},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:a})),r.a.createElement("span",null,t)),1==e.withReset?r.a.createElement("button",{className:"button is-danger",type:"reset"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-sync"})),r.a.createElement("span",null,"Reset")):null)))},ce=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).getDiscussionTopicProportion=function(){if(null==n.statisticData)return null;var e=n.statisticData.statistic,t=e.topic_count;return[{proportion:e.topic_closed_count/t,label:"Closed",color:"rgb(180,230,30)",value:e.topic_closed_count},{proportion:e.topic_not_closed_count/t,label:"Not Closed",color:"rgb(255,170,200)",value:e.topic_not_closed_count}]},n.getIssueProportion=function(){if(null==n.statisticData)return null;var e=n.statisticData.statistic,t=e.issue_count;return[{proportion:e.issue_closed_count/t,label:"Closed",color:"rgb(180,230,30)",value:e.issue_closed_count},{proportion:e.issue_not_closed_count/t,label:"Not Closed",color:"rgb(255,170,200)",value:e.issue_not_closed_count}]},n.state=Object(k.a)(Object(k.a)({},n.state),{},{errorLoadingStatistic:!1}),n.pieChartChildTopic=r.a.createRef(),n.pieChartChildIssue=r.a.createRef(),n.historiesService=Z.instance,n.statisticData=null,n.departementList=[],n.loadStatisticWithDepartement=function(e){e.preventDefault();var t=document.getElementById("input-form-field-departement").value;"all"!=t?n.loadStatistic(t):n.loadStatistic(null)},n.statisticLoaded=function(e){n.statisticData=e,n.pieChartChildTopic.current&&n.pieChartChildTopic.current.resetProportion(),n.pieChartChildIssue.current&&n.pieChartChildIssue.current.resetProportion(),n.isLoggedUserAdmin()&&(n.departementList=e.statistic.departements,n.props.storeApplicationData("departements",n.departementList))},n.statisticFailedToLoad=function(e){console.error(e),n.setState({errorLoadingStatistic:!0})},n.loadStatistic=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;n.setState({errorLoadingStatistic:!1}),n.commonAjax(n.historiesService.getStatistic,e,n.statisticLoaded,n.statisticFailedToLoad)},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){null==this.statisticData&&this.loadStatistic()}},{key:"render",value:function(){var e=this;if(this.isLoggedUserNull())return null;if(this.state.errorLoadingStatistic)return r.a.createElement(B,{title:"Statistik"},r.a.createElement(ue,{onClick:this.loadStatistic}));var t=this.getDiscussionTopicProportion(),a=this.getIssueProportion();if(null==t||null==a)return r.a.createElement(B,{title:"Statistik"},r.a.createElement("p",null,"Please Wait"));var n=this.departementList.map((function(e){return{value:e.id,text:e.name}})),i=[{value:"all",text:"-- Semua --"}].concat(Object(ee.a)(n));return r.a.createElement(B,{title:"Statistik"},r.a.createElement("div",{id:"pie_chart_discussion_topics"},r.a.createElement(W,{title:"Tema Pembahasan",ref:this.pieChartChildTopic,proportions:t}),r.a.createElement(W,{title:"Aduan",ref:this.pieChartChildIssue,proportions:a}),r.a.createElement("form",{style:{marginTop:"20px"},onSubmit:this.isLoggedUserAdmin()?function(t){return e.loadStatisticWithDepartement(t)}:function(t){t.preventDefault(),e.loadStatistic(null)}},this.isLoggedUserAdmin()?r.a.createElement(le,{name:"departement",options:i}):null,r.a.createElement(oe,{label:"updated_at",value:new Date(this.statisticData.date).toString()}),r.a.createElement(se,{submitButtonClassName:"no",submitIconClassName:"fas fa-sync",submitText:"Reload"}))))}}]),a}(w),ue=function(e){return r.a.createElement(F,{enableHidden:!1,className:"is-danger",header:"Gagal Memuat Data"},r.a.createElement(M,{onClick:e.onClick,iconClassName:"fas fa-sync"},"Muat Ulang"))},me=Object(d.f)(Object(D.b)(I,(function(e){return{storeApplicationData:function(t,a){return e(S(t,a))}}}))(ce)),de=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state=Object(k.a)({},n.state),n}return Object(s.a)(a,[{key:"componentWillMount",value:function(){this.validateLoginStatus()}},{key:"componentDidMount",value:function(){document.title="Dashboard"}},{key:"render",value:function(){return this.isLoggedUserNull()?null:r.a.createElement("div",null,r.a.createElement(C,null,"Dashboard"),r.a.createElement(B,{title:"Welcome"},r.a.createElement("p",null,this.getLoggedUser().display_name),r.a.createElement("p",null,"Bidang ",this.props.loggedUser.departement.name)),r.a.createElement(me,{app:this.props.app}))}}]),a}(w),pe=Object(d.f)(Object(D.b)(I,(function(e){return{}}))(de)),fe=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){return Object(o.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(){(this.isLoggedUserNull()||"admin"!=this.props.loggedUser.role)&&this.backToLogin()}}]),a}(w),he=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){return Object(o.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"componentDidMount",value:function(){(this.isLoggedUserNull()||"admin"!=this.getLoggedUser().role)&&this.backToLogin(),document.title="Management"}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(C,null,"Master Data Menu"),r.a.createElement(B,{title:"Menu"},r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column is-one-third"},r.a.createElement("div",{className:"box has-text-centered"},r.a.createElement("p",null,r.a.createElement("i",{style:{fontSize:"50px"},className:"fas fa-object-group"})),r.a.createElement(j.b,{to:"/management/departements"},"Departements"))),r.a.createElement("div",{className:"column is-one-third"},r.a.createElement("div",{className:"box has-text-centered"},r.a.createElement("p",null,r.a.createElement("i",{style:{fontSize:"50px"},className:"fas fa-users"})),r.a.createElement(j.b,{to:"/management/users"},"Users"))))))}}]),a}(fe),ge=Object(d.f)(Object(D.b)((function(e){return{loggedUser:e.userState.loggedUser,loginStatus:e.userState.loginStatus}}))(he)),ve=function(){function e(){var t=this;Object(o.a)(this,e),this.setUsersData=function(e){t.usersData=e},this.storeUser=function(e){var t={code:"user",userModel:e},a=h().concat("api/masterdata/store");return $(a,t)},this.storeIssue=function(e){var t={code:"issue",issue:e},a=h().concat("api/masterdata/store");return $(a,t)},this.viewUser=function(e){var t=h().concat("api/masterdata/view/"+e);return $(t,{code:"user"})},this.userList=function(e){return t.list({code:"user",filter:e})},this.viewIssue=function(e){var t=h().concat("api/masterdata/view/"+e);return $(t,{code:"issue"})},this.issueList=function(e){return t.list({code:"issue",filter:e})},this.storeDepartement=function(e){var t={code:"departement",departement:e},a=h().concat("api/masterdata/store");return $(a,t)},this.viewDepartement=function(e){var t=h().concat("api/masterdata/view/"+e);return $(t,{code:"departement"})},this.deleteRecord=function(e){var t=h().concat("api/masterdata/delete/"+e.id);return $(t,{code:e.code})},this.departementList=function(e){return t.list({code:"departement",filter:e})},this.list=function(e){var t={code:e.code,filter:e.filter},a=h().concat("api/masterdata/list");return $(a,t)},this.usersData=null,this.departementsData=null}return Object(s.a)(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}}]),e}();ve.instance=ve.instance||new ve;var Ee=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).onClick=function(e){n.props.onClick&&n.props.onClick(e)},n}return Object(s.a)(a,[{key:"render",value:function(){for(var e=this,t=be(this.props.limit,this.props.totalData,this.props.activeIndex),a=[],n=0;n<t.length;n++){var i=t[n];a.push({index:i})}return r.a.createElement("div",{className:"buttons",style:{marginTop:"5px",marginBottom:"5px"}},a.map((function(t,a){var n=t.index==e.props.activeIndex?"button is-link":"button is-light";return r.a.createElement("a",{key:"nav_btn_"+a,onClick:function(){e.onClick(t.index)},className:n},t.index)})))}}]),a}(n.Component),be=function(e,t,a){var n=[],r=Math.ceil(t/e),i=a-2,l=a+2;r>1&&n.push(1);for(var o=i;o<=l;o++)o>1&&o<=r&&n.push(o);return l<r&&n.push(r),n},Ne=Ee,ye=a(43),Se=a(15),De=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e,n,i){var l,s;return Object(o.a)(this,a),(s=t.call(this,e)).loadRecords=function(){},s.readInputForm=function(){var e=document.getElementById("list-form");if(null!=e){var t=e.getElementsByClassName("form-filter");s.fieldsFilter={};for(var a=0;a<t.length;a++){var n=t[a];null!=n.value&&""!=n.value&&(s.fieldsFilter[n.name]=n.value)}}},s.masterDataServce=ve.instance,s.code=i,s.name=n,s.page=1,s.limit=5,s.count=0,s.orderBy="id",s.orderType="asc",s.fieldsFilter={},s.recordData=null,s.successLoaded=function(e){s.recordData=e,s.refresh()},s.errorLoaded=function(e){console.error("Error loading resource: ",e)},s.getRecordDataStored=function(){return null},s.loadRecordByPage=function(e){Object(ye.a)((l=Object(c.a)(s),Object(Se.a)(a.prototype)),"page",e,l,!0),s.loadRecords()},s.onButtonOrderClick=function(e){e.preventDefault(),s.orderBy=e.target.getAttribute("data"),s.orderType=e.target.getAttribute("sort"),s.loadRecords()},s.filter=function(e){s.page=1,s.loadRecords()},s.delete=function(e){var t=Object(c.a)(s);s.showConfirmationDanger("Delete "+s.name+"?").then((function(a){a&&t.deleteRecord(e)}))},s.onSuccessDelete=function(e){s.showConfirmation("Record has been deleted").then(s.loadRecords)},s.onErrorDelete=function(e){s.showError("Error Delete Record")},s.deleteRecord=function(e){s.commonAjax(s.masterDataServce.deleteRecord,{code:s.code,id:e},s.onSuccessDelete,s.onErrorDelete)},s.linkToFormCreate=function(e,t){return r.a.createElement(j.b,{to:e,className:"button is-primary",style:{marginBottom:"10px"}},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-plus"})),r.a.createElement("span",null,t))},s.linkToFormEdit=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return r.a.createElement(j.b,{to:e,className:"button is-warning is-small"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-edit"})),t?r.a.createElement("span",null,"Edit"):null)},s.buttonsModifyAndDelete=function(e,t){return r.a.createElement("div",{className:"buttons has-addons"},s.linkToFormEdit(e,!1),s.buttonDeleteRecord(t,!1))},s.buttonDeleteRecord=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return r.a.createElement("a",{onClick:function(){return s.delete(e)},className:"button is-danger is-small"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-trash"})),t?r.a.createElement("span",null,"Delete"):null)},s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){document.title=this.name+" Management",this.loadRecords()}}]),a}(fe),Oe=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.cells?this.props.cells:[];return r.a.createElement("div",{className:"columns"},e.map((function(e,t){return r.a.createElement("div",{key:"column-"+t,className:"column"},e)})))}}]),a}(n.Component),ke=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e,"User","user")).loadRecords=function(){n.readInputForm();var e={page:n.page,limit:n.limit,orderBy:n.orderBy,orderType:n.orderType,fieldsFilter:n.fieldsFilter};n.commonAjax(n.masterDataService.userList,e,n.successLoaded,n.errorLoaded)},n.state={showForm:!1},n.departementList=[],n.masterDataService=ve.instance,n.populateDefaultInputs=function(){var e=null!=n.recordData?n.recordData:null;if(null!=e){var t=e.filter.fieldsFilter;for(var a in t)if(t.hasOwnProperty(a)){var r=t[a];try{document.getElementById("input-form-"+a).value=r}catch(i){}}}},n}return Object(s.a)(a,[{key:"createNavButton",value:function(){var e=null!=this.recordData?this.recordData:null;return null==e?r.a.createElement(r.a.Fragment,null):r.a.createElement(Ne,{onClick:this.loadRecordByPage,limit:this.limit,totalData:e.count,activeIndex:this.page})}},{key:"render",value:function(){var e=this,t=this.createNavButton(),a=null!=this.recordData?this.recordData:null,n=null==a||null==a.result_list?[]:a.result_list;return r.a.createElement("div",null,r.a.createElement(C,null,"Users Management"),r.a.createElement(B,{title:"Users"},this.linkToFormCreate("/management/users/create","Tambah Data"),r.a.createElement("form",{id:"list-form",onSubmit:function(t){t.preventDefault(),e.filter(t.target)}},r.a.createElement(Oe,{cells:[re(),t]}),r.a.createElement("div",{style:{overflow:"scroll"}},r.a.createElement("table",{className:"table"},r.a.createElement(je,{onButtonOrderClick:this.onButtonOrderClick,headers:[{text:"No"},{text:"id",withFilter:!0},{text:"email",withFilter:!0},{text:"display_name",withFilter:!0},{text:"role",withFilter:!0},{text:"departement",withFilter:!0},{text:"action"}]}),r.a.createElement("tbody",null,n.map((function(t,a){var n=(e.page-1)*e.limit;return r.a.createElement("tr",{key:"record-user-"+a},r.a.createElement("td",null,n+a+1),r.a.createElement("td",null,t.id),r.a.createElement("td",null,t.email),r.a.createElement("td",null,t.display_name),r.a.createElement("td",null,t.role),r.a.createElement("td",null,t.departement?t.departement.name:"-"),r.a.createElement("td",null,e.buttonsModifyAndDelete("/management/users/"+t.id,t.id)))}))))))))}}]),a}(De),je=function(e){return ae(e)},we=Object(d.f)(Object(D.b)((function(e){return{loggedUser:e.userState.loggedUser,loginStatus:e.userState.loginStatus}}))(ke)),Ce=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e,"Departement","departement")).loadRecords=function(){n.readInputForm();var e={page:n.page,limit:n.limit,orderBy:n.orderBy,orderType:n.orderType,fieldsFilter:n.fieldsFilter};n.commonAjax(n.masterDataService.departementList,e,n.successLoaded,n.errorLoaded)},n.state={},n.masterDataService=ve.instance,n.populateDefaultInputs=function(){var e=null!=n.recordData?n.recordData:null;if(null!=e){var t=e.filter.fieldsFilter;for(var a in t)if(t.hasOwnProperty(a)){var r=t[a];try{document.getElementById("input-form-"+a).value=r}catch(i){}}}},n.onSuccessDelete=function(e){n.removeDataFromStore(e.record_id),n.showConfirmation("Record has been deleted").then(n.loadRecords)},n.removeDataFromStore=function(e){var t=n.props.applicationData.departements;if(null!=t&&null!=t.find((function(t){return t.id==e}))){for(var a=0;a<t.length;a++){if(t[a].id==e){t.splice(a,1);break}}n.props.storeApplicationData("departements",t)}},n}return Object(s.a)(a,[{key:"createNavButton",value:function(){var e=null!=this.recordData?this.recordData:null;return null==e?r.a.createElement(r.a.Fragment,null):r.a.createElement(Ne,{onClick:this.loadRecordByPage,limit:this.limit,totalData:e.count,activeIndex:this.page})}},{key:"render",value:function(){var e=this,t=this.createNavButton(),a=null!=this.recordData?this.recordData:null,n=null==a||null==a.result_list?[]:a.result_list;return r.a.createElement("div",null,r.a.createElement(C,null,"Departements Management"),r.a.createElement(B,{title:"Departement"},this.linkToFormCreate("/management/departements/create","Tambah Data"),r.a.createElement("form",{id:"list-form",onSubmit:function(t){t.preventDefault(),e.filter(t.target)}},r.a.createElement(Oe,{cells:[re(),t]}),r.a.createElement("div",{style:{overflow:"scroll"}},r.a.createElement("table",{className:"table"},r.a.createElement(Ie,{onButtonOrderClick:this.onButtonOrderClick,headers:[{text:"No"},{text:"id",withFilter:!0},{text:"name",withFilter:!0},{text:"description",withFilter:!0},{text:"action"}]}),r.a.createElement("tbody",null,n.map((function(t,a){var n=(e.page-1)*e.limit;return r.a.createElement("tr",{key:"record_"+a},r.a.createElement("td",null,n+a+1),r.a.createElement("td",null,t.id),r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.description),r.a.createElement("td",null,e.buttonsModifyAndDelete("/management/departements/"+t.id,t.id)))}))))))))}}]),a}(De),Ie=function(e){return ae(e)},Te=Object(d.f)(Object(D.b)((function(e){return{loggedUser:e.userState.loggedUser,loginStatus:e.userState.loginStatus,applicationData:e.applicationState.applicationData}}),(function(e){return{storeApplicationData:function(t,a){return e(S(t,a))}}}))(Ce)),xe=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={recordNotFound:!1,isLoadingRecord:!0,departementList:[]},n.masterDataService=ve.instance,n.onSubmit=function(e){e.preventDefault();var t=e.target,a=Object(c.a)(n);n.showConfirmation("Save User?").then((function(e){e&&a.storeRecord(t)}))},n.storeRecord=function(e){for(var t=e.getElementsByClassName("input-form-field"),a={},r=0;r<t.length;r++){var i=t[r];if(null!=i.value&&""!=i.value){var l=i.name;"departement"==l&&(l="departement_id"),a[l]=i.value}}null!=n.getRecordId()&&(a.id=n.getRecordId()),n.store(a),console.debug("USER: ",a)},n.getRecordId=function(){return n.props.match.params.id},n.departementListLoaded=function(e){n.setState({departementList:e.result_list}),null!=n.getRecordId()&&n.loadRecord(),console.log("departementListLoaded: ",e)},n.recordSaved=function(e){n.showInfo("SUCCESS SAVING RECORD"),null==n.getRecordId()&&(n.handleSuccessGetRecord(e),n.props.history.push("/management/users/"+e.user.id))},n.recordFailedToSave=function(e){n.showError("FAILED SAVING RECORD")},n.store=function(e){n.commonAjax(n.masterDataService.storeUser,e,n.recordSaved,n.recordFailedToSave)},n.loadDepartements=function(){n.commonAjax(n.masterDataService.departementList,{},n.departementListLoaded,(function(e){}))},n.handleSuccessGetRecord=function(e){n.setState({isLoadingRecord:!1});for(var t=document.getElementById("form-management").getElementsByClassName("input-form-field"),a=0;a<t.length;a++){var r=t[a];"departement"==r.name?r.value=e.user.departement_id:"password"==r.name?r.value=null:r.value=e.user[r.name]}},n.handleErrorGetRecord=function(e){n.setState({recordNotFound:!0})},n.loadRecord=function(){n.commonAjax(n.masterDataService.viewUser,n.getRecordId(),n.handleSuccessGetRecord,n.handleErrorGetRecord)},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.loadDepartements(),document.title="User Form"}},{key:"render",value:function(){if(this.state.recordNotFound)return r.a.createElement(F,{className:"is-danger",body:"Record Not Found"});if(null!=this.getRecordId()&&this.state.isLoadingRecord)return r.a.createElement("div",null,r.a.createElement(C,null,"Users Management"),r.a.createElement("h3",null,"Please Wait..."));var e=r.a.createElement(r.a.Fragment,null,r.a.createElement(j.b,{to:"/management/users"},"Users"),"\xa0",r.a.createElement("i",{className:"fas fa-angle-right"}),"\xa0Form");return r.a.createElement("div",null,r.a.createElement(C,null,"Users Management"),r.a.createElement(B,{title:e},r.a.createElement("form",{onSubmit:this.onSubmit,id:"form-management"},r.a.createElement(ie,{label:"Email",name:"email",required:!0,type:"email"}),r.a.createElement(ie,{label:"Username",name:"name",required:!0}),r.a.createElement(ie,{label:"Display Name",name:"display_name",required:!0}),r.a.createElement(ie,{label:"Password",name:"password",note:"Kosongkan password apabila tidak ingin diubah"}),r.a.createElement(le,{label:"Departement",options:this.state.departementList.map((function(e){return{value:e.id,text:e.name}})),name:"departement",required:!0}),r.a.createElement(se,{submitText:null==this.getRecordId()?"Create":"Update",withReset:null==this.getRecordId()}))))}}]),a}(w),Re=Object(d.f)(Object(D.b)((function(e){return{loggedUser:e.userState.loggedUser,loginStatus:e.userState.loginStatus}}))(xe)),_e=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={recordNotFound:!1,isLoadingRecord:!0},n.masterDataService=ve.instance,n.onSubmit=function(e){e.preventDefault();var t=e.target,a=Object(c.a)(n);n.showConfirmation("Save Data?").then((function(e){e&&a.storeDepartement(t)}))},n.storeDepartement=function(e){for(var t=e.getElementsByClassName("input-form-field"),a={},r=0;r<t.length;r++){var i=t[r];if(null!=i.value&&""!=i.value)a[i.name]=i.value}null!=n.getRecordId()&&(a.id=n.getRecordId()),n.store(a),console.debug("Departement: ",a)},n.getRecordId=function(){return n.props.match.params.id},n.updateLocallyStoredDepartements=function(e){var t=n.props.applicationData.departements;if(null!=t){if(null!=t.find((function(t){return t.id==e.id})))for(var a=0;a<t.length;a++){if(t[a].id==e.id){t[a]=e;break}}else t.push(e);n.props.storeApplicationData("departements",t)}},n.recordSaved=function(e){n.showInfo("SUCCESS SAVING RECORD"),n.updateLocallyStoredDepartements(e.departement),null==n.getRecordId()&&(n.handleSuccessGetRecord(e),n.props.history.push("/management/departements/"+e.departement.id))},n.recordFailedToSave=function(e){n.showError("FAILED SAVING RECORD")},n.store=function(e){n.commonAjax(n.masterDataService.storeDepartement,e,n.recordSaved,n.recordFailedToSave)},n.handleSuccessGetRecord=function(e){n.setState({isLoadingRecord:!1});for(var t=document.getElementById("form-management").getElementsByClassName("input-form-field"),a=0;a<t.length;a++){var r=t[a];r.value=e.departement[r.name]}},n.handleErrorGetRecord=function(e){n.setState({recordNotFound:!0})},n.loadRecord=function(){n.commonAjax(n.masterDataService.viewDepartement,n.getRecordId(),n.handleSuccessGetRecord,n.handleErrorGetRecord)},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){document.title="Departement Form",null!=this.getRecordId()&&this.loadRecord()}},{key:"render",value:function(){if(this.state.recordNotFound)return r.a.createElement(F,{className:"is-danger",body:"Record Not Found"});if(null!=this.getRecordId()&&this.state.isLoadingRecord)return r.a.createElement("div",null,r.a.createElement(C,null,"Departements Management"),r.a.createElement("h3",null,"Please Wait..."));var e=r.a.createElement(r.a.Fragment,null,r.a.createElement(j.b,{to:"/management/departements"},"Departements"),"\xa0",r.a.createElement("i",{className:"fas fa-angle-right"}),"\xa0Form");return r.a.createElement("div",null,r.a.createElement(C,null,"Departements Management"),r.a.createElement(B,{title:e},r.a.createElement("form",{onSubmit:this.onSubmit,id:"form-management"},r.a.createElement(ie,{label:"Nama",name:"name",required:!0}),r.a.createElement(ie,{label:"Deskripsi",name:"description",type:"textarea",required:!0}),r.a.createElement(se,{submitText:null==this.getRecordId()?"Create":"Update",withReset:null==this.getRecordId()}))))}}]),a}(w),Le=Object(d.f)(Object(D.b)((function(e){return{loggedUser:e.userState.loggedUser,loginStatus:e.userState.loginStatus,applicationData:e.applicationState.applicationData}}),(function(e){return{storeApplicationData:function(t,a){return e(S(t,a))}}}))(_e)),Fe=function e(){Object(o.a)(this,e),this.list=function(e){var t={code:"notes",filter:e},a=h().concat("api/notes/list");return $(a,t)},this.store=function(e){var t={meeting_note:e},a=h().concat("api/notes/store");return $(a,t)},this.view=function(e){var t=h().concat("api/notes/view/"+e);return $(t,{})}};Fe.instance=Fe.instance||new Fe;var Ae=function e(){Object(o.a)(this,e),this.store=function(e){var t={discussion_topic:e},a=h().concat("api/discussiontopics/store");return $(a,t)},this.list=function(e){var t={code:"discussion_topic",filter:e},a=h().concat("api/discussiontopics/list");return $(a,t)},this.view=function(e){var t=h().concat("api/discussiontopics/view/"+e);return $(t,{})},this.storeAction=function(e){var t={discussion_action:e},a=h().concat("api/discussiontopics/action");return $(a,t)}};Ae.instance=Ae.instance||new Ae;function Ue(e){var t=e.files[0],a=t.name,n=a.lastIndexOf("."),r=(a.substring(0,n),a.substring(n+1)),i=t.size;return new Promise((function(t,n){try{var l=new FileReader;l.readAsDataURL(e.files[0]),l.onload=function(){var e={isFile:!0,data:l.result,name:a,extension:r,size:i};t(e)},l.onerror=function(e){n(e)}}catch(o){n(o)}}))}var Be=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).onYes=function(e){n.props.onYes&&n.props.onYes(e)},n.onNo=function(e){n.props.onNo&&n.props.onNo(e)},n.onClose=function(e){n.props.onClose&&n.props.onClose(e)},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){try{document.getElementById("button-alert-yes").focus()}catch(e){}}},{key:"render",value:function(){var e=this.props.title?this.props.title:"Info",t=(this.props.yesOnly,"modal-card-head has-background-link");return 1==this.props.isError&&(t="modal-card-head has-background-danger"),r.a.createElement(r.a.Fragment,null,r.a.createElement(Pe,null,r.a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},r.a.createElement("div",{className:"modal-card"},r.a.createElement("header",{className:t},r.a.createElement("p",{className:"modal-card-title has-text-white"},e)),r.a.createElement("section",{className:"modal-card-body"},this.props.children),r.a.createElement("footer",{className:"modal-card-foot"},r.a.createElement("div",{style:{margin:"auto"}},r.a.createElement("button",{id:"button-alert-yes",type:"submit",onClick:this.onYes,className:this.props.yesOnly||this.props.isError?"button":"button is-link"},"Yes"),this.props.yesOnly?null:r.a.createElement("button",{onClick:this.onNo,className:"button"},"No")))))))}}]),a}(n.Component),Pe=function(e){return r.a.createElement("div",{className:"modal is-active has-text-centered",style:{backgroundColor:"rgba(100,100,100,0.7)"}},r.a.createElement("div",{className:"modal-background"}),e.children)},Me=Be,qe=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).discussionTopicService=Ae.instance,n.onSubmitDiscussionTopic=function(e){e.preventDefault();var t=e.target;if(window.confirm("Submit Data?")){for(var a=t.getElementsByClassName("input-form-field"),r={note_id:n.props.meetingNote.id},i=0;i<a.length;i++){var l=a[i];r[l.name]=l.value}console.debug("SUBMIT:",r),n.storeDiscussionTopic(r)}},n.storeDiscussionTopic=function(e){n.commonAjax(n.discussionTopicService.store,e,n.discussionTopicSaved,n.handleErrorSubmitDiscussionTopic)},n.discussionTopicSaved=function(e){alert("Success"),n.props.onSuccess(e)},n.handleErrorSubmitDiscussionTopic=function(e){alert("Error Update Discussion Topic: "+e)},n}return Object(s.a)(a,[{key:"render",value:function(){return 0==this.props.show||null==this.props.meetingNote?null:r.a.createElement(Pe,null,r.a.createElement("div",{className:"container"},r.a.createElement(B,{title:"Tambah Tema Pembahasan",headerIconClassName:"fas fa-times",headerIconOnClick:this.props.onClose},r.a.createElement("div",{style:{overflow:"scroll"}},r.a.createElement("form",{onSubmit:this.onSubmitDiscussionTopic},r.a.createElement(ie,{className:"discussion-topic",required:!0,label:"Pembahasan",name:"content",type:"textarea"}),r.a.createElement(ie,{className:"discussion-topic",required:!0,label:"Keputusan",name:"decision",type:"textarea"}),r.a.createElement(ie,{className:"discussion-topic",required:!0,label:"Deadline",name:"deadline_date",type:"date"}),r.a.createElement(ie,{className:"discussion-topic",required:!0,label:"Penganggung Jawab",name:"person_in_charge"}),r.a.createElement(se,null),r.a.createElement("div",{className:"level"},r.a.createElement("div",{className:"level-left"},r.a.createElement("a",{className:"button",onClick:this.props.onClose},"Close"))))))))}}]),a}(w),Ge="discussion_topic_",Ke=function(e){var t=e.inputPrefix;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ie,{className:"discussion-topic",required:!0,label:"Pembahasan",name:t+"_content",type:"textarea"}),r.a.createElement(ie,{className:"discussion-topic",required:!0,label:"Keputusan",name:t+"_decision",type:"textarea"}),r.a.createElement(ie,{className:"discussion-topic",required:!0,label:"Deadline",name:t+"_deadline_date",type:"date"}),r.a.createElement(ie,{className:"discussion-topic",required:!0,label:"Penganggung Jawab",name:t+"_person_in_charge"}))},We=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(j.b,{to:"/discussiontopics"},"Tema Pembahasan"),"\xa0",r.a.createElement("i",{className:"fas fa-angle-right"}),"\xa0 Form")},Ve=function(e){return 0==e.show?null:r.a.createElement("a",{className:"button is-danger is-outlined",onClick:function(t){return e.removeDiscussionTopic(e.id)}},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-times"})),r.a.createElement("span",null,"Remove"))},ze=function(e){var t=e.meetingNote;if(null==t)return null;var a=t.discussion_topics;if(null==a)return null;for(var n=0,i=0;i<a.length;i++){a[i].is_closed&&n++}return r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{style:{border:"none"}},r.a.createElement("div",{className:"tags has-addons are-small"},r.a.createElement("span",{className:"tag is-light"},"Closed"),r.a.createElement("span",{className:"tag is-info"},n))),r.a.createElement("td",{style:{border:"none"}},r.a.createElement("div",{className:"tags has-addons are-small"},r.a.createElement("span",{className:"tag is-light"},"Not Closed"),r.a.createElement("span",{className:"tag is-danger"},a.length-n))))))},Ye=function(e){return r.a.createElement("div",{className:"has-text-centered"},r.a.createElement("a",{className:"button is-primary is-outlined",onClick:e.addDiscussionTopic,style:{marginTop:"10px",marginBottom:"10px"}},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-plus"})),r.a.createElement("span",null,"Tambah Tema Pembahasan")))},Je=function(e){return e.show?r.a.createElement("div",{className:"tags has-addons"},r.a.createElement("span",{className:"tag is-info"},"Attachment : ",e.name),r.a.createElement("span",{className:"tag is-warning",style:{cursor:"pointer"},onClick:e.onRemoveClick},"remove")):null},He=function(e){if(0==e.show)return null;var t=e.id;return r.a.createElement("div",{className:"buttons has-addons"},r.a.createElement(j.b,{to:"/discussiontopics/"+t,className:"button is-warning"},r.a.createElement("i",{className:"fas fa-edit"}),"\xa0Edit"),r.a.createElement(j.b,{to:"/discussiontopics/"+t+"/action",className:"button is-primary"},r.a.createElement("i",{className:"fas fa-location-arrow"}),"\xa0Konfirmasi"))},Qe=function(e){return 1==e.closed?r.a.createElement("span",{className:"tag is-primary"},r.a.createElement("i",{className:"fas fa-check"}),"\xa0Closed"):null},Xe=function(e){if(0==e.show||null==e.meetingNote)return null;var t=e.meetingNote;return r.a.createElement("div",{style:{marginBottom:"20px"}},r.a.createElement("div",{className:"level"},r.a.createElement("div",{className:"level-left"},r.a.createElement(ze,{meetingNote:t})),r.a.createElement("div",{className:"level-right"},r.a.createElement("span",{className:"tag is-primary is-medium"},t.departement.name))))},$e=function(e){return r.a.createElement(oe,{label:"Tema Pembahasan"},r.a.createElement("span",{className:"tag is-dark"},r.a.createElement("b",null,e.count)))},Ze=function(e){return 0==e.show?null:r.a.createElement(B,{title:"Action"},r.a.createElement(se,{submitText:"Create",withReset:!0}))},et=function(e,t){if(null==e||null==e.discussion_topics)return null;for(var a=0;a<e.discussion_topics.length;a++){var n=e.discussion_topics[a];if(n.id==t)return n}return null},tt=function(e,t){for(var a in e)e.hasOwnProperty(a)&&a.startsWith(t)&&delete e[a]},at=function(e){var t={index:0,name:null},a=e.split(Ge)[1].split("_");return t.index=parseInt(a[0]),t.name=e.split(Ge+t.index+"_")[1],t},nt="form-input-meeting-note",rt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state=Object(k.a)(Object(k.a)({},n.state),{},{recordNotFound:!1,isLoadingRecord:!0,discussionTopicCount:[1],showFormDiscussionTopicInEditMode:!1}),n.discussionTopicService=Ae.instance,n.meetingNoteService=Fe.instance,n.attachmentsData={},n.form_temporary_inputs={},n.meetingNote=null,n.isSubmitting=!1,n.getRecordId=function(){return n.props.match.params.id},n.addDiscussionTopic=function(){if(n.saveFormInputsToTemporaryData(),null==n.getRecordId()||null==n.meetingNote){var e=n.state.discussionTopicCount;e.push(function(e){for(var t=0,a=0;a<e.length;a++){var n=e[a];n>t&&(t=n)}return t}(e)+1),n.setState({discussionTopicCount:e})}else n.setState({showFormDiscussionTopicInEditMode:!0})},n.removeDiscussionTopic=function(e){n.saveFormInputsToTemporaryData();var t=Object(c.a)(n);n.showConfirmationDanger("Remove discussion topic ("+e+")? ").then((function(a){a&&t.doRemoveDiscussionTopic(e)}))},n.doRemoveDiscussionTopic=function(e){var t=n.state.discussionTopicCount,a=function(e,t){for(var a=0;a<e.length;a++)if(e[a]==t)return a;return null}(t,e);null!=a&&(t.splice(a,1),n.deleteTempFormData(e),n.setState({discussionTopicCount:t}),n.setInputsFromTemporaryData())},n.deleteTempFormData=function(e){var t=Ge+e+"_";tt(n.form_temporary_inputs,t),tt(n.attachmentsData,t)},n.setInputsFromTemporaryData=function(){var e=document.getElementById(nt);null!=e&&function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];console.debug("setTempDiscussionTopicValues: ",t);for(var n=0;n<e.length;n++){var r=e[n];"file"!=r.type&&(null!=t[r.name]?r.value=t[r.name]:r.value=null,a&&r.setAttribute("disabled","disabled"))}}(e.getElementsByClassName("input-form-field"),n.form_temporary_inputs,null!=n.getRecordId())},n.saveFormInputsToTemporaryData=function(){var e=document.getElementById(nt);if(null!=e){var t=e.getElementsByClassName("input-form-field");n.form_temporary_inputs=function(e){for(var t={},a=0;a<e.length;a++){var n=e[a],r=n.name;null!=n.value&&""!=n.value&&("file"==n.type||(t[r]=n.value))}return console.debug("SAVED TEMP: ",t),t}(t)}},n.onSubmit=function(e){if(e.preventDefault(),null==n.getRecordId()){n.saveFormInputsToTemporaryData(),n.isSubmitting=!0;var t=Object(c.a)(n),a=e.target;n.showConfirmation("Submit Data?").then((function(e){e&&t.fillDataAndStore(a),t.isSubmitting=!1}))}},n.fillDataAndStore=function(e){var t=n.form_temporary_inputs,a={};!function(e,t){for(var a in t)if(t.hasOwnProperty(a)){var n=t[a];e[a]=n}}(t,n.attachmentsData),Object.keys(t).sort().forEach((function(e){a[e]=t[e]})),n.meetingNote=function(e){var t={discussion_topics:[]},a=-1,n=-1;for(var r in e){var i=e[r];if(r.startsWith(Ge)){var l=at(r);l.index!=a&&(t.discussion_topics.push({}),a=l.index,n++),1==i.isFile?t.discussion_topics[n][l.name+"_info"]=i:t.discussion_topics[n][l.name]=i}else t[r]=i}return t}(a),null!=n.getRecordId()&&(n.meetingNote.id=n.getRecordId()),console.debug("inputs: ",a,"meetingNote: ",n.meetingNote),n.storeMeetingNote()},n.addAttachmentData=function(e,t){n.saveFormInputsToTemporaryData();var a=Object(c.a)(n);Ue(e.target).then((function(e){a.attachmentsData[t]=e,a.refresh()}))},n.removeAttachment=function(e){n.saveFormInputsToTemporaryData();var t=Object(c.a)(n);n.showConfirmation("Remove attachment?").then((function(a){if(a)try{delete t.attachmentsData[e],t.refresh()}catch(n){console.error(n)}}))},n.recordSaved=function(e){n.showInfo("Success");try{null==n.getRecordId()&&(n.props.history.push("/meetingnote/"+e.meeting_note.id),n.handleSuccessGetRecord(e))}catch(t){console.error(t)}},n.handleErrorGetRecord=function(e){console.error(e),n.setState({recordNotFound:!0})},n.handleSuccessGetRecord=function(e){n.meetingNote=e.meeting_note;for(var t=n.meetingNote.discussion_topics,a=[],r=0;r<t.length;r++){var i=t[r];a.push(i.id)}n.form_temporary_inputs=function(e){var t={};for(var a in e)if(e.hasOwnProperty(a)){var n=e[a];if("discussion_topics"==a)continue;t[a]=n}if(e.discussion_topics)for(var r=0;r<e.discussion_topics.length;r++){var i=e.discussion_topics[r];for(var l in i)if(i.hasOwnProperty(l)){var o=i[l];t[Ge+i.id+"_"+l]=o}}return t}(n.meetingNote),n.setState({discussionTopicCount:a,isLoadingRecord:!1})},n.enableInputs=function(){var e=document.getElementById(nt);null!=e&&(!function(e){if(null!=e)for(var t=0;t<e.length;t++){e[t].removeAttribute("disabled")}}(e.getElementsByClassName("input-form-field")),0==n.isSubmitting&&e.reset())},n.discussionTopicSaved=function(e){n.setState({showFormDiscussionTopicInEditMode:!1}),n.loadRecord()},n.storeMeetingNote=function(){n.commonAjax(n.meetingNoteService.store,n.meetingNote,n.recordSaved,null)},n.loadRecord=function(){n.commonAjax(n.meetingNoteService.view,n.getRecordId(),n.handleSuccessGetRecord,n.handleErrorGetRecord)},n}return Object(s.a)(a,[{key:"componentWillMount",value:function(){this.validateLoginStatus()}},{key:"componentDidMount",value:function(){document.title="Notulensi",null!=this.getRecordId()&&this.loadRecord()}},{key:"componentDidUpdate",value:function(){this.validateLoginStatus(),null==this.getRecordId()&&this.enableInputs(),null==this.getRecordId()&&null!=this.meetingNote&&(this.meetingNote=null,this.form_temporary_inputs={},this.setState({discussionTopicCount:[1]})),this.setInputsFromTemporaryData()}},{key:"getUserName",value:function(){return null!=this.meetingNote&&null!=this.meetingNote.user?this.meetingNote.user.display_name:this.getLoggedUser().display_name}},{key:"render",value:function(){var e=this;if(this.isLoggedUserNull())return null;var t=this.title("Notulensi Rapat");if(this.state.recordNotFound)return r.a.createElement("div",null,t,r.a.createElement(F,{className:"is-danger",body:"Record Not Found"}));if(null!=this.getRecordId()&&this.state.isLoadingRecord)return r.a.createElement("div",null,t,r.a.createElement("h3",null,"Please Wait..."));var a=this.state.discussionTopicCount;return r.a.createElement("div",null,t,r.a.createElement(qe,{show:this.state.showFormDiscussionTopicInEditMode,app:this.props.app,meetingNote:this.meetingNote,onSuccess:this.discussionTopicSaved,onClose:function(t){return e.setState({showFormDiscussionTopicInEditMode:!1})}}),r.a.createElement("form",{id:nt,onSubmit:this.onSubmit},r.a.createElement(B,{title:r.a.createElement(We,null)},r.a.createElement(Xe,{show:null!=this.getRecordId(),meetingNote:this.meetingNote}),r.a.createElement(ie,{required:!0,label:"Tanggal",name:"date",type:"date"}),r.a.createElement(ie,{required:!0,label:"Tempat",name:"place"}),r.a.createElement($e,{count:this.state.discussionTopicCount.length}),r.a.createElement(oe,{label:"Notulis"},this.getUserName())),a.map((function(t,a){var n=function(e,t){var a=et(e,t);return null==a?null:a.is_closed}(e.meetingNote,t),i=et(e.meetingNote,t),l="Tema Pembahasan #"+(a+1),o=Ge+t;return r.a.createElement(B,{title:l,key:"discussion_topic_field_"+a},r.a.createElement(Qe,{closed:n}),r.a.createElement(Ve,{show:null==e.getRecordId()&&e.state.discussionTopicCount.length>1,id:t,removeDiscussionTopic:e.removeDiscussionTopic}),r.a.createElement(Ke,{inputPrefix:o}),r.a.createElement(ie,{show:null==e.getRecordId(),className:"discussion-topic",label:"Attachment",attributes:{onChange:function(t){return e.addAttachmentData(t,o+"_attachment")}},name:o+"_attachment",type:"file",note:"Kosongkan jika tidak ada dokumen"}),r.a.createElement(Je,{show:null!=e.attachmentsData[o+"_attachment"],name:null==e.attachmentsData[o+"_attachment"]?null:e.attachmentsData[o+"_attachment"].name,onRemoveClick:function(t){return e.removeAttachment(o+"_attachment")}}),r.a.createElement(He,{show:null!=e.getRecordId(),id:t}),r.a.createElement(q,{showExtension:!0,show:null!=i,to:null==i?null:"upload/topic/"+i.attachment}))})),r.a.createElement(Ye,{addDiscussionTopic:this.addDiscussionTopic}),r.a.createElement(Ze,{show:null==this.getRecordId()})))}}]),a}(w),it=Object(d.f)(Object(D.b)(I)(rt)),lt=function e(t){Object(o.a)(this,e),this.updateProfile=function(e){var t={userModel:e},a=h().concat("api/accountdashboard/updateprofile");return $(a,t)}};lt.instance=lt.instance||new lt;var ot=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={},n.userService=lt.instance,n.populateForm=function(){for(var e=document.getElementById("form-profile").getElementsByClassName("input-form-field"),t=n.props.loggedUser,a=0;a<e.length;a++){var r=e[a];"password"==r.name?r.value=null:r.value=t[r.name]}},n.onSubmit=function(e){e.preventDefault();var t=e.target,a=Object(c.a)(n);n.showConfirmation("Update Profile?").then((function(e){e&&a.updateProfile(t)}))},n.updateProfile=function(e){for(var t=e.getElementsByClassName("input-form-field"),a={},r=0;r<t.length;r++){var i=t[r];if(null!=i.value&&""!=i.value)a[i.name]=i.value}n.commonAjax(n.userService.updateProfile,a,n.onSubmitSuccess,n.onSubmitError)},n.onSubmitSuccess=function(e){n.showInfo("Update Profile Success"),n.props.requestAppId(n.getParentApp())},n.onSubmitError=function(e){n.showError("Update Profile Failed")},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.validateLoginStatus(),document.title="Profile",this.populateForm()}},{key:"componentDidUpdate",value:function(){this.validateLoginStatus()}},{key:"render",value:function(){var e=this.props.loggedUser;return null==e?r.a.createElement(r.a.Fragment,null):r.a.createElement("div",null,r.a.createElement(C,null,"Profile"),r.a.createElement(B,{title:"Update Profile"},r.a.createElement("form",{onSubmit:this.onSubmit,id:"form-profile"},r.a.createElement(ie,{label:"Email",name:"email",required:!0,type:"email"}),r.a.createElement(ie,{label:"Username",name:"name",required:!0}),r.a.createElement(ie,{label:"Display Name",name:"display_name",required:!0}),r.a.createElement(ie,{label:"Password",name:"password",note:"Kosongkan password apabila tidak ingin diubah"}),r.a.createElement(oe,{label:"Departement"},e.departement?e.departement.name:""),r.a.createElement(se,{submitText:"Update"}))))}}]),a}(w),st=Object(d.f)(Object(D.b)((function(e){return{loggedUser:e.userState.loggedUser,loginStatus:e.userState.loginStatus}}),(function(e){return{requestAppId:function(t){return e(b(t))}}}))(ot)),ct=function e(){Object(o.a)(this,e),this.departementList=function(){var e=h().concat("api/public/issues/departements");return $(e,{})},this.storePublicIssue=function(e){var t=h().concat("api/public/issues/store");return $(t,{issue:e})},this.list=function(e){var t={code:"issue",filter:e},a=h().concat("api/issues/list");return $(a,t)},this.view=function(e){var t=h().concat("api/issues/view/"+e);return $(t,{})},this.delete=function(e){var t=h().concat("api/issues/delete/"+e);return $(t,{})},this.followUpIssue=function(e){var t={followed_up_issue:e},a=h().concat("api/issues/followup");return $(a,t)}};ct.instance=ct.instance||new ct;var ut=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e,"Aduan","issue")).loadRecords=function(){n.readInputForm();var e={page:n.page,limit:n.limit,orderBy:n.orderBy,orderType:n.orderType,fieldsFilter:n.fieldsFilter};n.commonAjax(n.issueService.list,e,n.successLoaded,n.errorLoaded)},n.state={},n.issueService=ct.instance,n.deleteRecord=function(e){n.commonAjax(n.issueService.delete,e,n.onSuccessDelete,n.onErrorDelete)},n}return Object(s.a)(a,[{key:"createNavButton",value:function(){var e=null!=this.recordData?this.recordData:null;return null==e?r.a.createElement(r.a.Fragment,null):r.a.createElement(Ne,{onClick:this.loadRecordByPage,limit:this.limit,totalData:e.count,activeIndex:this.page})}},{key:"componentDidMount",value:function(){this.validateLoginStatus()&&(this.loadRecords(),document.title="Daftar Aduan")}},{key:"componentDidUpdate",value:function(){this.isLoggedUserNull()&&this.backToLogin()}},{key:"render",value:function(){var e=this;if(this.isLoggedUserNull())return null;var t=this.createNavButton(),a=null!=this.recordData?this.recordData:null,n=null==a||null==a.result_list?[]:a.result_list,i="admin"==this.props.loggedUser.role;return r.a.createElement("div",null,r.a.createElement(C,null,"Daftar Aduan"),r.a.createElement(B,{title:"Daftar Aduan"},i?this.linkToFormCreate("/issues/create","Tambah Aduan"):null,r.a.createElement("form",{id:"list-form",onSubmit:function(t){t.preventDefault(),e.filter(t.target)}},r.a.createElement(Oe,{cells:[re(),t]}),r.a.createElement("div",{style:{overflow:"scroll"}},r.a.createElement("table",{className:"table"},r.a.createElement(ae,{onButtonOrderClick:this.onButtonOrderClick,headers:[{text:"No"},{text:"date",withFilter:!0},{text:"place",withFilter:!0},{text:"content",withFilter:!0},{text:"issuer",withFilter:!0},{text:"email",withFilter:!0},{text:"departement",withFilter:!0},{text:"issue_input",alias:"input",withFilter:!0},{text:"attachment",withFilter:!0},{text:"is_closed",alias:"Status",withFilter:!0},{text:"action"}]}),r.a.createElement("tbody",null,n.map((function(t,a){var n=(e.page-1)*e.limit;return r.a.createElement("tr",{key:"record_"+a},r.a.createElement("td",null,n+a+1),r.a.createElement("td",null,t.date),r.a.createElement("td",null,t.place),r.a.createElement("td",null,t.content&&t.content.length>10?t.content.substring(0,10)+"...":t.content),r.a.createElement("td",null,t.issuer),r.a.createElement("td",null,t.email),r.a.createElement("td",null,t.departement.name),r.a.createElement("td",null,t.issue_input),r.a.createElement("td",null,null==t.attachment?null:r.a.createElement(q,{to:"upload/issue/"+t.attachment})),r.a.createElement("td",null,1==t.is_closed?r.a.createElement("span",{className:"tag is-info"},"Closed"):r.a.createElement("span",{className:"tag is-warning"},"Not Closed")),r.a.createElement("td",null,i?r.a.createElement(r.a.Fragment,null,r.a.createElement(j.b,{to:"/issues/"+t.id,className:"button is-small"},r.a.createElement("i",{className:"fas fa-edit"})),e.buttonDeleteRecord(t.id,!1)):null,r.a.createElement(j.b,{to:"/issues/"+t.id+"/followup",className:"button is-primary is-small"},r.a.createElement("i",{className:"fas fa-location-arrow"}))))}))))))))}}]),a}(De),mt=Object(d.f)(Object(D.b)((function(e){return{loggedUser:e.userState.loggedUser,loginStatus:e.userState.loginStatus}}),(function(e){return{}}))(ut)),dt=["Yayasan","Orang Tua","Santri","Pegawai","Tamu"],pt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={recordNotFound:!1,isLoadingRecord:!0},n.departementList=[],n.attachmentData=null,n.record=null,n.masterDataService=ve.instance,n.onSubmit=function(e){e.preventDefault();var t=e.target,a=Object(c.a)(n);n.showConfirmation("Save Data?").then((function(e){e&&a.fillDataAndStore(t)}))},n.updateAttachmentData=function(e){var t=Object(c.a)(n);Ue(e.target).then((function(e){t.attachmentData=e})).catch(console.error)},n.fillDataAndStore=function(e){for(var t=e.getElementsByClassName("input-form-field"),a={},r=0;r<t.length;r++){var i=t[r];if(null!=i.value&&""!=i.value){var l=i.name;"departement"==l&&(l="departement_id"),"attachment"==l?a[l+"_info"]=n.attachmentData:a[l]=i.value}}null!=n.getRecordId()&&(a.id=n.getRecordId()),n.store(a),console.debug("ISSUE: ",a)},n.getRecordId=function(){return n.props.match.params.id},n.departementListLoaded=function(e){n.departementList=e.result_list,null!=n.getRecordId()&&n.loadRecord(),n.props.storeApplicationData("departements",n.departementList)},n.recordSaved=function(e){n.showInfo("SUCCESS SAVING RECORD"),n.attachmentData=null,n.record=null,null==n.getRecordId()&&(n.handleSuccessGetRecord(e),n.props.history.push("/issues/"+e.issue.id))},n.store=function(e){n.commonAjax(n.masterDataService.storeIssue,e,n.recordSaved,null)},n.loadDepartements=function(){var e=n.props.applicationData;console.debug("appdata: ",e),null==e.departements||0==e.departements.length?n.commonAjax(n.masterDataService.departementList,{},n.departementListLoaded,(function(e){})):(n.departementList=e.departements,null!=n.getRecordId()&&n.loadRecord(),n.refresh())},n.handleSuccessGetRecord=function(e){n.record=e.issue,n.setState({isLoadingRecord:!1});for(var t=document.getElementById("form-management").getElementsByClassName("input-form-field"),a=0;a<t.length;a++){var r=t[a];"attachment"!=r.name&&("departement"==r.name?r.value=e.issue.departement_id:r.value=e.issue[r.name])}},n.handleErrorGetRecord=function(e){console.error(e),n.setState({recordNotFound:!0})},n.loadRecord=function(){n.commonAjax(n.masterDataService.viewIssue,n.getRecordId(),n.handleSuccessGetRecord,n.handleErrorGetRecord)},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.validateLoginStatus()&&(this.loadDepartements(),document.title="Form Aduan")}},{key:"render",value:function(){if(this.state.recordNotFound)return r.a.createElement(F,{className:"is-danger",body:"Record Not Found"});var e=this.title("Form Aduan");if(null!=this.getRecordId()&&this.state.isLoadingRecord)return r.a.createElement("div",null,e,r.a.createElement("h3",null,"Please Wait..."));var t=r.a.createElement(r.a.Fragment,null,r.a.createElement(j.b,{to:"/issues"},"Aduan"),"\xa0",r.a.createElement("i",{className:"fas fa-angle-right"}),"\xa0Form");return r.a.createElement("div",null,e,r.a.createElement(B,{title:t},r.a.createElement("form",{onSubmit:this.onSubmit,id:"form-management"},r.a.createElement(ie,{label:"Tanggal",name:"date",type:"date",required:!0}),r.a.createElement(ie,{label:"Tempat",name:"place",required:!0}),r.a.createElement(ie,{label:"Permasalahan",name:"content",type:"textarea",required:!0}),r.a.createElement(ie,{name:"email",type:"email",note:"Kosongkan jika berstatus anonim"}),r.a.createElement(le,{label:"Pengadu",options:dt.map((function(e){return{value:e,text:e}})),name:"issuer",required:!0}),r.a.createElement(le,{label:"Bidang",options:this.departementList.map((function(e){return{value:e.id,text:e.name}})),name:"departement",required:!0}),null!=this.getRecordId()&&null!=this.record?r.a.createElement(oe,{label:"Attachment"},this.record.attachment?r.a.createElement(q,{to:"upload/issue/"+this.record.attachment}):"tidak ada"):r.a.createElement(ie,{name:"attachment",attributes:{accept:"image/*",onChange:this.updateAttachmentData},type:"file",note:"Kosongkan jika tidak ada dokumen"}),r.a.createElement(ie,{label:"Sumber Aduan",name:"issue_input",required:!0}),r.a.createElement(se,{submitText:null==this.getRecordId()?"Create":"Update",withReset:null==this.getRecordId()}))))}}]),a}(fe),ft=Object(d.f)(Object(D.b)(I,(function(e){return{storeApplicationData:function(t,a){return e(S(t,a))}}}))(pt)),ht=["January","February","March","April","May","June","July","August","September","October","November","December"],gt=function(e){var t=e.split("-"),a=t[2],n=t[1],r=t[0];return a+" "+ht[n-1]+" "+r},vt=function(e){return(e.getTime()-(new Date).getTime())/864e5},Et=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){return Object(o.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"render",value:function(){var e=1==this.props.closed;return r.a.createElement("div",{className:"tags has-addons are-medium"},r.a.createElement("span",{className:"tag is-dark"},"Status"),r.a.createElement("span",{className:"tag "+(e?"is-info":"is-warning")},1==e?"Closed":"Not Closed"))}}]),a}(n.Component),bt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={recordNotFound:!1,isLoadingRecord:!0,showDetailIssue:!0},n.issue={},n.issueService=ct.instance,n.getRecordId=function(){return n.props.match.params.id},n.hideDetailIssue=function(){n.setState({showDetailIssue:!1})},n.showDetailIssue=function(){n.setState({showDetailIssue:!0})},n.onSubmit=function(e){e.preventDefault();var t=e.target,a=Object(c.a)(n);n.showConfirmation("Submit Data?").then((function(e){e&&a.fillDataAndStore(t)}))},n.fillDataAndStore=function(e){for(var t=e.getElementsByClassName("input-form-field"),a={issue_id:n.issue.id},r=0;r<t.length;r++){var i=t[r];null!=i.value&&""!=i.value&&(a[i.name]=i.value)}console.debug("issue action>>",a),n.storeAction(a)},n.handleSuccessSubmit=function(e){n.issue.follow_up=e.followed_up_issue,n.issue.is_closed=!0;try{null==n.getRecordId()&&document.getElementById("form-input-follow-up-issue").reset()}catch(t){console.error(t)}n.showInfo("SUCCESS")},n.handleErrorGetRecord=function(e){n.setState({recordNotFound:!0})},n.handleSuccessGetRecord=function(e){n.issue=e.issue,n.setState({isLoadingRecord:!1,recordNotFound:!1})},n.storeAction=function(e){n.commonAjax(n.issueService.followUpIssue,e,n.handleSuccessSubmit,null)},n.loadRecord=function(){n.commonAjax(n.issueService.view,n.getRecordId(),n.handleSuccessGetRecord,n.handleErrorGetRecord)},n.isClosed=function(){return null!=n.getRecordId()&&null!=n.issue&&1==n.issue.is_closed},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.validateLoginStatus()&&(document.title="Follow Up Issue",null==this.getRecordId()&&this.backToLogin(),this.loadRecord())}},{key:"render",value:function(){if(this.isLoggedUserNull())return null;if(this.state.recordNotFound)return r.a.createElement(F,{className:"is-danger",body:"Record Not Found"});var e=this.title("Tindak Lanjut Aduan");if(this.state.isLoadingRecord)return r.a.createElement("div",null,e,r.a.createElement("h3",null,"Please Wait..."));var t=r.a.createElement(r.a.Fragment,null,r.a.createElement(j.b,{to:"/issues"},"Aduan"),"\xa0",r.a.createElement("i",{className:"fas fa-angle-right"}),"\xa0Detail Aduan"),a=this.issue.is_closed;return r.a.createElement("div",null,e,r.a.createElement(B,{title:t},r.a.createElement(Et,{closed:a}),this.state.showDetailIssue?r.a.createElement("article",{style:{marginBottom:"10px"},className:"is-info"},r.a.createElement("div",{className:"message-header"},r.a.createElement("p",null,"Detail Aduan"),r.a.createElement("button",{onClick:this.hideDetailIssue,className:"delete","aria-label":"delete"})),r.a.createElement("div",{className:"message-body has-background-light"},r.a.createElement(oe,{label:"Waktu dan Tempat"},r.a.createElement("p",null,this.issue.place,", ",gt(this.issue.date))),r.a.createElement(oe,{label:"Bidang"},r.a.createElement("p",null,this.issue.departement.name)),r.a.createElement(oe,{label:"Permasalahan"},r.a.createElement("p",null,this.issue.content)),r.a.createElement(oe,{label:"Pengadu"},r.a.createElement("p",null,this.issue.email,", ",this.issue.issuer)),r.a.createElement(oe,{label:"Sumber Input"},r.a.createElement("p",null,this.issue.issue_input)),r.a.createElement(oe,{label:"Attachment"},this.issue.attachment?r.a.createElement(q,{to:"upload/issue/"+this.issue.attachment}):null))):r.a.createElement(M,{children:"Detail Aduan",iconClassName:"fas fa-angle-down",onClick:this.showDetailIssue})),r.a.createElement(B,{title:"Formulir Tindak Lanjut"},null==this.issue.follow_up?r.a.createElement("form",{id:"form-input-follow-up-issue",onSubmit:this.onSubmit},r.a.createElement(ie,{required:!0,label:"Tanggal",name:"date",type:"date"}),r.a.createElement(ie,{required:!0,label:"Keterangan",name:"description",type:"textarea"}),r.a.createElement(se,{submitText:"Submit",withReset:!0})):r.a.createElement("article",{style:{marginBottom:"10px"},className:"is-info"},r.a.createElement("div",{className:"message-header"},r.a.createElement("p",null,"Detail Tindak Lanjut")),r.a.createElement("div",{className:"message-body has-background-light"},r.a.createElement(oe,{label:"Tanggal"},r.a.createElement("p",null,this.issue.follow_up.date)),r.a.createElement(oe,{label:"Keterangan"},r.a.createElement("p",null,this.issue.follow_up.description))))))}}]),a}(w),Nt=Object(d.f)(Object(D.b)((function(e){return{loggedUser:e.userState.loggedUser,loginStatus:e.userState.loginStatus}}),(function(e){return{}}))(bt)),yt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={recordNotFound:!1,isLoadingRecord:!0},n.discussionTopicService=Ae.instance,n.onSubmit=function(e){e.preventDefault();var t=e.target,a=Object(c.a)(n);n.showConfirmation("Save Data?").then((function(e){e&&a.storeRecord(t)}))},n.storeRecord=function(e){for(var t=e.getElementsByClassName("input-form-field"),a={},r=0;r<t.length;r++){var i=t[r];if(null!=i.value&&""!=i.value)a[i.name]=i.value}null!=n.getRecordId()&&(a.id=n.getRecordId()),n.store(a),console.debug("discussionTopic: ",a)},n.getRecordId=function(){return n.props.match.params.id},n.recordSaved=function(e){n.showInfo("SUCCESS SAVING RECORD"),null==n.getRecordId()&&(n.handleSuccessGetRecord(e),n.props.history.push("/discussiontopics/"+e.discussion_topic.id))},n.recordFailedToSave=function(e){n.showError("FAILED SAVING RECORD")},n.store=function(e){n.commonAjax(n.discussionTopicService.store,e,n.recordSaved,n.recordFailedToSave)},n.handleSuccessGetRecord=function(e){n.recordData=e,n.discussionTopic=e.discussion_topic;for(var t=document.getElementById("form-management").getElementsByClassName("input-form-field"),a=0;a<t.length;a++){var r=t[a];r.value=n.discussionTopic[r.name],0==n.isClosed()&&"content"!=r.name&&"decision"!=r.name&&r.setAttribute("disabled","disabled"),1==n.isClosed()&&r.setAttribute("disabled","disabled")}n.setState({isLoadingRecord:!1})},n.handleErrorGetRecord=function(e){n.setState({recordNotFound:!0})},n.loadRecord=function(){n.commonAjax(n.discussionTopicService.view,n.getRecordId(),n.handleSuccessGetRecord,n.handleErrorGetRecord)},n.isClosed=function(){return null!=n.getRecordId()&&null!=n.discussionTopic&&1==n.discussionTopic.is_closed},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.validateLoginStatus()&&(null!=this.getRecordId()&&this.loadRecord(),document.title="Form Tema Pembahasan")}},{key:"render",value:function(){var e=this.title("Form Tema Pembahasan");if(this.state.recordNotFound)return r.a.createElement("div",null,e,r.a.createElement(F,{className:"is-danger",body:"Record Not Found"}));if(null!=this.getRecordId()&&this.state.isLoadingRecord)return r.a.createElement("div",null,e,r.a.createElement("h3",null,"Please Wait..."));var t=r.a.createElement(r.a.Fragment,null,r.a.createElement(j.b,{to:"/discussiontopics"},"Tema Pembahasan"),"\xa0",r.a.createElement("i",{className:"fas fa-angle-right"}),"\xa0Form"),a=this.discussionTopic.is_closed;return r.a.createElement("div",null,e,r.a.createElement(B,{title:t},null!=this.getRecordId()&&null!=this.discussionTopic?r.a.createElement("div",{className:"level"},r.a.createElement("div",{className:"level-left"},r.a.createElement(Et,{closed:a})),r.a.createElement("div",{className:"level-right"},r.a.createElement("span",{className:"tag is-primary is-medium"},null==this.discussionTopic.departement?null:this.discussionTopic.departement.name))):null,r.a.createElement(St,{note_id:this.discussionTopic.note_id}),r.a.createElement("form",{onSubmit:this.onSubmit,id:"form-management"},r.a.createElement(ie,{required:!0,label:"Tanggal",name:"date",type:"date"}),r.a.createElement(ie,{required:!0,label:"Pembahasan",name:"content",type:"textarea"}),r.a.createElement(ie,{required:!0,label:"Keputusan",name:"decision",type:"textarea"}),r.a.createElement(ie,{required:!0,label:"Deadline",name:"deadline_date",type:"date"}),r.a.createElement(ie,{required:!0,label:"Penganggung Jawab",name:"person_in_charge"}),r.a.createElement(oe,{label:"Attachment"},this.discussionTopic.attachment?r.a.createElement(q,{showExtension:!0,to:"upload/topic/"+this.discussionTopic.attachment}):null),this.isClosed()?null:r.a.createElement(se,{submitText:null==this.getRecordId()?"Create":"Update",withReset:null==this.getRecordId()}))))}}]),a}(De),St=function(e){e.note_id;return r.a.createElement("div",{style:{marginBottom:"20px"}},r.a.createElement(j.b,{to:"/meetingnote/"+e.note_id,className:"button is-info"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-clipboard"})),r.a.createElement("span",null,"Detail Notulensi")))},Dt=Object(d.f)(Object(D.b)((function(e){return{loggedUser:e.userState.loggedUser,loginStatus:e.userState.loginStatus}}))(yt)),Ot=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={recordNotFound:!1,isLoadingRecord:!0,showDetailDiscussionTopic:!0},n.discussionTopic={},n.discussionTopicSerivce=Ae.instance,n.getRecordId=function(){return n.props.match.params.id},n.hideDetailIssue=function(){n.setState({showDetailDiscussionTopic:!1})},n.showDetailDiscussionTopic=function(){n.setState({showDetailDiscussionTopic:!0})},n.onSubmit=function(e){e.preventDefault();var t=e.target,a=Object(c.a)(n);n.showConfirmation("Submit Data?").then((function(e){e&&a.fillDataAndStore(t)}))},n.fillDataAndStore=function(e){for(var t=e.getElementsByClassName("input-form-field"),a={topic_id:n.discussionTopic.id},r=0;r<t.length;r++){var i=t[r];null!=i.value&&""!=i.value&&(a[i.name]=i.value)}console.debug("issue action>>",a),n.storeAction(a)},n.handleSuccessSubmit=function(e){n.discussionTopic.action=e.discussion_action,n.discussionTopic.is_closed=!0,n.showInfo("SUCCESS");try{null==n.getRecordId()&&document.getElementById("form-input-discussion-action").reset()}catch(t){}},n.handleErrorSubmit=function(e){n.showError("handleErrorSubmit: "+e)},n.handleErrorGetRecord=function(e){n.setState({recordNotFound:!0})},n.handleSuccessGetRecord=function(e){n.discussionTopic=e.discussion_topic,n.setState({isLoadingRecord:!1,recordNotFound:!1})},n.storeAction=function(e){n.commonAjax(n.discussionTopicSerivce.storeAction,e,n.handleSuccessSubmit,n.handleErrorSubmit)},n.loadRecord=function(){n.commonAjax(n.discussionTopicSerivce.view,n.getRecordId(),n.handleSuccessGetRecord,n.handleErrorGetRecord)},n.isClosed=function(){return null!=n.getRecordId()&&null!=n.discussionTopic&&1==n.discussionTopic.is_closed},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.validateLoginStatus()&&(document.title="Konfirmasi Tema Pembahasan",null==this.getRecordId()&&this.backToLogin(),this.loadRecord())}},{key:"render",value:function(){if(null==this.props.loggedUser)return null;var e=this.title("Penyelesaian/Pelaksanaan Keputusan");if(this.state.recordNotFound)return r.a.createElement("div",null,e,r.a.createElement(F,{className:"is-danger",body:"Record Not Found"}));if(this.state.isLoadingRecord)return r.a.createElement("div",null,e,r.a.createElement("h3",null,"Please Wait..."));var t=this.discussionTopic.is_closed;return r.a.createElement("div",null,e,r.a.createElement(B,{title:"Detail Tema Pembahasan"},r.a.createElement(Et,{closed:t}),r.a.createElement(St,{note_id:this.discussionTopic.note_id}),this.state.showDetailDiscussionTopic?r.a.createElement("article",{style:{marginBottom:"10px"},className:"is-info"},r.a.createElement("div",{className:"message-header has-background-link"},r.a.createElement("p",null,"Detail Tema Pembahasan"),r.a.createElement("button",{onClick:this.hideDetailIssue,className:"delete","aria-label":"delete"})),r.a.createElement("div",{className:"message-body has-background-light"},r.a.createElement(oe,{label:"Waktu"},r.a.createElement("p",null,gt(this.discussionTopic.date))),r.a.createElement(oe,{label:"Bidang"},r.a.createElement("p",null,this.discussionTopic.departement.name)),r.a.createElement(oe,{label:"Pembahasan"},r.a.createElement("p",null,this.discussionTopic.content)),r.a.createElement(oe,{label:"Keputusan"},r.a.createElement("p",null,this.discussionTopic.decision)),r.a.createElement(oe,{label:"Deadline"},r.a.createElement("p",null,gt(this.discussionTopic.deadline_date))),r.a.createElement(oe,{label:"Penganggung Jawab"},r.a.createElement("p",null,this.discussionTopic.person_in_charge)),r.a.createElement(oe,{label:"Attachment"},r.a.createElement(q,{show:null!=this.discussionTopic.attachment,showExtension:!0,to:"upload/topic/"+this.discussionTopic.attachment})))):r.a.createElement(M,{onClick:this.showDetailDiscussionTopic,iconClassName:"fas fa-angle-down"},"Detail Tema Pembahasan")),r.a.createElement(B,{title:"Penyelesaian/Pelaksanaan Keputusan"},null==this.discussionTopic.action?r.a.createElement("form",{id:"form-input-discussion-action",onSubmit:this.onSubmit},r.a.createElement(ie,{required:!0,label:"Tanggal",name:"date",type:"date"}),r.a.createElement(ie,{required:!0,label:"Keterangan",name:"description",type:"textarea"}),r.a.createElement(se,{submitText:"Submit",withReset:!0})):r.a.createElement("article",{style:{marginBottom:"10px"},className:"is-info"},r.a.createElement("div",{className:"message-header has-background-link"},r.a.createElement("p",null,"Detail Tindak Lanjut")),r.a.createElement("div",{className:"message-body has-background-light"},r.a.createElement(oe,{label:"Tanggal"},r.a.createElement("p",null,this.discussionTopic.action.date)),r.a.createElement(oe,{label:"Keterangan"},r.a.createElement("p",null,this.discussionTopic.action.description))))))}}]),a}(w),kt=Object(d.f)(Object(D.b)((function(e){return{loggedUser:e.userState.loggedUser,loginStatus:e.userState.loginStatus}}),(function(e){return{}}))(Ot)),jt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e,"Notulensi","notes")).loadRecords=function(){n.readInputForm();var e={page:n.page,limit:n.limit,orderBy:n.orderBy,orderType:n.orderType,fieldsFilter:n.fieldsFilter};n.commonAjax(n.meetingNoteService.list,e,n.successLoaded,n.errorLoaded)},n.state={},n.meetingNoteService=Fe.instance,n.deleteRecord=function(e){},n}return Object(s.a)(a,[{key:"createNavButton",value:function(){var e=null!=this.recordData?this.recordData:null;return null==e?r.a.createElement(r.a.Fragment,null):r.a.createElement(Ne,{onClick:this.loadRecordByPage,limit:this.limit,totalData:e.count,activeIndex:this.page})}},{key:"componentDidMount",value:function(){this.validateLoginStatus()&&(this.loadRecords(),document.title="Daftar Notulensi")}},{key:"componentDidUpdate",value:function(){(0==this.props.loginStatus||this.isLoggedUserNull())&&this.backToLogin()}},{key:"render",value:function(){var e=this;if(null==this.props.loggedUser)return null;var t=this.createNavButton(),a=null!=this.recordData?this.recordData:null,n=null==a||null==a.result_list?[]:a.result_list;return r.a.createElement("div",null,r.a.createElement(C,null,"Daftar Notulensi"),r.a.createElement(B,{title:"Daftar Notulensi"},r.a.createElement(wt,{to:"meetingnote/create"},"Tambah Notulensi"),r.a.createElement("form",{id:"list-form",onSubmit:function(t){t.preventDefault(),e.filter(t.target)}},r.a.createElement(Oe,{cells:[re(),t]}),r.a.createElement("div",{style:{overflow:"scroll"}},r.a.createElement("table",{style:{},className:"table"},r.a.createElement(ae,{onButtonOrderClick:this.onButtonOrderClick,headers:[{text:"No"},{text:"id",alias:"Id",withFilter:!0},{text:"date",alias:"Tanggal",withFilter:!0},{text:"place",alias:"Tempat",withFilter:!0},{text:"departement",alias:"Bidang",withFilter:!0},{text:"user",alias:"Notulis",withFilter:!0},{text:"discussion_topics_count",alias:"Topik",withFilter:!0},{text:"discussion_topics_closed_count",alias:"closed",withFilter:!0},{text:"action"}]}),r.a.createElement("tbody",null,n.map((function(t,a){var n=(e.page-1)*e.limit,i=Date.parse(t.deadline_date),l={};try{var o=vt(new Date(i));0==t.is_closed&&o<=3&&o>0?l.backgroundColor="orange":0==t.is_closed&&o<0&&(l.backgroundColor="red")}catch(s){}return r.a.createElement("tr",{key:"record-meeting-note-"+a,style:l},r.a.createElement("td",null,n+a+1),r.a.createElement("td",null,t.id),r.a.createElement("td",null,t.date),r.a.createElement("td",null,t.place),r.a.createElement("td",null,t.departement?t.departement.name:"-"),r.a.createElement("td",null,t.user?t.user.name:"-"),r.a.createElement("td",null,t.discussion_topics_count),r.a.createElement("td",null,t.discussion_topics_closed_count),r.a.createElement("td",null,r.a.createElement(Ct,{id:t.id})))}))))))))}}]),a}(De),wt=function(e){return r.a.createElement(j.b,{to:e.to,className:"button is-primary",style:{marginBottom:"10px"}},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-plus"})),r.a.createElement("span",null,e.children))},Ct=function(e){return r.a.createElement(j.b,{to:"/meetingnote/"+e.id,className:"button is-small"},r.a.createElement("i",{className:"fas fa-edit"}))},It=Object(d.f)(Object(D.b)((function(e){return{loggedUser:e.userState.loggedUser,loginStatus:e.userState.loginStatus}}),(function(e){return{}}))(jt)),Tt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e,"Topik Pembahasan","discussiontopic")).loadRecords=function(){n.readInputForm();var e={page:n.page,limit:n.limit,orderBy:n.orderBy,orderType:n.orderType,fieldsFilter:n.fieldsFilter};n.commonAjax(n.discussionTopicService.list,e,n.successLoaded,n.errorLoaded)},n.state={},n.discussionTopicService=Ae.instance,n.deleteRecord=function(e){},n}return Object(s.a)(a,[{key:"createNavButton",value:function(){var e=null!=this.recordData?this.recordData:null;return null==e?r.a.createElement(r.a.Fragment,null):r.a.createElement(Ne,{onClick:this.loadRecordByPage,limit:this.limit,totalData:e.count,activeIndex:this.page})}},{key:"componentDidMount",value:function(){this.validateLoginStatus()&&(this.loadRecords(),document.title="Daftar Topik")}},{key:"componentDidUpdate",value:function(){(0==this.props.loginStatus||this.isLoggedUserNull())&&this.backToLogin()}},{key:"render",value:function(){var e=this;if(null==this.props.loggedUser)return null;var t=this.createNavButton(),a=null!=this.recordData?this.recordData:null,n=null==a||null==a.result_list?[]:a.result_list;return r.a.createElement("div",null,r.a.createElement(C,null,"Daftar Topik"),r.a.createElement(B,{title:"Daftar Topik"},r.a.createElement(wt,{to:"meetingnote/create"},"Tambah Notulensi"),r.a.createElement("form",{id:"list-form",onSubmit:function(t){t.preventDefault(),e.filter(t.target)}},r.a.createElement(Oe,{cells:[re(),t]}),r.a.createElement("div",{style:{overflow:"scroll"}},r.a.createElement("table",{className:"table"},r.a.createElement(ae,{onButtonOrderClick:this.onButtonOrderClick,headers:[{text:"No"},{text:"content",alias:"Topik",withFilter:!0},{text:"person_in_charge",alias:"PIC",withFilter:!0},{text:"deadline_date",alias:"Deadline",withFilter:!0},{text:"is_closed",alias:"Status",withFilter:!0},{text:"attachment"},{text:"action"},{text:"opsi"}]}),r.a.createElement("tbody",null,n.map((function(t,a){var n=(e.page-1)*e.limit,i=Date.parse(t.deadline_date),l={};try{var o=vt(new Date(i));0==t.is_closed&&o<=3&&o>0?l.backgroundColor="orange":0==t.is_closed&&o<0&&(l.backgroundColor="red")}catch(s){}return r.a.createElement("tr",{key:"record_"+a,style:l},r.a.createElement("td",null,n+a+1),r.a.createElement("td",null,t.content&&t.content.length>10?t.content.substring(0,10)+"...":t.content),r.a.createElement("td",null,t.person_in_charge),r.a.createElement("td",null,t.deadline_date),r.a.createElement("td",null,1==t.is_closed?r.a.createElement("span",{className:"tag is-info"},"Closed"):r.a.createElement("span",{className:"tag is-warning"},"Not Closed")),r.a.createElement("td",null,t.attachment?r.a.createElement(q,{to:"upload/topic/"+t.attachment}):null),r.a.createElement("td",null,r.a.createElement(xt,{id:t.id})),r.a.createElement("td",null,r.a.createElement(j.b,{to:"/meetingnote/"+t.note_id,className:"button is-light is-small"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-clipboard"})),r.a.createElement("span",null,"Notulensi"))))}))))))))}}]),a}(De),xt=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(j.b,{to:"/discussiontopics/"+e.id,className:"button is-small"},r.a.createElement("i",{className:"fas fa-edit"})),r.a.createElement(j.b,{to:"/discussiontopics/"+e.id+"/action",className:"button is-primary is-small"},r.a.createElement("i",{className:"fas fa-location-arrow"})))},Rt=Object(d.f)(Object(D.b)((function(e){return{loggedUser:e.userState.loggedUser,loginStatus:e.userState.loginStatus}}),(function(e){return{}}))(Tt)),_t=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){return Object(o.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"componentDidMount",value:function(){document.title="Not Found"}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("article",{class:"message is-warning"},r.a.createElement("div",{class:"message-header"},r.a.createElement("p",null,"404 Not Found"),r.a.createElement("button",{class:"delete","aria-label":"delete"})),r.a.createElement("div",{class:"message-body"},"Halaman tidak ditemukan")))}}]),a}(n.Component),Lt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).canvas_id="captcha_canvas_"+(new Date).getTime(),n}return Object(s.a)(a,[{key:"getCaptchaText",value:function(){var e=this.props.captcha;return e.firstNumber+" "+e.operator+" "+e.secordNumber}},{key:"drawCanvas",value:function(){var e=document.getElementById(this.canvas_id),t=e.getContext("2d");t.clearRect(0,0,e.width,e.height),t.fillStyle="#000",t.font="70px Arial",t.fillText(this.getCaptchaText(),10,50)}},{key:"componentDidUpdate",value:function(){this.drawCanvas()}},{key:"componentDidMount",value:function(){this.drawCanvas()}},{key:"render",value:function(){this.props.captcha;return r.a.createElement("article",{style:{width:"100%"},className:"message "},r.a.createElement("div",{className:"message-header has-background-grey-lighter"},r.a.createElement("p",{className:"has-text-dark"},"Captcha"),r.a.createElement("a",{onClick:this.props.reset,className:"button"},r.a.createElement("i",{className:"fas fa-sync"}))),r.a.createElement("div",{className:"message-body has-background-light"},r.a.createElement("canvas",{id:this.canvas_id,className:"has-background-light",style:{width:"100px",height:"auto"}}),r.a.createElement("input",{className:"input",name:"captcha_result",required:!0})))}}]),a}(n.Component),Ft=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e,!1)).state=Object(k.a)(Object(k.a)({},n.state),{},{captchaUpdate:new Date,recordSave:!1}),n.issueService=ct.instance,n.departementList=[],n.attachmentData=null,n.captcha={firstNumber:1,secordNumber:2,operator:"+",updatedAt:new Date},n.updateAttachmentData=function(e){var t=Object(c.a)(n);Ue(e.target).then((function(e){t.attachmentData=e})).catch(console.error)},n.resetCaptcha=function(){n.captcha.firstNumber=Math.floor(10*Math.random())+1,n.captcha.secordNumber=Math.floor(10*Math.random())+1,n.captcha.operator=n.captcha.firstNumber%2==0?"+":"-",n.captcha.updatedAt=new Date,n.setState({captchaUpdate:n.captcha.updatedAt})},n.validateCaptcha=function(e){var t=n.captcha.firstNumber,a=n.captcha.secordNumber;return"+"==n.captcha.operator?t+a==e:"-"==n.captcha.operator&&t-a==e},n.onSubmit=function(e){e.preventDefault();var t=e.target,a=document.getElementsByName("captcha_result")[0].value,r=n.validateCaptcha(a),i=Object(c.a)(n);r?n.showConfirmation("Submit Data?").then((function(e){e&&i.fillDataAndStore(t)})):n.showError("Invalid Captcha")},n.fillDataAndStore=function(e){for(var t={},a=e.getElementsByClassName("input-form-field"),r=0;r<a.length;r++){var i=a[r];"attachment"==i.name?t[i.name+"_info"]=n.attachmentData:t[i.name]=i.value}console.debug("Issue: ",t),n.storeIssue(t)},n.departementListLoaded=function(e){n.departementList=e.result_list,n.props.storeApplicationData("departements",n.departementList)},n.departementListNotLoaded=function(e){var t=Object(c.a)(n);n.showConfirmationDanger("Error loading data.. please try or reload the page").then((function(e){e&&t.loadDepartements()}))},n.recordSaved=function(e){n.resetCaptcha(),n.setState({recordSaved:!0}),n.attachmentData=null},n.recordFailedToSave=function(e){n.showError("Gagal menyimpan aduan: "+e+" Silakan muat ulang halaman dan coba lagi")},n.loadDepartements=function(){var e=n.props.applicationData;null==e.departements||0==e.departements.length?n.commonAjax(n.issueService.departementList,{},n.departementListLoaded,n.departementListNotLoaded):(n.departementList=e.departements,n.refresh())},n.storeIssue=function(e){n.commonAjax(n.issueService.storePublicIssue,e,n.recordSaved,n.recordFailedToSave)},n.showForm=function(){n.setState({recordSaved:!1})},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){document.title="Aduan Publik",this.loadDepartements(),this.resetCaptcha()}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this.title("Form Aduan Publik");return 1==this.state.recordSaved?r.a.createElement("div",null,e,r.a.createElement("div",{className:"box has-text-success",style:{textAlign:"center",margin:"10px"}},r.a.createElement("span",{className:"icon",style:{fontSize:"4em",marginTop:"30px"}},r.a.createElement("i",{className:"fas fa-check"})),r.a.createElement("h2",null,"Terimakasih. Aduan Anda berhasil disimpan!"),r.a.createElement(M,{iconClassName:"fas fa-angle-right",onClick:this.showForm},"Kirim Tanggapan Lain"))):r.a.createElement("div",null,e,r.a.createElement(B,{title:"Form"},r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement(ie,{name:"date",label:"tanggal",type:"date",required:!0}),r.a.createElement(ie,{name:"place",label:"tempat",required:!0}),r.a.createElement(ie,{name:"content",label:"permasalahan",type:"textarea",required:!0}),r.a.createElement(ie,{name:"email",type:"email",note:"Kosongkan jika berstatus anonim"}),r.a.createElement(le,{label:"pengadu",options:dt.map((function(e){return{value:e,text:e}})),name:"issuer",required:!0}),r.a.createElement(le,{label:"bidang",options:this.departementList.map((function(e){return{value:e.id,text:e.name}})),name:"departement_id",required:!0}),r.a.createElement(ie,{name:"attachment",attributes:{accept:"image/*",onChange:this.updateAttachmentData},type:"file",note:"Kosongkan jika tidak ada dokumen"}),r.a.createElement(oe,{label:"Verifikasi"},r.a.createElement(Lt,{reset:this.resetCaptcha,captcha:this.captcha})),r.a.createElement(se,null))))}}]),a}(w),At=Object(d.f)(Object(D.b)(I,(function(e){return{storeApplicationData:function(t,a){return e(S(t,a))}}}))(Ft)),Ut=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){return Object(o.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"content"},r.a.createElement("div",{style:{height:"20px"}}),r.a.createElement(d.c,null,r.a.createElement(d.a,{exact:!0,path:"/",render:function(e){return r.a.createElement(Bt,null)}}),r.a.createElement(d.a,{path:"/home",render:function(e){return r.a.createElement(Bt,null)}}),r.a.createElement(d.a,{path:"/dashboard",render:function(t){return r.a.createElement(pe,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/meetingnote/create",render:function(t){return r.a.createElement(it,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/meetingnote",render:function(t){return r.a.createElement(It,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/meetingnote/:id",render:function(t){return r.a.createElement(it,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/issues",render:function(t){return r.a.createElement(mt,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/issues/create",render:function(t){return r.a.createElement(ft,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/issues/:id",render:function(t){return r.a.createElement(ft,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/issues-public",render:function(t){return r.a.createElement(At,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/issues/:id/followup",render:function(t){return r.a.createElement(Nt,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/discussiontopics",render:function(t){return r.a.createElement(Rt,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/discussiontopics/:id",render:function(t){return r.a.createElement(Dt,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/discussiontopics/:id/action",render:function(t){return r.a.createElement(kt,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/management",render:function(t){return r.a.createElement(ge,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/management/users",render:function(t){return r.a.createElement(we,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/management/users/create",render:function(t){return r.a.createElement(Re,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/management/users/:id",render:function(t){return r.a.createElement(Re,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/management/departements",render:function(t){return r.a.createElement(Te,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/management/departements/create",render:function(t){return r.a.createElement(Le,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/management/departements/:id",render:function(t){return r.a.createElement(Le,{app:e.props.app})}}),r.a.createElement(d.a,{path:"/login",render:function(t){return r.a.createElement(U,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/profile",render:function(t){return r.a.createElement(st,{app:e.props.app})}}),r.a.createElement(d.a,{path:"",component:_t})))}}]),a}(n.Component),Bt=function(e){return document.title="Home",r.a.createElement("div",{className:"has-text-centered"},r.a.createElement("img",{src:"kiis-stroke.png",width:"200"}),r.a.createElement("h2",null,"Kafila Console"))},Pt=Object(d.f)(Object(D.b)((function(e){return{loginStatus:e.userState.loginStatus,loggedUser:e.userState.loggedUser}}),(function(e){return{}}))(Ut)),Mt=(a(76),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={opacity:1,show:!0},n}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){return 0==this.props.show?null:r.a.createElement("div",{style:{position:"fixed",zIndex:1e4,color:"#ccc"}},r.a.createElement("div",{className:"columns",style:{width:"min-content"}},r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"lds-ring"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))),r.a.createElement("div",{className:"column"},r.a.createElement("span",{style:{fontSize:"2em"}},"Loading"))))}}]),a}(n.Component)),qt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){return Object(o.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("aside",{className:"menu"},x.map((function(t,a){var n=e.extractChildren(t.children);if(null==n||0==n.length)return null;var i=e.isMenuListShown(t.name),l=i?"fas fa-angle-up":"fas fa-angle-down";return r.a.createElement(r.a.Fragment,{key:"menu_"+t.name},r.a.createElement("p",{key:t.name,"menu-name":t.name,onClick:e.toggleMenuList,className:"menu-label"},r.a.createElement("i",{style:{marginRight:"10px"},className:l}),t.name),i?r.a.createElement("ul",{className:"menu-list"},n.map((function(e,t){return r.a.createElement("li",{key:"sidebar-menu-child-"+a+"-"+t},r.a.createElement(j.b,{to:e.link},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:e.iconClassName?e.iconClassName:"fas fa-folder"})),r.a.createElement("span",null,e.name)))}))):null)}))))}}]),a}(T),Gt=Object(d.f)(Object(D.b)((function(e){return{loginStatus:e.userState.loginStatus,loggedUser:e.userState.loggedUser}}),(function(e){return{}}))(qt)),Kt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={menus:[],menuCode:"",loading:!1,loadingPercentage:0,requestId:null,mainAppUpdated:new Date,showAlert:!1},n.alertTitle=null,n.alertBody=null,n.alertIsYesOnly=!0,n.alertIsError=!1,n.alertOnYesCallback=null,n.alertOnCancelCallback=null,n.loadings=0,n.setMenuCode=function(e){n.setState({menuCode:e})},n.refresh=function(){n.setState({mainAppUpdated:new Date})},n.incrementLoadings=function(){this.loadings++},n.decrementLoadings=function(){this.loadings--,this.loadings<0&&(this.loadings=0)},n.requestAppId=function(){n.props.requestAppId(Object(c.a)(n))},n.startLoading=function(e){n.incrementLoadings(),n.setState({loading:!0,realtime:e})},n.endLoading=function(){console.log("END LOADING"),n.decrementLoadings(),0==n.loadings&&n.setState({loading:!1,loadingPercentage:0})},n.showAlertError=function(e,t,a,r,i){n.alertIsError=!0,n.showAlert(e,t,a,r,i)},n.showAlert=function(e,t,a,r,i){n.alertTitle=e,n.alertBody=t,n.alertIsYesOnly=a;var l=Object(c.a)(n);n.alertOnYesCallback=function(e){l.dismissAlert(),r(e)},a||(n.alertOnCancelCallback=function(e){l.dismissAlert(),null!=i&&i(e)}),n.setState({showAlert:!0})},n.dismissAlert=function(){n.alertIsError=!1,n.setState({showAlert:!1})},n.routedContent=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.c,null,r.a.createElement(d.a,{path:"/home",render:function(e){return r.a.createElement("h2",null,"HOME")}}),r.a.createElement(d.a,{path:"/login",render:function(e){return r.a.createElement("h2",null,"Login")}})))},n}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(){this.props.requestId!=this.state.requestId&&this.setState({requestId:this.props.requestId})}},{key:"componentDidMount",value:function(){this.requestAppId(),this.setState({loadingPercentage:0})}},{key:"setMenus",value:function(){for(var e=this.props.menus?this.props.menus:[],t=new Array,a=0;a<e.length;a++){var n=e[a],r=1!=this.props.loginStatus&&1==n.authenticated,i=!this.state.enableShopping&&"cart"==n.code;r||(i||t.push(n))}return t}},{key:"render",value:function(){return this.props.requestId?r.a.createElement("div",{className:"App"},this.state.showAlert?r.a.createElement(Me,{isError:this.alertIsError,yesOnly:this.alertIsYesOnly,title:this.alertTitle,onYes:this.alertOnYesCallback,onNo:this.alertOnCancelCallback},this.alertBody):null,r.a.createElement(L,{app:this}),r.a.createElement("section",{style:{minHeight:"70vh"}},r.a.createElement("div",null,r.a.createElement(Mt,{show:this.state.loading})),r.a.createElement("div",{className:"columns",style:{minHeight:"70vh",marginBottom:"1px"}},r.a.createElement("div",{style:{paddingTop:"20px",paddingLeft:"20px",borderRight:"solid 2px #ccc"},className:"menu-container column is-one-fifth has-background-water-ter"},r.a.createElement(Gt,{app:this})),r.a.createElement("div",{className:"column is-four-fifths"},r.a.createElement(Pt,{app:this})))),r.a.createElement(O,null)):r.a.createElement(Mt,{show:!0})}}]),a}(n.Component),Wt=Object(d.f)(Object(D.b)((function(e){return{loginStatus:e.userState.loginStatus,requestId:e.userState.requestId}}),(function(e){return{performLogout:function(t){return e(N(t))},requestAppId:function(t){return e(b(t))}}}))(Kt)),Vt=a(16),zt={loginKey:null,loginStatus:!1,loginFailed:!1,loggedUser:null,loginAttempt:!1,requestId:null,lastLoginAttempt:new Date,applicationProfile:{}},Yt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt,t=arguments.length>1?arguments[1]:void 0,a={};switch(t.type){case"req_ID":return a=Object(k.a)(Object(k.a)({},e),{},{requestId:t.payload.requestId,applicationProfile:t.payload.applicationProfile}),1!=t.payload.loginStatus?(a.loginStatus=!1,a.loggedUser=null):t.payload.user?(a.loggedUser=t.payload.user,a.loginStatus=!0,J(a.loggedUser.api_token)):(a.loginStatus=!1,a.loggedUser=null),a;case"do_login":return console.debug("DO_LOGIN"),t.payload.loginStatus?(console.debug("DO_LOGIN true ",new Date),console.debug("APITOKEN: ",t.payload.loginKey),J(t.payload.loginKey),a=Object(k.a)(Object(k.a)({},e),{},{lastLoginAttempt:new Date,loginAttempt:!0,loginStatus:!0,loginKey:t.payload.loginKey,loginFailed:!1,loggedUser:t.payload.loggedUser})):Object(k.a)(Object(k.a)({},e),{},{lastLoginAttempt:new Date,loginFailed:!0});case"do_logout":return a=Object(k.a)(Object(k.a)({},e),{},{loginStatus:!1,loggedUser:null});default:return Object(k.a)({},e)}},Jt={applicationData:{}},Ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt,t=arguments.length>1?arguments[1]:void 0,a=e;switch(t.type){case"store-app-data":var n=t.payload.key,r=t.payload.data;return a.applicationData[n]=r,a;case"remove-app-data":return delete a[t.payload.key],a;default:return Object(k.a)({},e)}},Qt=Object(Vt.c)({userState:Yt,applicationState:Ht}),Xt={userState:zt,applicationState:Jt},$t=a(31),Zt=function(e){return function(t){return function(a){if(!a.meta||"do_login"!==a.meta.type)return t(a);var n=a.meta.app;$t.post(a.meta.url,a.payload,{headers:z()}).then((function(t){var n=t.data,r=n.user.api_token,i=Object.assign({},a,{payload:{loginStatus:!0,loginKey:r,loggedUser:n.user}});delete i.meta,e.dispatch(i)})).catch((function(t){var n=Object.assign({},a,{payload:{loginStatus:!1}});delete n.meta,e.dispatch(n)})).finally((function(e){n.endLoading()}))}}},ea=function(e){return function(t){return function(a){if(!a.meta||"req_ID"!==a.meta.type)return t(a);var n=z();$t.post(a.meta.url,a.payload,{headers:n}).then((function(t){var n=t.data,r="",i=n.message;n.user&&(r=n.user.api_token);var l=Object.assign({},a,{payload:Object(k.a)({loginStatus:!0,loginKey:r,requestId:i},n)});delete l.meta,e.dispatch(l)})).catch((function(t){console.error("ERROR Get User, will get requestId");var n=h().concat("api/account/requestid");$t.get(n).then((function(t){var n=t.data,r=n.message,i=Object.assign({},a,{payload:Object(k.a)({loginStatus:!1,loginKey:null,requestId:r},n)});delete i.meta,e.dispatch(i)})).catch((function(e){alert("Error requesting application: "+e+". Try to reload the page")}))})).finally((function(e){return a.meta.app.endLoading()}))}}},ta=function(e){return function(t){return function(a){if(!a.meta||"do_logout"!==a.meta.type)return t(a);var n=a.meta.app;$t.post(a.meta.url,a.payload,{headers:z()}).then((function(t){var n=!1;"00"==t.data.code?n=!0:alert("Logout Failed");var r=Object.assign({},a,{payload:{loginStatus:!n}});delete r.meta,e.dispatch(r)})).catch((function(e){console.log(e)})).finally((function(e){return n.endLoading()}))}}},aa=function(e){return function(t){return function(a){if(!a.meta||"store-app-data"!==a.meta.type)return t(a);var n=Object.assign({},a,{payload:a.payload});delete n.meta,e.dispatch(n)}}},na=function(){return Object(Vt.d)(Qt,Xt,Object(Vt.a)(Zt,ta,ea,aa))},ra=function(e){var t=na();return r.a.createElement(D.a,{store:t},r.a.createElement(j.a,null,r.a.createElement(Wt,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(ra,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[44,1,2]]]);
//# sourceMappingURL=main.bd44f843.chunk.js.map