(this["webpackJsonpkafila-console-meeting-note"]=this["webpackJsonpkafila-console-meeting-note"]||[]).push([[0],{42:function(e,t,a){e.exports=a(75)},47:function(e,t,a){},48:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},55:function(e,t,a){},56:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(20),o=a.n(l),i=(a(47),a(1)),s=a(2),c=a(8),u=a(4),m=a(3),d=(a(48),a(9)),p="${contextPath}"==document.getElementById("rootPath").value||""==document.getElementById("rootPath").value,f=p?"/":document.getElementById("rootPath").value+"/",g=function(){var e=p?"http://localhost:8000".concat(f):f;return e},h=(g(),g(),g()),E=h+"api/account/",v=h+"api/accountdashboard/",b=h+"api/notes/",y=function(e){return e.startLoading(),{type:"req_ID",payload:{},meta:{app:e,type:"req_ID",url:v.concat("user")}}},N=function(e){return e.startLoading(),{type:"do_logout",payload:{},meta:{app:e,type:"do_logout",url:v.concat("logout")}}},S=function(e,t,a){return a.startLoading(),{type:"do_login",payload:{user:{email:e,password:t}},meta:{type:"do_login",url:E.concat("login"),app:a}}},O=function(e,t){t.startLoading();var a=e.fieldsFilter;return console.debug("request.fieldsFilter: ",a),{type:"GET_MEETING_NOTES",payload:{filter:{limit:e.limit,page:e.page,fieldsFilter:a,orderBy:e.orderBy,orderType:e.orderType}},meta:{type:"GET_MEETING_NOTES",url:b.concat("list"),app:t}}},D=a(7),j=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("footer",{className:"footer has-background-dark"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"content has-text-centered"},r.a.createElement("div",{className:"columns is-mobile is-centered"},r.a.createElement("div",{className:"field is-grouped is-grouped-multiline"},r.a.createElement("div",{className:"control"},r.a.createElement("div",{className:"tags has-addons"},r.a.createElement("a",{className:"tag is-link",href:"https://kafila.sch.id"},"Kafila International Islamic School"),r.a.createElement("span",{className:"tag is-light"},"\xa9 Kafila Console 2020"))))))))}}]),a}(n.Component),k=a(5),w=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Object(i.a)(this,a),(n=t.call(this,e)).parentApp=e.app,n.authenticated=r,n.validateLoginStatus=function(){r&&(1==n.props.loginStatus&&null!=n.props.loggedUser||n.backToLogin())},n.getParentApp=function(){return n.props.app},n.showConfirmation=function(e){return new Promise((function(t,a){n.parentApp.showAlert("Confirmation",e,!1,(function(e){t(!0)}),(function(e){t(!1)}))}))},n.showInfo=function(e){n.parentApp.showAlert("Info",e,!0,(function(){}))},n.showError=function(e){n.parentApp.showAlertError("Error",e,!0,(function(){}))},n.backToLogin=function(){r&&n.props.history.push("/login")},n.startLoading=function(e){n.parentApp.startLoading(e)},n.endLoading=function(){n.parentApp.endLoading()},n.doAjax=function(e,t,a,r,l){if(e){n.startLoading(a);var o=Object(c.a)(n);e(t).then((function(e){r&&r(e)})).catch((function(e){l?l(e):("string"==typeof e&&o.showInfo("Operation Failed: "+e),o.showInfo("resource not found"))})).finally((function(e){n.endLoading()}))}else console.warn("Method Not Found! ")},n.commonAjax=function(e,t,a,r){n.doAjax(e,t,!1,a,r)},n.commonAjaxWithProgress=function(e,t,a,r){n.doAjax(e,t,!0,a,r)},n}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(){null==this.props.loggedUser&&this.backToLogin()}}]),a}(n.Component),I=[{name:"Home",link:"/home"},{name:"Dashboard",link:"/dashboard",authenticated:!0},{name:"Tambah Notulensi",link:"/meetingnote/create",authenticated:!0},{},{name:"Daftar Aduan",link:"/issues",authenticated:!0},{name:"Management",link:"/management",authenticated:!0,role:"admin"}],R=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e,!1)).state={showBurger:!1},n.toggleNavBurger=function(){n.setState({showBurger:!n.state.showBurger})},n.performLogout=function(){var e=n.props;n.showConfirmation("Apakah Anda ingin keluar?").then((function(t){t&&e.performLogout(e.app)}))},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("nav",{className:"navbar is-dark topNav"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"navbar-brand"},r.a.createElement(k.b,{style:{backgroundColor:"#fff"},className:"navbar-item",to:"/"},r.a.createElement("img",{src:"kiis-stroke.png",width:"38",height:"38"})),r.a.createElement("div",{onClick:this.toggleNavBurger,className:"navbar-burger burger"},r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null))),r.a.createElement("div",{id:"topNav",className:this.state.showBurger?"is-active navbar-menu":" navbar-menu"},r.a.createElement("div",{className:"navbar-start"},I.map((function(t,a){return r.a.createElement(x,{key:"header-link-"+a,loginStatus:e.props.loginStatus,loggedUser:e.props.loggedUser,linkProperty:t})}))),r.a.createElement("div",{className:"navbar-end"},r.a.createElement("div",{className:"navbar-item"},r.a.createElement("div",{className:"buttons has-addons"},this.props.loginStatus?r.a.createElement(r.a.Fragment,null,r.a.createElement(k.b,{className:"button is-info",to:"/profile"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-user"})),r.a.createElement("span",null,this.props.loggedUser.display_name," - ",this.props.loggedUser.role)),r.a.createElement("a",{onClick:this.performLogout,className:"button is-danger"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-sign-out-alt"})),r.a.createElement("span",null,"Logout"))):r.a.createElement(k.b,{className:"button is-info",to:"/login"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-user"})),r.a.createElement("span",null,"Login"))))))))}}]),a}(w),x=function(e){var t=e.linkProperty,a=e.loginStatus,n=e.loggedUser;return null==t.link||!a&&t.authenticated||null!=t.role&&null!=n&&n.role!=t.role?null:r.a.createElement(k.b,{key:t.name+"LINK",className:"navbar-item",to:t.link},t.name)},C=Object(d.f)(Object(D.b)((function(e){return{loginStatus:e.userState.loginStatus,loggedUser:e.userState.loggedUser,menus:e.userState.menus,requestId:e.userState.requestId,applicationProfile:e.userState.applicationProfile}}),(function(e){return{performLogout:function(t){return e(N(t))}}}))(R)),A=(a(55),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={show:!0},n.hide=function(){n.setState({show:!1})},n.show=function(){n.setState({show:!0})},n}return Object(s.a)(a,[{key:"render",value:function(){if(0==this.state.show)return null;var e=this.props.className?"message "+this.props.className:"message is-info";return r.a.createElement("article",{style:{marginBottom:"10px"},id:"my-message",className:e},r.a.createElement("div",{className:"message-header"},r.a.createElement("p",null,this.props.header?this.props.header:"Info"),r.a.createElement("button",{onClick:this.hide,className:"delete","aria-label":"delete"})),r.a.createElement("div",{className:"message-body"},this.props.body))}}]),a}(n.Component)),F=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).child=r.a.createRef(),n.lastLoginAttempt=new Date,n.state={},n.validateLoginStatus=function(){1==n.props.loginStatus&&n.props.history.push("/dashboard")},n.handleSubmit=function(e){e.preventDefault();var t=e.target,a=(new FormData(e.target),t.elements[0]),r=t.elements[1];n.props.performLogin(a.value,r.value,n.props.app)},n.showLoginInfo=function(){n.props.loginFailed&&n.lastLoginAttempt!=n.props.lastLoginAttempt&&(n.child.current.show(),n.lastLoginAttempt=n.props.lastLoginAttempt)},n}return Object(s.a)(a,[{key:"componentWillMount",value:function(){this.validateLoginStatus()}},{key:"componentDidUpdate",value:function(){this.validateLoginStatus(),this.showLoginInfo()}},{key:"componentDidMount",value:function(){document.title="Login"}},{key:"render",value:function(){return r.a.createElement("div",null,this.props.loginFailed?r.a.createElement(A,{ref:this.child,className:"is-danger",body:"Login Failed"}):null,r.a.createElement("div",{className:"columns is-centered"},r.a.createElement("div",{style:{marginTop:"10px",marginBottom:"10px"},className:"column is-5-tablet is-4-desktop is-3-widescreen"},r.a.createElement("form",{id:"formLogin",onSubmit:this.handleSubmit,className:"box"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Email"),r.a.createElement("div",{className:"control has-icons-left"},r.a.createElement("input",{nam:"email",type:"email",placeholder:"e.g. bobsmith@gmail.com",className:"input",required:!0}),r.a.createElement("span",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fa fa-envelope"})))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Password"),r.a.createElement("div",{className:"control has-icons-left"},r.a.createElement("input",{name:"password",type:"password",placeholder:"*******",className:"input",required:!0}),r.a.createElement("span",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fa fa-lock"})))),r.a.createElement("div",{className:"field"},r.a.createElement("button",{className:"button is-success"},"Login"))))))}}]),a}(n.Component),L=Object(d.f)(Object(D.b)((function(e){return{loginStatus:e.userState.loginStatus,lastLoginAttempt:e.userState.lastLoginAttempt,loginFailed:e.userState.loginFailed,requestId:e.userState.requestId}}),(function(e){return{performLogin:function(t,a,n){return e(S(t,a,n))}}}))(F));a(56);var B=function(e){var t=e.headers,a=e.onButtonOrderClick;return r.a.createElement("thead",null,r.a.createElement("tr",null,t.map((function(e,t){return r.a.createElement("th",{key:"TH_"+t},null==e.alias?function(e,t,a){try{return new String(e).split(t).join(a)}catch(n){return""}}(e.text.toUpperCase(),"_"," "):e.alias,e.withFilter?r.a.createElement("div",{className:"field has-addons"},r.a.createElement("div",{className:"control"},r.a.createElement(_,{type:"text",name:e.text})),r.a.createElement("div",{className:"control",style:{fontSize:"0.7em",backgroundColor:"#ccc"}},r.a.createElement("i",{sort:"asc",onClick:a,data:e.text,className:"fas fa-angle-up sort-button"}),r.a.createElement("i",{sort:"desc",onClick:a,data:e.text,className:"fas fa-angle-down sort-button"}))):null)}))))},_=function(e){var t=e.type?e.type:"text";return r.a.createElement("input",{className:"input form-filter",type:t,name:e.name,id:"input-form-"+e.name})},U=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"buttons has-addons"},r.a.createElement("button",{type:"submit",className:"button is-info"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-search"})),r.a.createElement("span",null,"Apply Filter")),r.a.createElement("button",{type:"reset",className:"button is-danger"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-sync"})),r.a.createElement("span",null,"Reset Filter"))))},T=function(e){var t="input input-form-field";return r.a.createElement("div",{className:"field is-horizontal"},r.a.createElement("div",{className:"field-label is-normal"},r.a.createElement("label",{className:"label"},e.label?e.label:"Input")),r.a.createElement("div",{className:"field-body"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},1==e.required?"textarea"==e.type?r.a.createElement("textarea",{required:!0,className:t+" textarea",id:"input-form-field-"+e.name,name:e.name}):r.a.createElement("input",{required:!0,type:e.type?e.type:"text",id:"input-form-field-"+e.name,name:e.name,className:t}):"textarea"==e.type?r.a.createElement("textarea",{className:t+" textarea",id:"input-form-field-"+e.name,name:e.name}):r.a.createElement("input",{type:e.type?e.type:"text",id:"input-form-field-"+e.name,name:e.name,className:t}),e.note?r.a.createElement("p",null,r.a.createElement("i",null,"Note: ",e.note)):null))))},M=function(e){var t=(null==e.options?[]:e.options).map((function(e,t){return r.a.createElement("option",{key:"select-option-"+t,value:e.value},e.text)}));return r.a.createElement("div",{className:"field is-horizontal"},r.a.createElement("div",{className:"field-label is-normal"},r.a.createElement("label",{className:"label"},e.label?e.label:"Select")),r.a.createElement("div",{className:"field-body"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},1==e.required?r.a.createElement("select",{required:!0,id:"input-form-field-"+e.name,name:e.name,className:"input input-form-field"},t):r.a.createElement("select",{id:"input-form-field-"+e.name,name:e.name,className:"input input-form-field"},t)))))},q=function(e){return r.a.createElement("div",{className:"field is-horizontal"},r.a.createElement("div",{className:"field-label is-normal"},r.a.createElement("label",{className:"label"},e.label?e.label:"Label")),r.a.createElement("div",{className:"field-body"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},e.children))))},P=function(e){var t=e.submitText?e.submitText:"Submit";return r.a.createElement("div",{className:"field is-horizontal"},r.a.createElement("div",{className:"field-label is-normal"}),r.a.createElement("div",{className:"field-body"},r.a.createElement("div",{className:"field"},r.a.createElement("button",{className:"button is-link",type:"submit"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-save"})),r.a.createElement("span",null,t)),1==e.withReset?r.a.createElement("button",{className:"button is-danger",type:"reset"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-sync"})),r.a.createElement("span",null,"Reset")):null)))},G=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).onClick=function(e){n.props.onClick&&n.props.onClick(e)},n}return Object(s.a)(a,[{key:"render",value:function(){for(var e=this,t=K(this.props.limit,this.props.totalData,this.props.activeIndex),a=[],n=0;n<t.length;n++){var l=t[n];a.push({index:l})}return r.a.createElement("div",{className:"buttons",style:{marginTop:"5px",marginBottom:"5px"}},a.map((function(t,a){var n=t.index==e.props.activeIndex?"button is-link":"button is-light";return r.a.createElement("a",{key:"nav_btn_"+a,onClick:function(){e.onClick(t.index)},className:n},t.index)})))}}]),a}(n.Component),K=function(e,t,a){var n=[],r=Math.ceil(t/e),l=a-2,o=a+2;r>1&&n.push(1);for(var i=l;i<=o;i++)i>1&&i<=r&&n.push(i);return o<r&&n.push(r),n},z=G,W=a(6),Y=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).saveButtonOnClick=function(e){n.props.saveButtonOnClick&&n.props.saveButtonOnClick(e)},n.editButtonOnClick=function(e){n.props.editButtonOnClick&&n.props.editButtonOnClick(e)},n.deleteButtonOnClick=function(e){n.props.deleteButtonOnClick&&n.props.deleteButtonOnClick(e)},n}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"card",style:Object(W.a)({margin:"10px"},this.props.style)},r.a.createElement("header",{className:"card-header"},r.a.createElement("p",{className:"card-header-title"},this.props.title?this.props.title:"Card Title"),r.a.createElement("a",{className:"card-header-icon","aria-label":"more options"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-angle-down","aria-hidden":"true"})))),r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"content"},this.props.children)),this.props.withButtonFooter?r.a.createElement("footer",{className:"card-footer"},r.a.createElement("a",{href:"#",onClick:this.saveButtonOnClick,className:"card-footer-item"},"Save"),r.a.createElement("a",{href:"#",onClick:this.editButtonOnClick,className:"card-footer-item"},"Edit"),r.a.createElement("a",{href:"#",onClick:this.deleteButtonOnClick,className:"card-footer-item"},"Delete")):null,this.props.footerContent?r.a.createElement("footer",{className:"card-footer"},this.props.footerContent):null)}}]),a}(n.Component),J=["January","February","March","April","May","June","July","August","September","October","November","December"],V=function(e){var t=e.split("-"),a=t[2],n=t[1],r=t[0];return a+" "+J[n-1]+" "+r},H=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={},n.page=1,n.limit=5,n.count=0,n.orderBy="id",n.orderType="asc",n.fieldsFilter={},n.getMeetingNotesByPage=function(e){n.page=e,n.getMeetingNotes()},n.getMeetingNotes=function(){n.readInputForm();var e={page:n.page,limit:n.limit,orderBy:n.orderBy,orderType:n.orderType,fieldsFilter:n.fieldsFilter};n.props.getMeetingNotes(e,n.props.app)},n.initialize=function(){var e=null!=n.props.meetingNoteData&&null!=n.props.meetingNoteData.filter,t=e?n.props.meetingNoteData.filter:null;n.page=e?t.page:1,n.limit=e?t.limit:5,n.count=e?t.count:0,n.orderBy=e?t.orderBy:null,n.orderType=e?t.orderType:null},n.readInputForm=function(){var e=document.getElementById("list-form");if(null!=e){var t=e.getElementsByClassName("form-filter");n.fieldsFilter={};for(var a=0;a<t.length;a++){var r=t[a];null!=r.value&&""!=r.value&&(n.fieldsFilter[r.name]=r.value)}}},n.filter=function(e){n.page=1,n.getMeetingNotes()},n.onButtonOrderClick=function(e){n.orderBy=e.target.getAttribute("data"),n.orderType=e.target.getAttribute("sort"),console.debug(e.target,"by ",n.orderBy,n.orderType),e.preventDefault(),n.getMeetingNotes()},n.onSubmitClick=function(e){e.preventDefault(),n.filter(document.getElementById("list-form"))},n.populateDefaultInputs=function(){if(null!=n.props.meetingNoteData&&null!=n.props.meetingNoteData.filter){var e=n.props.meetingNoteData.filter.fieldsFilter;for(var t in e)if(e.hasOwnProperty(t)){var a=e[t];try{document.getElementById("input-form-"+t).value=a}catch(r){}}}},n}return Object(s.a)(a,[{key:"componentWillMount",value:function(){this.validateLoginStatus(),this.initialize()}},{key:"componentDidMount",value:function(){null==this.props.meetingNoteData&&this.getMeetingNotes(),document.title="Dashboard",this.populateDefaultInputs()}},{key:"createNavButton",value:function(){return null==this.props.meetingNoteData?r.a.createElement(r.a.Fragment,null):r.a.createElement(z,{onClick:this.getMeetingNotesByPage,limit:this.limit,totalData:this.props.meetingNoteData.count,activeIndex:this.page})}},{key:"render",value:function(){var e=this;if(null==this.props.loggedUser)return null;var t=this.props.meetingNoteData,a=t&&t.result_list?t.result_list:[],n=this.createNavButton();return r.a.createElement("div",null,r.a.createElement("h2",{style:{textAlign:"center"}},"Dashboard"),r.a.createElement(Y,{title:this.props.loggedUser.display_name},r.a.createElement("p",null,"Bidang ",this.props.loggedUser.departement.name)),r.a.createElement(Y,{title:"Daftar Notulen Rapat"},n,r.a.createElement("form",{id:"list-form",onSubmit:function(t){t.preventDefault(),e.filter(t.target)}},U(),r.a.createElement("div",{style:{overflow:"scroll"}},r.a.createElement("table",{style:{},className:"table"},r.a.createElement($,{onButtonOrderClick:this.onButtonOrderClick,headers:[{text:"No"},{text:"id",alias:"Id",withFilter:!0},{text:"date",alias:"Tanggal",withFilter:!0},{text:"content",alias:"Pembahasan",withFilter:!0},{text:"decision",alias:"Keputusan",withFilter:!0},{text:"deadline_date",alias:"Deadline",withFilter:!0},{text:"departement",alias:"Bidang",withFilter:!0},{text:"user",alias:"Notulis",withFilter:!0},{text:"status"},{text:"action"}]}),r.a.createElement("tbody",null,a.map((function(t,a){var n=(e.page-1)*e.limit,l=Date.parse(t.deadline_date),o={};try{var i=(new Date(l).getTime()-(new Date).getTime())/864e5;0==t.is_closed&&i<=3&&i>0?o.backgroundColor="orange":0==t.is_closed&&i<0&&(o.backgroundColor="red")}catch(s){}return r.a.createElement("tr",{key:"record-meeting-note-"+a,style:o},r.a.createElement("td",null,n+a+1),r.a.createElement("td",null,t.id),r.a.createElement("td",null,t.date),r.a.createElement("td",null,t.content&&t.content.length>10?t.content.substring(0,10)+"...":t.content),r.a.createElement("td",null,t.decision&&t.decision.length>10?t.decision.substring(0,10)+"...":t.decision),r.a.createElement("td",null,t.deadline_date),r.a.createElement("td",null,t.departement.name),r.a.createElement("td",null,t.user.name),r.a.createElement("td",null,1==t.is_closed?r.a.createElement("span",{className:"tag is-info"},"Closed"):r.a.createElement("span",{className:"tag is-warning"},"Not Closed")),r.a.createElement("td",null,r.a.createElement(k.b,{to:"/meetingnote/"+t.id,className:"button is-small"},r.a.createElement("i",{className:"fas fa-edit"})),r.a.createElement(k.b,{to:"/meetingnote/"+t.id+"/action",className:"button is-primary is-small"},r.a.createElement("i",{className:"fas fa-location-arrow"}))))}))))))))}}]),a}(w),$=function(e){return B(e)},Q=Object(d.f)(Object(D.b)((function(e){return{loggedUser:e.userState.loggedUser,loginStatus:e.userState.loginStatus,meetingNoteData:e.meetingNoteState.meetingNoteData}}),(function(e){return{getMeetingNotes:function(t,a){return e(O(t,a))}}}))(H)),X=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){return Object(i.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(){0!=this.props.loginStatus&&null!=this.props.loggedUser&&"admin"==this.props.loggedUser.role||this.backToLogin()}}]),a}(w),Z=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){return Object(i.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"componentDidMount",value:function(){document.title="Management"}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",{style:{textAlign:"center"}},"Master Data Menu"),r.a.createElement(Y,{title:"Menu"},r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column is-one-third"},r.a.createElement("div",{className:"box has-text-centered"},r.a.createElement("p",null,r.a.createElement("i",{style:{fontSize:"50px"},className:"fas fa-puzzle-piece"})),r.a.createElement(k.b,{to:"/management/departements"},"Departements"))),r.a.createElement("div",{className:"column is-one-third"},r.a.createElement("div",{className:"box has-text-centered"},r.a.createElement("p",null,r.a.createElement("i",{style:{fontSize:"50px"},className:"fas fa-users"})),r.a.createElement(k.b,{to:"/management/users"},"Users"))))))}}]),a}(X),ee=Object(d.f)(Z),te=function(){var e=ae(),t={"Content-Type":"application/json"};return null!=e&&""!=e.toString().trim()&&(t.Authorization="Bearer "+e),t},ae=function(){return le("kafila_api_token")},ne=function(e){return console.log("setApiToken: ",e),re("kafila_api_token",e)},re=function(e,t,a){var n=new Date;n.setTime(n.getTime()+24*a*60*60*1e3);var r="expires="+n.toUTCString();document.cookie=e+"="+t+";"+r+";path=/"},le=function(e){for(var t=e+"=",a=decodeURIComponent(document.cookie).split(";"),n=0;n<a.length;n++){for(var r=a[n];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return""},oe=a(23),ie=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=null==t?{}:t;return new Promise((function(t,n){oe.post(e,a,{headers:te()}).then((function(e){return e.data})).then((function(e){"00"==e.code?t(e):n(e)})).catch((function(e){console.error(e),n(e)}))}))},se=function(){function e(){var t=this;Object(i.a)(this,e),this.setUsersData=function(e){t.usersData=e},this.storeUser=function(e){var t={code:"user",userModel:e},a=g().concat("api/masterdata/store");return ie(a,t)},this.storeIssue=function(e){var t={code:"issue",issue:e},a=g().concat("api/masterdata/store");return ie(a,t)},this.viewUser=function(e){var t=g().concat("api/masterdata/view/"+e);return ie(t,{code:"user"})},this.userList=function(e){return t.list({code:"user",filter:e})},this.viewIssue=function(e){var t=g().concat("api/masterdata/view/"+e);return ie(t,{code:"issue"})},this.issueList=function(e){return t.list({code:"issue",filter:e})},this.storeDepartement=function(e){var t={code:"departement",departement:e},a=g().concat("api/masterdata/store");return ie(a,t)},this.viewDepartement=function(e){var t=g().concat("api/masterdata/view/"+e);return ie(t,{code:"departement"})},this.deleteRecord=function(e){var t=g().concat("api/masterdata/delete/"+e.id);return ie(t,{code:e.code})},this.departementList=function(e){return t.list({code:"departement",filter:e})},this.list=function(e){var t={code:e.code,filter:e.filter},a=g().concat("api/masterdata/list");return ie(a,t)},this.usersData=null,this.departementsData=null}return Object(s.a)(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}}]),e}();se.instance=se.instance||new se;var ce=a(41),ue=a(15),me=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e,n,l){var o,s;return Object(i.a)(this,a),(s=t.call(this,e)).loadRecords=function(){},s.readInputForm=function(){var e=document.getElementById("list-form");if(null!=e){var t=e.getElementsByClassName("form-filter");s.fieldsFilter={};for(var a=0;a<t.length;a++){var n=t[a];null!=n.value&&""!=n.value&&(s.fieldsFilter[n.name]=n.value)}}},s.masterDataServce=se.instance,s.code=l,s.name=n,s.page=1,s.limit=5,s.count=0,s.orderBy="id",s.orderType="asc",s.fieldsFilter={},s.recordData=null,s.successLoaded=function(e){s.recordData=e},s.errorLoaded=function(e){console.error("Error loading resource: ",e)},s.getRecordDataStored=function(){return null},s.loadRecordByPage=function(e){Object(ce.a)((o=Object(c.a)(s),Object(ue.a)(a.prototype)),"page",e,o,!0),s.loadRecords()},s.onButtonOrderClick=function(e){e.preventDefault(),s.orderBy=e.target.getAttribute("data"),s.orderType=e.target.getAttribute("sort"),s.loadRecords()},s.filter=function(e){s.page=1,s.loadRecords()},s.delete=function(e){var t=Object(c.a)(s);s.showConfirmation("Delete "+s.name+"?").then((function(a){a&&t.deleteRecord(e)}))},s.onSuccessDelete=function(e){s.showConfirmation("Record has been deleted").then(s.loadRecords)},s.onErrorDelete=function(e){s.showError("Error Delete Record")},s.deleteRecord=function(e){s.commonAjax(s.masterDataServce.deleteRecord,{code:s.code,id:e},s.onSuccessDelete,s.onErrorDelete)},s.linkToFormCreate=function(e,t){return r.a.createElement(k.b,{to:e,className:"button is-primary",style:{marginBottom:"10px"}},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-plus"})),r.a.createElement("span",null,t))},s.linkToFormEdit=function(e){return r.a.createElement(k.b,{to:e,className:"button is-warning is-small"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-edit"})),r.a.createElement("span",null,"Edit"))},s.buttonsModifyAndDelete=function(e,t){return r.a.createElement("div",{className:"buttons has-addons"},s.linkToFormEdit(e),s.buttonDeleteRecord(t))},s.buttonDeleteRecord=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return r.a.createElement("a",{onClick:function(){return s.delete(e)},className:"button is-danger is-small"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-trash"})),t?r.a.createElement("span",null,"Delete"):null)},s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){document.title=this.name+" Management",this.loadRecords()}}]),a}(X),de=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.cells?this.props.cells:[];return r.a.createElement("div",{className:"columns"},e.map((function(e,t){return r.a.createElement("div",{key:"column-"+t,className:"column"},e)})))}}]),a}(n.Component),pe=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e,"User","user")).loadRecords=function(){n.readInputForm();var e={page:n.page,limit:n.limit,orderBy:n.orderBy,orderType:n.orderType,fieldsFilter:n.fieldsFilter};n.commonAjax(n.masterDataService.userList,e,n.successLoaded,n.errorLoaded)},n.state={showForm:!1},n.departementList=[],n.masterDataService=se.instance,n.populateDefaultInputs=function(){var e=null!=n.recordData?n.recordData:null;if(null!=e){var t=e.filter.fieldsFilter;for(var a in t)if(t.hasOwnProperty(a)){var r=t[a];try{document.getElementById("input-form-"+a).value=r}catch(l){}}}},n}return Object(s.a)(a,[{key:"createNavButton",value:function(){var e=null!=this.recordData?this.recordData:null;return null==e?r.a.createElement(r.a.Fragment,null):r.a.createElement(z,{onClick:this.loadRecordByPage,limit:this.limit,totalData:e.count,activeIndex:this.page})}},{key:"render",value:function(){var e=this,t=this.createNavButton(),a=null!=this.recordData?this.recordData:null,n=null==a||null==a.result_list?[]:a.result_list;return r.a.createElement("div",null,r.a.createElement("h2",{style:{textAlign:"center"}},"Users Management"),r.a.createElement(Y,{title:"Users"},this.linkToFormCreate("/management/users/create","Tambah Data"),r.a.createElement("form",{id:"list-form",onSubmit:function(t){t.preventDefault(),e.filter(t.target)}},r.a.createElement(de,{cells:[U(),t]}),r.a.createElement("div",{style:{overflow:"scroll"}},r.a.createElement("table",{className:"table"},r.a.createElement(fe,{onButtonOrderClick:this.onButtonOrderClick,headers:[{text:"No"},{text:"id",withFilter:!0},{text:"email",withFilter:!0},{text:"display_name",withFilter:!0},{text:"role",withFilter:!0},{text:"departement",withFilter:!0},{text:"action"}]}),r.a.createElement("tbody",null,n.map((function(t,a){var n=(e.page-1)*e.limit;return r.a.createElement("tr",{key:"record-user-"+a},r.a.createElement("td",null,n+a+1),r.a.createElement("td",null,t.id),r.a.createElement("td",null,t.email),r.a.createElement("td",null,t.display_name),r.a.createElement("td",null,t.role),r.a.createElement("td",null,t.departement?t.departement.name:"-"),r.a.createElement("td",null,e.buttonsModifyAndDelete("/management/users/"+t.id,t.id)))}))))))))}}]),a}(me),fe=function(e){return B(e)},ge=Object(d.f)(Object(D.b)((function(e){return{loggedUser:e.userState.loggedUser,loginStatus:e.userState.loginStatus}}))(pe)),he=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e,"Departement","departement")).loadRecords=function(){n.readInputForm();var e={page:n.page,limit:n.limit,orderBy:n.orderBy,orderType:n.orderType,fieldsFilter:n.fieldsFilter};n.commonAjax(n.masterDataService.departementList,e,n.successLoaded,n.errorLoaded)},n.state={},n.masterDataService=se.instance,n.populateDefaultInputs=function(){var e=null!=n.recordData?n.recordData:null;if(null!=e){var t=e.filter.fieldsFilter;for(var a in t)if(t.hasOwnProperty(a)){var r=t[a];try{document.getElementById("input-form-"+a).value=r}catch(l){}}}},n}return Object(s.a)(a,[{key:"createNavButton",value:function(){var e=null!=this.recordData?this.recordData:null;return null==e?r.a.createElement(r.a.Fragment,null):r.a.createElement(z,{onClick:this.loadRecordByPage,limit:this.limit,totalData:e.count,activeIndex:this.page})}},{key:"render",value:function(){var e=this,t=this.createNavButton(),a=null!=this.recordData?this.recordData:null,n=null==a||null==a.result_list?[]:a.result_list;return r.a.createElement("div",null,r.a.createElement("h2",{style:{textAlign:"center"}},"Departement Management"),r.a.createElement(Y,{title:"Departement"},this.linkToFormCreate("/management/departements/create","Tambah Data"),r.a.createElement("form",{id:"list-form",onSubmit:function(t){t.preventDefault(),e.filter(t.target)}},r.a.createElement(de,{cells:[U(),t]}),r.a.createElement("div",{style:{overflow:"scroll"}},r.a.createElement("table",{className:"table"},r.a.createElement(Ee,{onButtonOrderClick:this.onButtonOrderClick,headers:[{text:"No"},{text:"id",withFilter:!0},{text:"name",withFilter:!0},{text:"description",withFilter:!0},{text:"action"}]}),r.a.createElement("tbody",null,n.map((function(t,a){var n=(e.page-1)*e.limit;return r.a.createElement("tr",{key:"record_"+a},r.a.createElement("td",null,n+a+1),r.a.createElement("td",null,t.id),r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.description),r.a.createElement("td",null,e.buttonsModifyAndDelete("/management/departements/"+t.id,t.id)))}))))))))}}]),a}(me),Ee=function(e){return B(e)},ve=Object(d.f)(Object(D.b)((function(e){return{loggedUser:e.userState.loggedUser,loginStatus:e.userState.loginStatus}}))(he)),be=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={recordNotFound:!1,isLoadingRecord:!0,departementList:[]},n.masterDataService=se.instance,n.onSubmit=function(e){e.preventDefault();var t=e.target,a=Object(c.a)(n);n.showConfirmation("Save User?").then((function(e){e&&a.storeRecord(t)}))},n.storeRecord=function(e){for(var t=e.getElementsByClassName("input-form-field"),a={},r=0;r<t.length;r++){var l=t[r];if(null!=l.value&&""!=l.value){var o=l.name;"departement"==o&&(o="departement_id"),a[o]=l.value}}null!=n.getRecordId()&&(a.id=n.getRecordId()),n.store(a),console.debug("USER: ",a)},n.getRecordId=function(){return n.props.match.params.id},n.departementListLoaded=function(e){n.setState({departementList:e.result_list}),null!=n.getRecordId()&&n.loadRecord(),console.log("departementListLoaded: ",e)},n.recordSaved=function(e){n.showInfo("SUCCESS SAVING RECORD"),null==n.getRecordId()&&(n.handleSuccessGetRecord(e),n.props.history.push("/management/users/"+e.user.id))},n.recordFailedToSave=function(e){n.showError("FAILED SAVING RECORD")},n.store=function(e){n.commonAjax(n.masterDataService.storeUser,e,n.recordSaved,n.recordFailedToSave)},n.loadDepartements=function(){n.commonAjax(n.masterDataService.departementList,{},n.departementListLoaded,(function(e){}))},n.handleSuccessGetRecord=function(e){n.setState({isLoadingRecord:!1});for(var t=document.getElementById("form-management").getElementsByClassName("input-form-field"),a=0;a<t.length;a++){var r=t[a];"departement"==r.name?r.value=e.user.departement_id:"password"==r.name?r.value=null:r.value=e.user[r.name]}},n.handleErrorGetRecord=function(e){n.setState({recordNotFound:!0})},n.loadRecord=function(){n.commonAjax(n.masterDataService.viewUser,n.getRecordId(),n.handleSuccessGetRecord,n.handleErrorGetRecord)},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.loadDepartements(),document.title="User Form"}},{key:"render",value:function(){if(this.state.recordNotFound)return r.a.createElement(A,{className:"is-danger",body:"Record Not Found"});if(null!=this.getRecordId()&&this.state.isLoadingRecord)return r.a.createElement("div",null,r.a.createElement("h2",{style:{textAlign:"center"}},"Users Management"),r.a.createElement("h3",null,"Please Wait..."));var e=r.a.createElement(r.a.Fragment,null,r.a.createElement(k.b,{to:"/management/users"},"Users"),"\xa0",r.a.createElement("i",{className:"fas fa-angle-right"}),"\xa0Form");return r.a.createElement("div",null,r.a.createElement("h2",{style:{textAlign:"center"}},"Users Management"),r.a.createElement(Y,{title:e},r.a.createElement("form",{onSubmit:this.onSubmit,id:"form-management"},r.a.createElement(T,{label:"Email",name:"email",required:!0,type:"email"}),r.a.createElement(T,{label:"Username",name:"name",required:!0}),r.a.createElement(T,{label:"Display Name",name:"display_name",required:!0}),r.a.createElement(T,{label:"Password",name:"password",note:"Kosongkan password apabila tidak ingin diubah"}),r.a.createElement(M,{label:"Departement",options:this.state.departementList.map((function(e){return{value:e.id,text:e.name}})),name:"departement",required:!0}),r.a.createElement(P,{submitText:null==this.getRecordId()?"Create":"Update",withReset:null==this.getRecordId()}))))}}]),a}(w),ye=Object(d.f)(Object(D.b)((function(e){return{loggedUser:e.userState.loggedUser,loginStatus:e.userState.loginStatus}}))(be)),Ne=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={recordNotFound:!1,isLoadingRecord:!0},n.masterDataService=se.instance,n.onSubmit=function(e){e.preventDefault();var t=e.target,a=Object(c.a)(n);n.showConfirmation("Save Data?").then((function(e){e&&a.storeDepartement(t)}))},n.storeDepartement=function(e){for(var t=e.getElementsByClassName("input-form-field"),a={},r=0;r<t.length;r++){var l=t[r];if(null!=l.value&&""!=l.value)a[l.name]=l.value}null!=n.getRecordId()&&(a.id=n.getRecordId()),n.store(a),console.debug("Departement: ",a)},n.getRecordId=function(){return n.props.match.params.id},n.recordSaved=function(e){n.showInfo("SUCCESS SAVING RECORD"),null==n.getRecordId()&&(n.handleSuccessGetRecord(e),n.props.history.push("/management/departements/"+e.departement.id))},n.recordFailedToSave=function(e){n.showError("FAILED SAVING RECORD")},n.store=function(e){n.commonAjax(n.masterDataService.storeDepartement,e,n.recordSaved,n.recordFailedToSave)},n.handleSuccessGetRecord=function(e){n.setState({isLoadingRecord:!1});for(var t=document.getElementById("form-management").getElementsByClassName("input-form-field"),a=0;a<t.length;a++){var r=t[a];r.value=e.departement[r.name]}},n.handleErrorGetRecord=function(e){n.setState({recordNotFound:!0})},n.loadRecord=function(){n.commonAjax(n.masterDataService.viewDepartement,n.getRecordId(),n.handleSuccessGetRecord,n.handleErrorGetRecord)},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){document.title="Departement Form",null!=this.getRecordId()&&this.loadRecord()}},{key:"render",value:function(){if(this.state.recordNotFound)return r.a.createElement(A,{className:"is-danger",body:"Record Not Found"});if(null!=this.getRecordId()&&this.state.isLoadingRecord)return r.a.createElement("div",null,r.a.createElement("h2",{style:{textAlign:"center"}},"Departements Management"),r.a.createElement("h3",null,"Please Wait..."));var e=r.a.createElement(r.a.Fragment,null,r.a.createElement(k.b,{to:"/management/departements"},"Departements"),"\xa0",r.a.createElement("i",{className:"fas fa-angle-right"}),"\xa0Form");return r.a.createElement("div",null,r.a.createElement("h2",{style:{textAlign:"center"}},"Departements Management"),r.a.createElement(Y,{title:e},r.a.createElement("form",{onSubmit:this.onSubmit,id:"form-management"},r.a.createElement(T,{label:"Nama",name:"name",required:!0}),r.a.createElement(T,{label:"Deskripsi",name:"description",type:"textarea",required:!0}),r.a.createElement(P,{submitText:null==this.getRecordId()?"Create":"Update",withReset:null==this.getRecordId()}))))}}]),a}(w),Se=Object(d.f)(Object(D.b)((function(e){return{loggedUser:e.userState.loggedUser,loginStatus:e.userState.loginStatus}}))(Ne)),Oe=function e(){Object(i.a)(this,e),this.store=function(e){var t={meeting_note:e},a=g().concat("api/notes/store");return ie(a,t)},this.view=function(e){var t=g().concat("api/notes/view/"+e);return ie(t,{})},this.storeAction=function(e){var t={action:e},a=g().concat("api/action/store");return ie(a,t)}};Oe.instance=Oe.instance||new Oe;var De="form-input-meeting-note",je=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={recordNotFound:!1,isLoadingRecord:!0},n.meetingNote={},n.isSubmitting=!1,n.meetingNoteService=Oe.instance,n.getRecordId=function(){return n.props.match.params.id},n.onSubmit=function(e){e.preventDefault(),n.isSubmitting=!0;var t=e.target,a=Object(c.a)(n);n.showConfirmation("Submit Data?").then((function(e){e&&a.fillDataAndStore(t),a.isSubmitting=!1}))},n.fillDataAndStore=function(e){var t=e.getElementsByClassName("input-form-field");n.meetingNote={};for(var a=0;a<t.length;a++){var r=t[a];null!=r.value&&""!=r.value&&(n.meetingNote[r.name]=r.value,console.debug("this.meetingNote[element.name]",n.meetingNote[r.name],"element.value",r.value)),console.debug("inputs: ",r.tagName,r.value)}null!=n.getRecordId()&&(n.meetingNote.id=n.getRecordId()),console.debug("inputs size:",t.length,"meetingNote>>",n.meetingNote),n.storeMeetingNote()},n.handleSuccessSubmit=function(e){n.showInfo("SUCCESS");try{null==n.getRecordId()&&document.getElementById(De).reset()}catch(t){}},n.handleErrorSubmit=function(e){n.showError("handleErrorSubmit: "+e)},n.handleErrorGetRecord=function(e){n.setState({recordNotFound:!0})},n.handleSuccessGetRecord=function(e){n.meetingNote=e.meeting_note,n.setState({isLoadingRecord:!1});for(var t=document.getElementById(De).getElementsByClassName("input-form-field"),a=0;a<t.length;a++){var r=t[a];r.value=e.meeting_note[r.name],0==n.isClosed()&&"content"!=r.name&&"decision"!=r.name&&r.setAttribute("disabled","disabled"),n.isClosed()&&r.setAttribute("disabled","disabled")}},n.enableInputs=function(){for(var e=document.getElementById(De),t=e.getElementsByClassName("input-form-field"),a=0;a<t.length;a++){t[a].removeAttribute("disabled")}0==n.isSubmitting&&e.reset()},n.storeMeetingNote=function(){n.commonAjax(n.meetingNoteService.store,n.meetingNote,n.handleSuccessSubmit,n.handleErrorSubmit)},n.loadRecord=function(){n.commonAjax(n.meetingNoteService.view,n.getRecordId(),n.handleSuccessGetRecord,n.handleErrorGetRecord)},n.isClosed=function(){return null!=n.getRecordId()&&null!=n.meetingNote&&1==n.meetingNote.is_closed},n}return Object(s.a)(a,[{key:"componentWillMount",value:function(){this.validateLoginStatus()}},{key:"componentDidMount",value:function(){document.title="Meeting Note Form",null!=this.getRecordId()&&this.loadRecord()}},{key:"componentDidUpdate",value:function(){null==this.getRecordId()&&this.enableInputs()}},{key:"render",value:function(){return this.state.recordNotFound?r.a.createElement(A,{className:"is-danger",body:"Record Not Found"}):null!=this.getRecordId()&&this.state.isLoadingRecord?r.a.createElement("h3",null,"Please Wait..."):null==this.props.loggedUser?r.a.createElement(r.a.Fragment,null):r.a.createElement("div",null,r.a.createElement("h2",{style:{textAlign:"center"}},"Notulensi Rapat Departemen ",this.props.loggedUser.departement.name),r.a.createElement(Y,{title:"Formulir Notulensi"},null!=this.getRecordId()&&null!=this.meetingNote?r.a.createElement("div",{className:"tags has-addons are-medium"},r.a.createElement("span",{className:"tag is-dark"},"Status"),r.a.createElement("span",{className:"tag is-info"},1==this.meetingNote.is_closed?"Closed":"Not Closed")):null,r.a.createElement("form",{id:De,onSubmit:this.onSubmit},r.a.createElement(ke,{required:!0,label:"Tanggal",name:"date",type:"date"}),r.a.createElement(ke,{required:!0,label:"Tempat",name:"place"}),r.a.createElement(ke,{required:!0,label:"Pembahasan",name:"content",type:"textarea"}),r.a.createElement(ke,{required:!0,label:"Keputusan",name:"decision",type:"textarea"}),r.a.createElement(ke,{required:!0,label:"Deadline",name:"deadline_date",type:"date"}),r.a.createElement(ke,{required:!0,label:"Penganggung Jawab",name:"person_in_charge"}),this.isClosed()?null:r.a.createElement(P,{submitText:null==this.getRecordId()?"Create":"Update",withReset:null==this.getRecordId()}))))}}]),a}(w),ke=function(e){return T(e)},we=Object(d.f)(Object(D.b)((function(e){return{loggedUser:e.userState.loggedUser,loginStatus:e.userState.loginStatus}}),(function(e){return{}}))(je)),Ie=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={recordNotFound:!1,isLoadingRecord:!0,showDetailNote:!0},n.meetingNote={},n.meetingNoteService=Oe.instance,n.getRecordId=function(){return n.props.match.params.id},n.hideDetailNote=function(){n.setState({showDetailNote:!1})},n.showDetailNote=function(){n.setState({showDetailNote:!0})},n.onSubmit=function(e){e.preventDefault();var t=e.target,a=Object(c.a)(n);n.showConfirmation("Submit Data?").then((function(e){e&&a.fillDataAndStore(t)}))},n.fillDataAndStore=function(e){for(var t=e.getElementsByClassName("input-form-field"),a={note_id:n.meetingNote.id},r=0;r<t.length;r++){var l=t[r];null!=l.value&&""!=l.value&&(a[l.name]=l.value)}console.debug("meetingNote action>>",a),n.storeAction(a)},n.handleSuccessSubmit=function(e){n.meetingNote.action=e.action,n.meetingNote.is_closed=!0,n.showInfo("SUCCESS");try{null==n.getRecordId()&&document.getElementById("form-input-meeting-note-action").reset()}catch(t){}},n.handleErrorSubmit=function(e){n.showError("handleErrorSubmit: "+e)},n.handleErrorGetRecord=function(e){n.setState({recordNotFound:!0})},n.handleSuccessGetRecord=function(e){n.meetingNote=e.meeting_note,n.setState({isLoadingRecord:!1,recordNotFound:!1})},n.storeAction=function(e){n.commonAjax(n.meetingNoteService.storeAction,e,n.handleSuccessSubmit,n.handleErrorSubmit)},n.loadRecord=function(){n.commonAjax(n.meetingNoteService.view,n.getRecordId(),n.handleSuccessGetRecord,n.handleErrorGetRecord)},n.isClosed=function(){return null!=n.getRecordId()&&null!=n.meetingNote&&1==n.meetingNote.is_closed},n}return Object(s.a)(a,[{key:"componentWillMount",value:function(){this.validateLoginStatus()}},{key:"componentDidMount",value:function(){document.title="Action Form",null==this.getRecordId()&&this.backToLogin(),this.loadRecord()}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){return this.state.recordNotFound?r.a.createElement(A,{className:"is-danger",body:"Record Not Found"}):this.state.isLoadingRecord?r.a.createElement("h3",null,"Please Wait..."):null==this.props.loggedUser?r.a.createElement(r.a.Fragment,null):r.a.createElement("div",null,r.a.createElement("h2",{style:{textAlign:"center"}},"Konfirmasi Rapat Departemen ",this.props.loggedUser.departement.name),r.a.createElement(Y,{title:"Detail Notulen"},r.a.createElement("div",{className:"tags has-addons are-medium"},r.a.createElement("span",{className:"tag is-dark"},"Status"),r.a.createElement("span",{className:"tag is-info"},this.meetingNote.is_closed?"Closed":"Not Closed")),this.state.showDetailNote?r.a.createElement("article",{style:{marginBottom:"10px"},className:"is-info"},r.a.createElement("div",{className:"message-header"},r.a.createElement("p",null,"Detail Notulen"),r.a.createElement("button",{onClick:this.hideDetailNote,className:"delete","aria-label":"delete"})),r.a.createElement("div",{className:"message-body has-background-light"},r.a.createElement(q,{label:"Waktu dan Tempat"},r.a.createElement("p",null,this.meetingNote.place,", ",V(this.meetingNote.date))),r.a.createElement(q,{label:"Pembahasan"},r.a.createElement("p",null,this.meetingNote.content)),r.a.createElement(q,{label:"Keputusan"},r.a.createElement("p",null,this.meetingNote.decision)),r.a.createElement(q,{label:"Deadline"},r.a.createElement("p",null,V(this.meetingNote.deadline_date))),r.a.createElement(q,{label:"Penganggung Jawab"},r.a.createElement("p",null,this.meetingNote.person_in_charge)))):r.a.createElement("a",{className:"button",onClick:this.showDetailNote},"Tampilkan Detail Notulen")),r.a.createElement(Y,{title:"Formulir Konfirmasi"},null==this.meetingNote.action?r.a.createElement("form",{id:"form-input-meeting-note-action",onSubmit:this.onSubmit},r.a.createElement(Re,{required:!0,label:"Tanggal",name:"date",type:"date"}),r.a.createElement(Re,{required:!0,label:"Keterangan",name:"description",type:"textarea"}),r.a.createElement(P,{submitText:"Submit",withReset:!0})):r.a.createElement("article",{style:{marginBottom:"10px"},className:"is-info"},r.a.createElement("div",{className:"message-header"},r.a.createElement("p",null,"Detail Konfirmasi")),r.a.createElement("div",{className:"message-body has-background-light"},r.a.createElement(q,{label:"Tanggal"},r.a.createElement("p",null,this.meetingNote.action.date)),r.a.createElement(q,{label:"Keterangan"},r.a.createElement("p",null,this.meetingNote.action.description))))))}}]),a}(w),Re=function(e){return T(e)},xe=Object(d.f)(Object(D.b)((function(e){return{loggedUser:e.userState.loggedUser,loginStatus:e.userState.loginStatus}}),(function(e){return{}}))(Ie)),Ce=function e(t){Object(i.a)(this,e),this.updateProfile=function(e){var t={userModel:e},a=g().concat("api/accountdashboard/updateprofile");return ie(a,t)}};Ce.instance=Ce.instance||new Ce;var Ae=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={},n.userService=Ce.instance,n.populateForm=function(){for(var e=document.getElementById("form-profile").getElementsByClassName("input-form-field"),t=n.props.loggedUser,a=0;a<e.length;a++){var r=e[a];"password"==r.name?r.value=null:r.value=t[r.name]}},n.onSubmit=function(e){e.preventDefault();var t=e.target,a=Object(c.a)(n);n.showConfirmation("Update Profile?").then((function(e){e&&a.updateProfile(t)}))},n.updateProfile=function(e){for(var t=e.getElementsByClassName("input-form-field"),a={},r=0;r<t.length;r++){var l=t[r];if(null!=l.value&&""!=l.value)a[l.name]=l.value}n.commonAjax(n.userService.updateProfile,a,n.onSubmitSuccess,n.onSubmitError)},n.onSubmitSuccess=function(e){n.showInfo("Update Profile Success"),n.props.requestAppId(n.getParentApp())},n.onSubmitError=function(e){n.showError("Update Profile Failed")},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.validateLoginStatus(),document.title="Profile",this.populateForm()}},{key:"componentDidUpdate",value:function(){this.validateLoginStatus()}},{key:"render",value:function(){var e=this.props.loggedUser;return null==e?r.a.createElement(r.a.Fragment,null):r.a.createElement("div",null,r.a.createElement("h2",{style:{textAlign:"center"}},"Profile"),r.a.createElement(Y,{title:"Update Profile"},r.a.createElement("form",{onSubmit:this.onSubmit,id:"form-profile"},r.a.createElement(T,{label:"Email",name:"email",required:!0,type:"email"}),r.a.createElement(T,{label:"Username",name:"name",required:!0}),r.a.createElement(T,{label:"Display Name",name:"display_name",required:!0}),r.a.createElement(T,{label:"Password",name:"password",note:"Kosongkan password apabila tidak ingin diubah"}),r.a.createElement(q,{label:"Departement"},e.departement?e.departement.name:""),r.a.createElement(P,{submitText:"Update"}))))}}]),a}(w),Fe=Object(d.f)(Object(D.b)((function(e){return{loggedUser:e.userState.loggedUser,loginStatus:e.userState.loginStatus}}),(function(e){return{requestAppId:function(t){return e(y(t))}}}))(Ae)),Le=function e(){Object(i.a)(this,e),this.list=function(e){var t={code:"issue",filter:e},a=g().concat("api/issues/list");return ie(a,t)},this.view=function(e){var t=g().concat("api/issues/view/"+e);return ie(t,{})},this.delete=function(e){var t=g().concat("api/issues/delete/"+e);return ie(t,{})},this.followUpIssue=function(e){var t={followed_up_issue:e},a=g().concat("api/issues/followup");return ie(a,t)}};Le.instance=Le.instance||new Le;var Be=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e,"Aduan","issue")).loadRecords=function(){n.readInputForm();var e={page:n.page,limit:n.limit,orderBy:n.orderBy,orderType:n.orderType,fieldsFilter:n.fieldsFilter};n.commonAjax(n.issueService.list,e,n.successLoaded,n.errorLoaded)},n.state={},n.issueService=Le.instance,n.deleteRecord=function(e){n.commonAjax(n.issueService.delete,e,n.onSuccessDelete,n.onErrorDelete)},n}return Object(s.a)(a,[{key:"createNavButton",value:function(){var e=null!=this.recordData?this.recordData:null;return null==e?r.a.createElement(r.a.Fragment,null):r.a.createElement(z,{onClick:this.loadRecordByPage,limit:this.limit,totalData:e.count,activeIndex:this.page})}},{key:"componentDidMount",value:function(){this.loadRecords(),document.title="Daftar Aduan"}},{key:"componentDidUpdate",value:function(){0!=this.props.loginStatus&&null!=this.props.loggedUser||this.backToLogin()}},{key:"render",value:function(){var e=this,t=this.createNavButton(),a=null!=this.recordData?this.recordData:null,n=null==a||null==a.result_list?[]:a.result_list,l="admin"==this.props.loggedUser.role;return r.a.createElement("div",null,r.a.createElement("h2",{style:{textAlign:"center"}},"Daftar Aduan"),r.a.createElement(Y,{title:"Daftar Aduan"},l?this.linkToFormCreate("/issues/create","Tambah Aduan"):null,r.a.createElement("form",{id:"list-form",onSubmit:function(t){t.preventDefault(),e.filter(t.target)}},r.a.createElement(de,{cells:[U(),t]}),r.a.createElement("div",{style:{overflow:"scroll"}},r.a.createElement("table",{className:"table"},r.a.createElement(B,{onButtonOrderClick:this.onButtonOrderClick,headers:[{text:"No"},{text:"id",withFilter:!0},{text:"date",withFilter:!0},{text:"place",withFilter:!0},{text:"content",withFilter:!0},{text:"issuer",withFilter:!0},{text:"email",withFilter:!0},{text:"departement",withFilter:!0},{text:"issue_input",withFilter:!0},{text:"status"},{text:"action"}]}),r.a.createElement("tbody",null,n.map((function(t,a){var n=(e.page-1)*e.limit;return r.a.createElement("tr",{key:"record_"+a},r.a.createElement("td",null,n+a+1),r.a.createElement("td",null,t.id),r.a.createElement("td",null,t.date),r.a.createElement("td",null,t.place),r.a.createElement("td",null,t.content),r.a.createElement("td",null,t.issuer),r.a.createElement("td",null,t.email),r.a.createElement("td",null,t.departement.name),r.a.createElement("td",null,t.issue_input),r.a.createElement("td",null,1==t.is_closed?r.a.createElement("span",{className:"tag is-info"},"Closed"):r.a.createElement("span",{className:"tag is-warning"},"Not Closed")),r.a.createElement("td",null,l?r.a.createElement(r.a.Fragment,null,r.a.createElement(k.b,{to:"/issues/"+t.id,className:"button is-small"},r.a.createElement("i",{className:"fas fa-edit"})),e.buttonDeleteRecord(t.id,!1)):null,r.a.createElement(k.b,{to:"/issues/"+t.id+"/followup",className:"button is-primary is-small"},r.a.createElement("i",{className:"fas fa-location-arrow"}))))}))))))))}}]),a}(me),_e=Object(d.f)(Object(D.b)((function(e){return{loggedUser:e.userState.loggedUser,loginStatus:e.userState.loginStatus}}),(function(e){return{}}))(Be)),Ue=["Yayasan","Orang Tua","Santri","Tamu"],Te=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={recordNotFound:!1,isLoadingRecord:!0,departementList:[]},n.masterDataService=se.instance,n.onSubmit=function(e){e.preventDefault();var t=e.target,a=Object(c.a)(n);n.showConfirmation("Save Data?").then((function(e){e&&a.storeRecord(t)}))},n.storeRecord=function(e){for(var t=e.getElementsByClassName("input-form-field"),a={},r=0;r<t.length;r++){var l=t[r];if(null!=l.value&&""!=l.value){var o=l.name;"departement"==o&&(o="departement_id"),a[o]=l.value}}null!=n.getRecordId()&&(a.id=n.getRecordId()),n.store(a),console.debug("ISSUE: ",a)},n.getRecordId=function(){return n.props.match.params.id},n.departementListLoaded=function(e){n.setState({departementList:e.result_list}),null!=n.getRecordId()&&n.loadRecord(),console.log("departementListLoaded: ",e)},n.recordSaved=function(e){n.showInfo("SUCCESS SAVING RECORD"),null==n.getRecordId()&&(n.handleSuccessGetRecord(e),n.props.history.push("/issues/"+e.issue.id))},n.recordFailedToSave=function(e){n.showError("FAILED SAVING RECORD")},n.store=function(e){n.commonAjax(n.masterDataService.storeIssue,e,n.recordSaved,n.recordFailedToSave)},n.loadDepartements=function(){n.commonAjax(n.masterDataService.departementList,{},n.departementListLoaded,(function(e){}))},n.handleSuccessGetRecord=function(e){n.setState({isLoadingRecord:!1});for(var t=document.getElementById("form-management").getElementsByClassName("input-form-field"),a=0;a<t.length;a++){var r=t[a];"departement"==r.name?r.value=e.issue.departement_id:r.value=e.issue[r.name]}},n.handleErrorGetRecord=function(e){n.setState({recordNotFound:!0})},n.loadRecord=function(){n.commonAjax(n.masterDataService.viewIssue,n.getRecordId(),n.handleSuccessGetRecord,n.handleErrorGetRecord)},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.loadDepartements(),document.title="Form Aduan"}},{key:"render",value:function(){if(this.state.recordNotFound)return r.a.createElement(A,{className:"is-danger",body:"Record Not Found"});if(null!=this.getRecordId()&&this.state.isLoadingRecord)return r.a.createElement("div",null,r.a.createElement("h2",{style:{textAlign:"center"}},"Form Aduan"),r.a.createElement("h3",null,"Please Wait..."));var e=r.a.createElement(r.a.Fragment,null,r.a.createElement(k.b,{to:"/issues"},"Aduan"),"\xa0",r.a.createElement("i",{className:"fas fa-angle-right"}),"\xa0Form");return r.a.createElement("div",null,r.a.createElement("h2",{style:{textAlign:"center"}},"Form Aduan"),r.a.createElement(Y,{title:e},r.a.createElement("form",{onSubmit:this.onSubmit,id:"form-management"},r.a.createElement(T,{label:"Tanggal",name:"date",type:"date",required:!0}),r.a.createElement(T,{label:"Tempat",name:"place",required:!0}),r.a.createElement(T,{label:"Permasalahan",name:"content",type:"textarea",required:!0}),r.a.createElement(T,{label:"Email",name:"email",required:!0,type:"email"}),r.a.createElement(T,{label:"Sumber Aduan",name:"issue_input",required:!0}),r.a.createElement(M,{label:"Pengadu",options:Ue.map((function(e){return{value:e,text:e}})),name:"issuer",required:!0}),r.a.createElement(M,{label:"Departement",options:this.state.departementList.map((function(e){return{value:e.id,text:e.name}})),name:"departement",required:!0}),r.a.createElement(P,{submitText:null==this.getRecordId()?"Create":"Update",withReset:null==this.getRecordId()}))))}}]),a}(X),Me=Object(d.f)(Object(D.b)((function(e){return{loggedUser:e.userState.loggedUser,loginStatus:e.userState.loginStatus}}))(Te)),qe=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={recordNotFound:!1,isLoadingRecord:!0,showDetailIssue:!0},n.issue={},n.issueService=Le.instance,n.getRecordId=function(){return n.props.match.params.id},n.hideDetailIssue=function(){n.setState({showDetailIssue:!1})},n.showDetailIssue=function(){n.setState({showDetailIssue:!0})},n.onSubmit=function(e){e.preventDefault();var t=e.target,a=Object(c.a)(n);n.showConfirmation("Submit Data?").then((function(e){e&&a.fillDataAndStore(t)}))},n.fillDataAndStore=function(e){for(var t=e.getElementsByClassName("input-form-field"),a={issue_id:n.issue.id},r=0;r<t.length;r++){var l=t[r];null!=l.value&&""!=l.value&&(a[l.name]=l.value)}console.debug("issue action>>",a),n.storeAction(a)},n.handleSuccessSubmit=function(e){n.issue.follow_up=e.followed_up_issue,n.issue.is_closed=!0,n.showInfo("SUCCESS");try{null==n.getRecordId()&&document.getElementById("form-input-follow-up-issue").reset()}catch(t){}},n.handleErrorSubmit=function(e){n.showError("handleErrorSubmit: "+e)},n.handleErrorGetRecord=function(e){n.setState({recordNotFound:!0})},n.handleSuccessGetRecord=function(e){n.issue=e.issue,n.setState({isLoadingRecord:!1,recordNotFound:!1})},n.storeAction=function(e){n.commonAjax(n.issueService.followUpIssue,e,n.handleSuccessSubmit,n.handleErrorSubmit)},n.loadRecord=function(){n.commonAjax(n.issueService.view,n.getRecordId(),n.handleSuccessGetRecord,n.handleErrorGetRecord)},n.isClosed=function(){return null!=n.getRecordId()&&null!=n.issue&&1==n.issue.is_closed},n}return Object(s.a)(a,[{key:"componentWillMount",value:function(){this.validateLoginStatus()}},{key:"componentDidMount",value:function(){document.title="Follow Up Issue",null==this.getRecordId()&&this.backToLogin(),this.loadRecord()}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){return this.state.recordNotFound?r.a.createElement(A,{className:"is-danger",body:"Record Not Found"}):this.state.isLoadingRecord?r.a.createElement("h3",null,"Please Wait..."):null==this.props.loggedUser?r.a.createElement(r.a.Fragment,null):r.a.createElement("div",null,r.a.createElement("h2",{style:{textAlign:"center"}},"Tindak Lanjut Aduan"),r.a.createElement(Y,{title:"Detail Notulen"},r.a.createElement("div",{className:"tags has-addons are-medium"},r.a.createElement("span",{className:"tag is-dark"},"Status"),r.a.createElement("span",{className:"tag is-info"},this.issue.is_closed?"Closed":"Not Closed")),this.state.showDetailIssue?r.a.createElement("article",{style:{marginBottom:"10px"},className:"is-info"},r.a.createElement("div",{className:"message-header"},r.a.createElement("p",null,"Detail Aduan"),r.a.createElement("button",{onClick:this.hideDetailIssue,className:"delete","aria-label":"delete"})),r.a.createElement("div",{className:"message-body has-background-light"},r.a.createElement(q,{label:"Waktu dan Tempat"},r.a.createElement("p",null,this.issue.place,", ",V(this.issue.date))),r.a.createElement(q,{label:"Bidang"},r.a.createElement("p",null,this.issue.departement.name)),r.a.createElement(q,{label:"Permasalahan"},r.a.createElement("p",null,this.issue.content)),r.a.createElement(q,{label:"Pengadu"},r.a.createElement("p",null,this.issue.email,", ",this.issue.issuer)),r.a.createElement(q,{label:"Sumber Input"},r.a.createElement("p",null,this.issue.issue_input)))):r.a.createElement("a",{className:"button",onClick:this.showDetailIssue},"Tampilkan Detail Aduan")),r.a.createElement(Y,{title:"Formulir Tindak Lanjut"},null==this.issue.follow_up?r.a.createElement("form",{id:"form-input-follow-up-issue",onSubmit:this.onSubmit},r.a.createElement(Pe,{required:!0,label:"Tanggal",name:"date",type:"date"}),r.a.createElement(Pe,{required:!0,label:"Keterangan",name:"description",type:"textarea"}),r.a.createElement(P,{submitText:"Submit",withReset:!0})):r.a.createElement("article",{style:{marginBottom:"10px"},className:"is-info"},r.a.createElement("div",{className:"message-header"},r.a.createElement("p",null,"Detail Tindak Lanjut")),r.a.createElement("div",{className:"message-body has-background-light"},r.a.createElement(q,{label:"Tanggal"},r.a.createElement("p",null,this.issue.follow_up.date)),r.a.createElement(q,{label:"Keterangan"},r.a.createElement("p",null,this.issue.follow_up.description))))))}}]),a}(w),Pe=function(e){return T(e)},Ge=Object(d.f)(Object(D.b)((function(e){return{loggedUser:e.userState.loggedUser,loginStatus:e.userState.loginStatus}}),(function(e){return{}}))(qe)),Ke=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"content"},r.a.createElement("div",{style:{height:"20px"}}),r.a.createElement(d.c,null,r.a.createElement(d.a,{exact:!0,path:"/",render:function(e){return r.a.createElement(ze,null)}}),r.a.createElement(d.a,{path:"/home",render:function(e){return r.a.createElement(ze,null)}}),r.a.createElement(d.a,{path:"/dashboard",render:function(t){return r.a.createElement(Q,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/meetingnote/create",render:function(t){return r.a.createElement(we,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/meetingnote/:id",render:function(t){return r.a.createElement(we,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/meetingnote/:id/action",render:function(t){return r.a.createElement(xe,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/issues",render:function(t){return r.a.createElement(_e,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/issues/create",render:function(t){return r.a.createElement(Me,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/issues/:id",render:function(t){return r.a.createElement(Me,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/issues/:id/followup",render:function(t){return r.a.createElement(Ge,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/management",render:function(t){return r.a.createElement(ee,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/management/users",render:function(t){return r.a.createElement(ge,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/management/users/create",render:function(t){return r.a.createElement(ye,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/management/users/:id",render:function(t){return r.a.createElement(ye,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/management/departements",render:function(t){return r.a.createElement(ve,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/management/departements/create",render:function(t){return r.a.createElement(Se,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/management/departements/:id",render:function(t){return r.a.createElement(Se,{app:e.props.app})}}),r.a.createElement(d.a,{path:"/login",render:function(t){return r.a.createElement(L,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/profile",render:function(t){return r.a.createElement(Fe,{app:e.props.app})}})))}}]),a}(n.Component),ze=function(e){return document.title="Home",r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("h2",null,"Kafila Console"),r.a.createElement("span",{style:{fontSize:"10em"}},r.a.createElement("i",{className:"fas fa-users-cog"})))},We=Ke,Ye=(a(74),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={opacity:1,show:!0},n}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){return 0==this.props.show?null:r.a.createElement("div",{style:{width:"100%",height:"50px",color:"#ccc",textAlign:"center"}},r.a.createElement("div",{style:{position:"fixed",zIndex:1e4}},r.a.createElement("div",{className:"columns",style:{width:"min-content"}},r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"lds-ring"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))),r.a.createElement("div",{className:"column"},r.a.createElement("span",{style:{fontSize:"2em"}},"Loading")))))}}]),a}(n.Component));function Je(e){return r.a.createElement("div",{className:"modal is-active has-text-centered",style:{backgroundColor:"rgba(100,100,100,0.7)"}},r.a.createElement("div",{className:"modal-background"}),e.children)}var Ve=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).onYes=function(e){n.props.onYes&&n.props.onYes(e)},n.onNo=function(e){n.props.onNo&&n.props.onNo(e)},n.onClose=function(e){n.props.onClose&&n.props.onClose(e)},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){try{document.getElementById("button-alert-yes").focus()}catch(e){}}},{key:"render",value:function(){var e=this.props.title?this.props.title:"Info",t=(this.props.yesOnly,"modal-card-head has-background-link");return 1==this.props.isError&&(t="modal-card-head has-background-danger"),r.a.createElement(r.a.Fragment,null,r.a.createElement(Je,null,r.a.createElement("form",{onSubmit:"return false;"},r.a.createElement("div",{className:"modal-card"},r.a.createElement("header",{className:t},r.a.createElement("p",{className:"modal-card-title has-text-white"},e)),r.a.createElement("section",{className:"modal-card-body"},this.props.children),r.a.createElement("footer",{className:"modal-card-foot"},r.a.createElement("div",{style:{margin:"auto"}},r.a.createElement("button",{id:"button-alert-yes",type:"submit",onClick:this.onYes,className:this.props.yesOnly?"button":"button is-link"},"Yes"),this.props.yesOnly?null:r.a.createElement("button",{onClick:this.onNo,className:"button"},"No")))))))}}]),a}(n.Component),He=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={menus:[],menuCode:"",loading:!1,loadingPercentage:0,requestId:null,mainAppUpdated:new Date,showAlert:!1},n.alertTitle=null,n.alertBody=null,n.alertIsYesOnly=!0,n.alertIsError=!1,n.alertOnYesCallback=null,n.alertOnCancelCallback=null,n.loadings=0,n.setMenuCode=function(e){n.setState({menuCode:e})},n.refresh=function(){n.setState({mainAppUpdated:new Date})},n.incrementLoadings=function(){this.loadings++},n.decrementLoadings=function(){this.loadings--,this.loadings<0&&(this.loadings=0)},n.requestAppId=function(){n.props.requestAppId(Object(c.a)(n))},n.startLoading=function(e){n.incrementLoadings(),n.setState({loading:!0,realtime:e})},n.endLoading=function(){console.log("END LOADING"),n.decrementLoadings(),0==n.loadings&&n.setState({loading:!1,loadingPercentage:0})},n.showAlertError=function(e,t,a,r,l){n.alertIsError=!0,n.showAlert(e,t,a,r,l)},n.showAlert=function(e,t,a,r,l){n.alertTitle=e,n.alertBody=t,n.alertIsYesOnly=a;var o=Object(c.a)(n);n.alertOnYesCallback=function(e){o.dismissAlert(),r(e)},a||(n.alertOnCancelCallback=function(e){o.dismissAlert(),null!=l&&l(e)}),n.setState({showAlert:!0})},n.dismissAlert=function(){n.alertIsError=!1,n.setState({showAlert:!1})},n.routedContent=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.c,null,r.a.createElement(d.a,{path:"/home",render:function(e){return r.a.createElement("h2",null,"HOME")}}),r.a.createElement(d.a,{path:"/login",render:function(e){return r.a.createElement("h2",null,"Login")}})))},n}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(){this.props.requestId!=this.state.requestId&&(this.setState({requestId:this.props.requestId}),this.props.refreshLogin())}},{key:"componentDidMount",value:function(){this.requestAppId(),this.setState({loadingPercentage:0})}},{key:"setMenus",value:function(){for(var e=this.props.menus?this.props.menus:[],t=new Array,a=0;a<e.length;a++){var n=e[a],r=1!=this.props.loginStatus&&1==n.authenticated,l=!this.state.enableShopping&&"cart"==n.code;r||(l||t.push(n))}return t}},{key:"render",value:function(){return this.props.requestId?r.a.createElement("div",{className:"App"},this.state.showAlert?r.a.createElement(Ve,{isError:this.alertIsError,yesOnly:this.alertIsYesOnly,title:this.alertTitle,onYes:this.alertOnYesCallback,onNo:this.alertOnCancelCallback},this.alertBody):null,r.a.createElement(C,{app:this}),r.a.createElement("section",{className:"container",style:{minHeight:"70vh"}},r.a.createElement("div",{style:{height:"50px"}},r.a.createElement(Ye,{show:this.state.loading})),r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column"},r.a.createElement(We,{app:this})))),r.a.createElement(j,null)):r.a.createElement(Ye,{show:!0})}}]),a}(n.Component),$e=Object(d.f)(Object(D.b)((function(e){return{loginStatus:e.userState.loginStatus,menus:e.userState.menus,requestId:e.userState.requestId,applicationProfile:e.userState.applicationProfile}}),(function(e){return{performLogout:function(t){return e(N(t))},requestAppId:function(t){return e(y(t))},refreshLogin:function(){return e({type:"refresh_login",payload:{},meta:{type:"refresh_login"}})}}}))(He)),Qe=a(16),Xe={loginKey:null,loginStatus:!1,loginFailed:!1,loggedUser:null,loginAttempt:!1,requestId:null,lastLoginAttempt:new Date,applicationProfile:{}},Ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe,t=arguments.length>1?arguments[1]:void 0,a={};switch(t.type){case"req_ID":return a=Object(W.a)(Object(W.a)({},e),{},{requestId:t.payload.requestId,applicationProfile:t.payload.applicationProfile}),1!=t.payload.loginStatus?(a.loginStatus=!1,a.loggedUser=null):t.payload.user?(a.loggedUser=t.payload.user,a.loginStatus=!0,ne(a.loggedUser.api_token)):(a.loginStatus=!1,a.loggedUser=null),a;case"do_login":return console.debug("DO_LOGIN"),t.payload.loginStatus?(console.debug("DO_LOGIN true ",new Date),console.debug("APITOKEN: ",t.payload.loginKey),ne(t.payload.loginKey),a=Object(W.a)(Object(W.a)({},e),{},{lastLoginAttempt:new Date,loginAttempt:!0,loginStatus:!0,loginKey:t.payload.loginKey,loginFailed:!1,loggedUser:t.payload.loggedUser})):Object(W.a)(Object(W.a)({},e),{},{lastLoginAttempt:new Date,loginFailed:!0});case"do_logout":return a=Object(W.a)(Object(W.a)({},e),{},{loginStatus:!1,loggedUser:null});default:return Object(W.a)({},e)}},et={entitiesData:{entityConfig:null},managedEntity:null,entityProperty:null,managementMenus:[]},tt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"get_entity":return Object(W.a)(Object(W.a)({},e),{},{entitiesData:t.payload});case"get_entity_by_id":return Object(W.a)(Object(W.a)({},e),{},{managedEntity:t.payload.entities[0]});case"update_entity":return e;case"rm_mng_entity":return Object(W.a)(Object(W.a)({},e),{},{managedEntity:null});case"get_entity_config":return Object(W.a)(Object(W.a)({},e),{},{entityProperty:t.payload});case"GET_MANAGEMENT_MENUS":return Object(W.a)(Object(W.a)({},e),{},{managementMenus:t.payload.generalList});default:return e}},at={meetingNoteData:null},nt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_MEETING_NOTES":var a=Object(W.a)(Object(W.a)({},e),{},{meetingNoteData:t.payload});return console.debug("action.meetingNoteData: ",a.meetingNoteData),a;default:return Object(W.a)({},e)}},rt=Object(Qe.c)({userState:Ze,managementState:tt,meetingNoteState:nt}),lt={userState:Xe,managementState:et,meetingNoteState:at},ot=a(23),it=function(e){return function(t){return function(a){if(!a.meta||"do_login"!==a.meta.type)return t(a);var n=a.meta.app;ot.post(a.meta.url,a.payload,{headers:te()}).then((function(t){var n=t.data,r=n.user.api_token,l=Object.assign({},a,{payload:{loginStatus:!0,loginKey:r,loggedUser:n.user}});delete l.meta,e.dispatch(l)})).catch((function(t){var n=Object.assign({},a,{payload:{loginStatus:!1}});delete n.meta,e.dispatch(n)})).finally((function(e){n.endLoading()}))}}},st=function(e){return function(t){return function(a){if(!a.meta||"req_ID"!==a.meta.type)return t(a);var n=te();ot.post(a.meta.url,a.payload,{headers:n}).then((function(t){var n=t.data,r="",l=n.message;n.user&&(r=n.user.api_token);var o=Object.assign({},a,{payload:Object(W.a)({loginStatus:!0,loginKey:r,requestId:l},n)});delete o.meta,e.dispatch(o)})).catch((function(t){console.error("ERROR Get User, will get requestId");var n=g().concat("api/account/requestid");ot.get(n).then((function(t){var n=t.data,r=n.message,l=Object.assign({},a,{payload:Object(W.a)({loginStatus:!1,loginKey:null,requestId:r},n)});delete l.meta,e.dispatch(l)}))})).finally((function(e){return a.meta.app.endLoading()}))}}},ct=function(e){return function(e){return function(t){if(!t.meta||"refresh_login"!==t.meta.type)return e(t)}}},ut=function(e){return function(t){return function(a){if(!a.meta||"do_logout"!==a.meta.type)return t(a);var n=a.meta.app;ot.post(a.meta.url,a.payload,{headers:te()}).then((function(t){var n=!1;"00"==t.data.code?n=!0:alert("Logout Failed");var r=Object.assign({},a,{payload:{loginStatus:!n}});delete r.meta,e.dispatch(r)})).catch((function(e){console.log(e)})).finally((function(e){return n.endLoading()}))}}},mt=function(e){return function(t){return function(a){if(!a.meta||"remove_shop_entity"!==a.meta.type)return t(a);var n=Object.assign({},a,{payload:null});delete n.meta,e.dispatch(n)}}},dt=function(e){return function(t){return function(a){if(!a.meta||"update_cart"!==a.meta.type)return t(a);var n=Object.assign({},a,{payload:a.payload});delete n.meta,e.dispatch(n)}}},pt=a(23),ft=function(e){return function(t){return function(a){if(!a.meta||"GET_MEETING_NOTES"!==a.meta.type)return t(a);var n=a.meta.app;pt.post(a.meta.url,a.payload,{headers:te()}).then((function(t){var n=t.data,r=Object.assign({},a,{payload:Object(W.a)({},n)});delete r.meta,e.dispatch(r)})).catch((function(e){console.log(e)})).finally((function(e){n.endLoading()}))}}},gt=function(){return Object(Qe.d)(rt,lt,Object(Qe.a)(mt,dt,it,ut,ct,st,ft))},ht=function(e){var t=gt();return r.a.createElement(D.a,{store:t},r.a.createElement(k.a,null,r.a.createElement($e,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(ht,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[42,1,2]]]);
//# sourceMappingURL=main.b8334a3f.chunk.js.map