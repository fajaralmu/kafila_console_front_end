(this["webpackJsonpkafila-console-meeting-note"]=this["webpackJsonpkafila-console-meeting-note"]||[]).push([[0],{30:function(e,t,a){},44:function(e,t,a){e.exports=a(77)},49:function(e,t,a){},50:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},57:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(20),l=a.n(i),o=(a(49),a(1)),s=a(2),c=a(8),u=a(4),m=a(3),d=(a(50),a(9)),p="${contextPath}"==document.getElementById("rootPath").value||""==document.getElementById("rootPath").value,f=p?"/":document.getElementById("rootPath").value+"/",h=function(){var e=p?"http://localhost:8000".concat(f):f;return e},g=(h(),h(),h()),E=g+"api/account/",v=g+"api/accountdashboard/",b=function(e){return e.startLoading(),{type:"req_ID",payload:{},meta:{app:e,type:"req_ID",url:v.concat("user")}}},N=function(e){return e.startLoading(),{type:"do_logout",payload:{},meta:{app:e,type:"do_logout",url:v.concat("logout")}}},y=function(e,t,a){return a.startLoading(),{type:"do_login",payload:{user:{email:e,password:t}},meta:{type:"do_login",url:E.concat("login"),app:a}}},S=function(e,t){return{type:"store-app-data",payload:{data:t,key:e},meta:{type:"store-app-data"}}},D=a(6),O=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("footer",{className:"footer has-background-dark"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"content has-text-centered"},r.a.createElement("div",{className:"columns is-mobile is-centered"},r.a.createElement("div",{className:"field is-grouped is-grouped-multiline"},r.a.createElement("div",{className:"control"},r.a.createElement("div",{className:"tags has-addons"},r.a.createElement("a",{className:"tag is-link",href:"https://kafila.sch.id"},"KIIS Jakarta"),r.a.createElement("span",{className:"tag is-light"},"\xa9 Kafila Console 2020"))))))))}}]),a}(n.Component),k=a(7),C=a(5),j=(a(30),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Object(o.a)(this,a),(n=t.call(this,e)).state={updated:new Date},n.parentApp=e.app,n.authenticated=i,n.validateLoginStatus=function(){return!i||(1==n.props.loginStatus&&null!=n.props.loggedUser||(n.backToLogin(),!1))},n.getParentApp=function(){return n.props.app},n.getLoggedUser=function(){return n.props.loggedUser},n.isLoggedUserAdmin=function(){return 0==n.isLoggedUserNull()&&"admin"==n.getLoggedUser().role},n.getLoggedUserDepartementName=function(){return n.isLoggedUserNull()?null:n.getLoggedUser().departement.name},n.isLoggedUserNull=function(){return 0==n.props.loginStatus||null==n.props.loggedUser},n.showConfirmation=function(e){return new Promise((function(t,a){n.parentApp.showAlert("Confirmation",e,!1,(function(e){t(!0)}),(function(e){t(!1)}))}))},n.showConfirmationDanger=function(e){return new Promise((function(t,a){n.parentApp.showAlertError("Confirmation",e,!1,(function(e){t(!0)}),(function(e){t(!1)}))}))},n.showInfo=function(e){n.parentApp.showAlert("Info",e,!0,(function(){}))},n.showError=function(e){n.parentApp.showAlertError("Error",e,!0,(function(){}))},n.backToLogin=function(){i&&n.props.history.push("/login")},n.startLoading=function(e){n.parentApp.startLoading(e)},n.endLoading=function(){n.parentApp.endLoading()},n.doAjax=function(e,t,a,r,i){if(e){n.startLoading(a);var l=Object(c.a)(n);e(t).then((function(e){r&&r(e)})).catch((function(e){i?i(e):("string"==typeof e&&l.showInfo("Operation Failed: "+e),l.showInfo("resource not found"))})).finally((function(e){n.endLoading()}))}else console.warn("Method Not Found! ")},n.commonAjax=function(e,t,a,r){n.doAjax(e,t,!1,a,r)},n.commonAjaxWithProgress=function(e,t,a,r){n.doAjax(e,t,!0,a,r)},n.title=function(e){return r.a.createElement(w,null,e)},n.refresh=function(){n.setState({updated:new Date})},n}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(){this.authenticated&&null==this.props.loggedUser&&this.backToLogin()}}]),a}(n.Component)),w=function(e){return r.a.createElement("h2",{style:{textAlign:"left",marginLeft:"10px"}},e.children)},I=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e,!1)).state={shownMenuList:{}},n.shownMenuList=function(e){var t=n.state.shownMenuList;t[e]=!0,n.setState({shownMenuList:t})},n.hideMenuList=function(e){var t=n.state.shownMenuList;t[e]=!1,n.setState({shownMenuList:t})},n.isMenuListShown=function(e){return 1==n.state.shownMenuList[e]},n.toggleMenuList=function(e){var t=e.target.getAttribute("menu-name");n.isMenuListShown(t)?n.hideMenuList(t):n.shownMenuList(t)},n}return Object(s.a)(a,[{key:"extractChildren",value:function(e){for(var t=[],a=0;a<e.length;a++){var n=e[a];n.authenticated&&this.isLoggedUserNull()||(0==this.isLoggedUserNull()&&null!=n.role&&this.getLoggedUser().role!=n.role||t.push(n))}return t}}]),a}(j),x=[{name:"Umum",children:[{name:"Home",link:"/home",iconClassName:"fas fa-home"},{name:"Dashboard",link:"/dashboard",iconClassName:"fas fa-tachometer-alt",authenticated:!0},{name:"Aduan",link:"/issues-public",iconClassName:"fas fa-envelope-open-text"}]},{name:"Notulensi",children:[{name:"List",link:"/discussiontopics",authenticated:!0,iconClassName:"fas fa-list"},{name:"Tambah Notulensi",link:"/meetingnote/create",authenticated:!0,iconClassName:"fas fa-plus-square"}]},{name:"Aduan",children:[{name:"List",link:"/issues",authenticated:!0,iconClassName:"fas fa-list"},{name:"Tambah",link:"/issues/create",authenticated:!0,iconClassName:"fas fa-plus-square",role:"admin"}]},{name:"Master Data",children:[{name:"Menu",link:"/management",authenticated:!0,role:"admin"},{name:"User",link:"/management/users",authenticated:!0,role:"admin",iconClassName:"fas fa-users"},{name:"Bidang",link:"/management/departements",authenticated:!0,role:"admin",iconClassName:"fas fa-object-group"}]}],T=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e,!1)).state=Object(k.a)(Object(k.a)({},n.state),{},{showBurger:!1}),n.toggleNavBurger=function(){n.setState({showBurger:!n.state.showBurger})},n.performLogout=function(){var e=n.props;n.showConfirmation("Apakah Anda ingin keluar?").then((function(t){t&&e.performLogout(e.app)}))},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("nav",{className:"navbar is-dark topNav"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"navbar-brand"},r.a.createElement(C.b,{style:{backgroundColor:"#fff"},className:"navbar-item",to:"/"},r.a.createElement("img",{src:"kiis-stroke.png",width:"38",height:"38"})),r.a.createElement("div",{onClick:this.toggleNavBurger,className:"navbar-burger burger"},r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null))),r.a.createElement("div",{id:"topNav",className:this.state.showBurger?"is-active navbar-menu":" navbar-menu"},r.a.createElement("div",{className:"navbar-start"},x.map((function(t,a){var n=e.extractChildren(t.children);if(null==n||0==n.length)return null;var i=e.isMenuListShown(t.name),l=i?"fas fa-angle-up":"fas fa-angle-down";return r.a.createElement(r.a.Fragment,{key:"NavMenu_"+t.name},r.a.createElement("p",{style:{marginLeft:"10px"},onClick:e.toggleMenuList,"menu-name":t.name,className:"menu-label"},r.a.createElement("i",{style:{marginRight:"10px"},className:l}),t.name,"  "),i?r.a.createElement("ul",{className:"menu-list"},n.map((function(t,n){return r.a.createElement(R,{key:"header-link-"+n+"-"+a,loginStatus:e.props.loginStatus,loggedUser:e.props.loggedUser,linkProperty:t})}))):null)}))),r.a.createElement("div",{className:"navbar-end"},r.a.createElement("div",{className:"navbar-item"},r.a.createElement("div",{className:"buttons has-addons"},this.props.loginStatus?r.a.createElement(r.a.Fragment,null,r.a.createElement(C.b,{className:"button is-info",to:"/profile"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-user"})),r.a.createElement("span",null,this.props.loggedUser.display_name," - ",this.props.loggedUser.role)),r.a.createElement("a",{onClick:this.performLogout,className:"button is-danger"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-sign-out-alt"})),r.a.createElement("span",null,"Logout"))):r.a.createElement(C.b,{className:"button is-info",to:"/login"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-user"})),r.a.createElement("span",null,"Login"))))))))}}]),a}(I),R=function(e){var t=e.linkProperty,a=e.loginStatus,n=e.loggedUser,i=t.iconClassName?t.iconClassName:"fas fa-folder";return null==t.link||!a&&t.authenticated||null!=t.role&&null!=n&&n.role!=t.role?null:r.a.createElement(C.b,{key:t.name+"LINK",className:"navbar-item",to:t.link},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:i})),r.a.createElement("span",null,t.name))},_=Object(d.f)(Object(D.b)((function(e){return{loginStatus:e.userState.loginStatus,loggedUser:e.userState.loggedUser}}),(function(e){return{performLogout:function(t){return e(N(t))}}}))(T)),L=(a(57),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={show:!0},n.hide=function(){n.props.enableHidden&&n.setState({show:!1})},n.show=function(){n.setState({show:!0})},n}return Object(s.a)(a,[{key:"render",value:function(){if(0==this.state.show)return null;var e=this.props.className?"message "+this.props.className:"message is-info";return r.a.createElement("article",{style:{marginBottom:"10px"},id:"my-message",className:e},r.a.createElement("div",{className:"message-header"},r.a.createElement("p",null,this.props.header?this.props.header:"Info"),r.a.createElement("button",{onClick:this.hide,className:"delete","aria-label":"delete"})),r.a.createElement("div",{className:"message-body"},this.props.body,this.props.children))}}]),a}(n.Component)),F=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).child=r.a.createRef(),n.lastLoginAttempt=new Date,n.state={},n.validateLoginStatus=function(){1==n.props.loginStatus&&n.props.history.push("/dashboard")},n.handleSubmit=function(e){e.preventDefault();var t=e.target,a=(new FormData(e.target),t.elements[0]),r=t.elements[1];n.props.performLogin(a.value,r.value,n.props.app)},n.showLoginInfo=function(){n.props.loginFailed&&n.lastLoginAttempt!=n.props.lastLoginAttempt&&(n.child.current.show(),n.lastLoginAttempt=n.props.lastLoginAttempt)},n}return Object(s.a)(a,[{key:"componentWillMount",value:function(){this.validateLoginStatus()}},{key:"componentDidUpdate",value:function(){this.validateLoginStatus(),this.showLoginInfo()}},{key:"componentDidMount",value:function(){document.title="Login"}},{key:"render",value:function(){return r.a.createElement("div",null,this.props.loginFailed?r.a.createElement(L,{ref:this.child,className:"is-danger",body:"Login Failed"}):null,r.a.createElement("div",{className:"columns is-centered"},r.a.createElement("div",{style:{marginTop:"10px",marginBottom:"10px"},className:"column is-5-tablet is-5-desktop is-5-widescreen"},r.a.createElement("form",{id:"formLogin",onSubmit:this.handleSubmit,className:"box"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Email"),r.a.createElement("div",{className:"control has-icons-left"},r.a.createElement("input",{nam:"email",type:"email",placeholder:"e.g. user@gmail.com",className:"input",required:!0}),r.a.createElement("span",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fa fa-envelope"})))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Password"),r.a.createElement("div",{className:"control has-icons-left"},r.a.createElement("input",{name:"password",type:"password",placeholder:"*******",className:"input",required:!0}),r.a.createElement("span",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fa fa-lock"})))),r.a.createElement("div",{className:"field"},r.a.createElement("button",{className:"button is-success"},"Login"))))))}}]),a}(n.Component),A=Object(d.f)(Object(D.b)((function(e){return{loginStatus:e.userState.loginStatus,lastLoginAttempt:e.userState.lastLoginAttempt,loginFailed:e.userState.loginFailed,requestId:e.userState.requestId}}),(function(e){return{performLogin:function(t,a,n){return e(y(t,a,n))}}}))(F)),U=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).saveButtonOnClick=function(e){n.props.saveButtonOnClick&&n.props.saveButtonOnClick(e)},n.editButtonOnClick=function(e){n.props.editButtonOnClick&&n.props.editButtonOnClick(e)},n.deleteButtonOnClick=function(e){n.props.deleteButtonOnClick&&n.props.deleteButtonOnClick(e)},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.headerIconClassName,t=this.props.headerIconOnClick;return r.a.createElement("div",{className:"card",style:Object(k.a)({margin:"10px"},this.props.style)},r.a.createElement("header",{className:"card-header"},r.a.createElement("p",{className:"card-header-title"},this.props.title?this.props.title:"Card Title"),null==e?null:r.a.createElement(B,{className:e,onClick:t})),r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"content"},this.props.children)),this.props.withButtonFooter?r.a.createElement("footer",{className:"card-footer"},r.a.createElement("a",{href:"#",onClick:this.saveButtonOnClick,className:"card-footer-item"},"Save"),r.a.createElement("a",{href:"#",onClick:this.editButtonOnClick,className:"card-footer-item"},"Edit"),r.a.createElement("a",{href:"#",onClick:this.deleteButtonOnClick,className:"card-footer-item"},"Delete")):null,this.props.footerContent?r.a.createElement("footer",{className:"card-footer"},this.props.footerContent):null)}}]),a}(n.Component),B=function(e){return r.a.createElement("a",{className:"card-header-icon","aria-label":"more options",onClick:e.onClick},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:e.className,"aria-hidden":"true"})))},P=function(e){var t=e.className,a=e.iconClassName;return r.a.createElement("a",{className:"button "+t,style:e.style,onClick:e.onClick},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:a})),r.a.createElement("spam",null,e.children))},M=1;var q=2*Math.PI,G=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).id=function(){var e;return e=(new Date).getUTCMilliseconds(),++M+"-"+e}()+"_"+(new Date).getTime()+"_pie_chart_canvas",n.state={proportions:[],showDetail:!1},n.timeoutId=null,n.accumulationDegree=0,n.updatePie=function(){n.accumulationDegree=0;var e=n.state.proportions,t=document.getElementById(n.id);if(null!=t){var a=t.getContext("2d");a.clearRect(0,0,t.width,t.height),a.fillStyle="#ccc";for(var r=q,i=0,l=250,o=150,s=0;s<e.length;s++){var c=e[s];if(!(c.proportion<=0)){var u=r-c.proportion*q;a.fillStyle=c.color,a.strokeStyle=c.color,a.beginPath(),a.arc(150,150,100,r,u,!0),a.fill(),i=360*c.proportion,n.accumulationDegree+=i;var m=n.calculatePosition(u,c.proportion,a);a.fillStyle=c.color,c.proportion<.5&&(a.beginPath(),a.moveTo(150,150),a.lineTo(l,o),a.lineTo(m.x,m.y),a.fill());var d=m.labelCoord;a.font="15px Arial",a.fillStyle="#000",a.fillText(c.label+" "+parseFloat(100*c.proportion).toFixed(2)+"%",d.x,d.y),l=m.x,o=m.y,r=u}}}},n.calculatePosition=function(e,t,a){var r=n.calculateCoordinate(e,n.accumulationDegree,100),i=t*q/2,l=360*t/2,o=n.calculateCoordinate(e-i,n.accumulationDegree-l,50);return Object(k.a)(Object(k.a)({},r),{},{labelCoord:o})},n.calculateCoordinate=function(e,t,a){var r=0,i=0,l=n.getQuadrant(t),o=Math.abs(a*Math.cos(e)),s=Math.abs(a*Math.sin(e));return 1==l?(r=150+o,i=150-s):2==l?(r=150-o,i=150-s):3==l?(r=150-o,i=150+s):4==l&&(r=150+o,i=150+s),{x:r,y:i}},n.getQuadrant=function(e){return e<=90?1:e<=180?2:e<=270?3:4},n.toggleDetail=function(){n.setState({showDetail:!n.state.showDetail})},n.proportionIsFixed=function(){var e=n.state.proportions,t=n.getPropsProportion();return n.sumValues(e)>=n.sumValues(t)},n.proportionIsEmpty=function(){var e=n.state.proportions,t=n.getPropsProportion();return 0==n.sumValues(t)||0==n.sumValues(e)},n.getPropsProportion=function(){var e=n.props.proportions;return e.sort((function(e,t){return t.proportion-e.proportion})),e},n.animate=function(){for(var e=n.getPropsProportion(),t=n.state.proportions,a=0;a<e.length;a++){var r=e[a];null==t[a]&&t.push({proportion:0,value:r.value,label:r.label,color:r.color}),t[a].proportion<r.proportion&&(t[a].proportion+=.005),t[a].proportion>=r.proportion&&(t[a].proportion=r.proportion)}n.setState({proportions:t}),0==n.proportionIsFixed()&&n.requestAnimation()},n.requestAnimation=function(){null!=n.timeoutId&&clearTimeout(n.timeoutId),n.timeoutId=setTimeout(n.animate,1)},n.resetProportion=function(){n.setState({proportions:[]})},n}return Object(s.a)(a,[{key:"sumValues",value:function(e){for(var t=0,a=0;a<e.length;a++){t+=e[a].proportion}return t}},{key:"componentDidMount",value:function(){this.requestAnimation(),this.updatePie()}},{key:"componentDidUpdate",value:function(){this.requestAnimation(),this.updatePie()}},{key:"render",value:function(){return r.a.createElement("div",{style:{marginBottom:"20px"}},r.a.createElement("h3",null,this.props.title?this.props.title:"Grafik"),r.a.createElement("div",{style:{height:"auto"},className:"columns"},r.a.createElement("div",{className:"column has-text-centered ",style:{overflowX:"scroll"}},this.proportionIsEmpty()?r.a.createElement("h2",{style:{height:300}},"Tidak ada data"):r.a.createElement("canvas",{id:this.id,className:"has-background-light",width:300,height:300})),r.a.createElement("div",{className:"column "},r.a.createElement(P,{style:{marginBottom:"10px"},onClick:this.toggleDetail,iconClassName:this.state.showDetail?"fas fa-angle-up":"fas fa-angle-down"},this.state.showDetail?"Close":"Show"," Detail"),this.state.showDetail?r.a.createElement(K,{proportions:this.state.proportions}):null)))}}]),a}(n.Component),K=function(e){return r.a.createElement("article",{className:"message"},r.a.createElement("div",{className:"message-body",style:{overflowX:"scroll"}},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"No"),r.a.createElement("th",null,"Warna"),r.a.createElement("th",null,"Keterangan"),r.a.createElement("th",null,"Nilai"),r.a.createElement("th",null,"Presentase"))),r.a.createElement("tbody",null,e.proportions.map((function(e,t){return r.a.createElement("tr",{key:"PIE_PROP_"+t},r.a.createElement("td",{style:{width:"20px"}},t+1),r.a.createElement("td",{style:{padding:"5px",width:"50px"}},r.a.createElement("div",{style:{width:"40px",height:"40px",backgroundColor:e.color}}),"                            "),r.a.createElement("td",null,e.label),r.a.createElement("td",null,e.value),r.a.createElement("td",null,parseFloat(100*e.proportion).toFixed(2),"%"))}))))))},W=function(){var e=V(),t={"Content-Type":"application/json"};return null!=e&&""!=e.toString().trim()&&(t.Authorization="Bearer "+e),t},V=function(){return J("kafila_api_token")},z=function(e){return console.log("setApiToken: ",e),Y("kafila_api_token",e)},Y=function(e,t,a){var n=new Date;n.setTime(n.getTime()+24*a*60*60*1e3);var r="expires="+n.toUTCString();document.cookie=e+"="+t+";"+r+";path=/"},J=function(e){for(var t=e+"=",a=decodeURIComponent(document.cookie).split(";"),n=0;n<a.length;n++){for(var r=a[n];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return""},H=a(31),Q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=null==t?{}:t;return new Promise((function(t,n){H.post(e,a,{headers:W()}).then((function(e){return e.data})).then((function(e){"00"==e.code?t(e):n(e)})).catch((function(e){console.error(e),n(e)}))}))},X=function e(){Object(o.a)(this,e),this.getStatistic=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t={filter:{fieldsFilter:{}}};null!=e&&(t.filter.fieldsFilter.departement_id=e);var a=h().concat("api/histories/statistic");return Q(a,t)}};X.instance=X.instance||new X;var $=a(42),Z=(a(75),function e(t){if(null==t||t.length<=1)return t;var a=new String(t),n=a.split("_");if(n.length>1){for(var r="",i=0;i<n.length;i++){r+=e(n[i])+" "}return r}var l=a.substring(0,1).toUpperCase();return l+=a.substring(1,a.length)}),ee=function(e){var t=e.headers,a=e.onButtonOrderClick;return r.a.createElement("thead",null,r.a.createElement("tr",null,t.map((function(e,t){var n=e.alias?e.alias:e.text;return r.a.createElement("th",{key:"TH_"+t},Z(n),e.withFilter?r.a.createElement("div",{className:"field has-addons"},r.a.createElement("div",{className:"control"},r.a.createElement(te,{type:"text",name:e.text})),r.a.createElement("div",{className:"control",style:{fontSize:"0.7em",backgroundColor:"#ccc"}},r.a.createElement("i",{sort:"asc",onClick:a,data:e.text,className:"fas fa-angle-up sort-button"}),r.a.createElement("i",{sort:"desc",onClick:a,data:e.text,className:"fas fa-angle-down sort-button"}))):null)}))))},te=function(e){var t=e.type?e.type:"text";return r.a.createElement("input",{className:"input form-filter",type:t,name:e.name,id:"input-form-"+e.name})},ae=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"buttons has-addons"},r.a.createElement("button",{type:"submit",className:"button is-info"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-search"})),r.a.createElement("span",null,"Apply Filter")),r.a.createElement("button",{type:"reset",className:"button is-danger"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-sync"})),r.a.createElement("span",null,"Reset Filter"))))},ne=function(e){var t="input input-form-field "+e.className,a=e.orientation?e.orientation:"horizontal",n=e.label?e.label:e.name;return r.a.createElement("div",{className:"field is-"+a},r.a.createElement("div",{className:"field-label is-normal"},r.a.createElement("label",{className:"label"},Z(n))),r.a.createElement("div",{className:"field-body"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},1==e.required?"textarea"==e.type?r.a.createElement("textarea",{required:!0,className:t+" textarea",id:"input-form-field-"+e.name,name:e.name}):r.a.createElement("input",{required:!0,type:e.type?e.type:"text",id:"input-form-field-"+e.name,name:e.name,className:t}):"textarea"==e.type?r.a.createElement("textarea",{className:t+" textarea",id:"input-form-field-"+e.name,name:e.name}):r.a.createElement("input",{type:e.type?e.type:"text",id:"input-form-field-"+e.name,name:e.name,className:t}),e.note?r.a.createElement("p",null,r.a.createElement("i",null,"Note: ",e.note)):null))))},re=function(e){var t=(null==e.options?[]:e.options).map((function(e,t){return r.a.createElement("option",{key:"select-option-"+t,value:e.value},e.text)})),a=e.label?e.label:e.name;return r.a.createElement("div",{className:"field is-horizontal"},r.a.createElement("div",{className:"field-label is-normal"},r.a.createElement("label",{className:"label"},Z(a))),r.a.createElement("div",{className:"field-body"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},1==e.required?r.a.createElement("select",{required:!0,id:"input-form-field-"+e.name,name:e.name,className:"input input-form-field"},t):r.a.createElement("select",{id:"input-form-field-"+e.name,name:e.name,className:"input input-form-field"},t)))))},ie=function(e){return r.a.createElement("div",{className:"field is-horizontal"},r.a.createElement("div",{className:"field-label is-normal"},r.a.createElement("label",{className:"label"},e.label?Z(e.label):"Label")),r.a.createElement("div",{className:"field-body"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},e.value,e.children))))},le=function(e){var t=e.submitText?e.submitText:"Submit",a=e.submitIconClassName?e.submitIconClassName:"fas fa-save",n=e.submitButtonClassName?"button "+e.submitButtonClassName:"button is-link";return r.a.createElement("div",{className:"field is-horizontal"},r.a.createElement("div",{className:"field-label is-normal"}),r.a.createElement("div",{className:"field-body"},r.a.createElement("div",{className:"field"},r.a.createElement("button",{className:n,type:"submit",style:{marginRight:"10px"}},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:a})),r.a.createElement("span",null,t)),1==e.withReset?r.a.createElement("button",{className:"button is-danger",type:"reset"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-sync"})),r.a.createElement("span",null,"Reset")):null)))},oe=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).getDiscussionTopicProportion=function(){if(null==n.statisticData)return null;var e=n.statisticData.statistic,t=e.topic_count;return[{proportion:e.topic_closed_count/t,label:"Closed",color:"rgb(180,230,30)",value:e.topic_closed_count},{proportion:e.topic_not_closed_count/t,label:"Not Closed",color:"rgb(255,170,200)",value:e.topic_not_closed_count}]},n.getIssueProportion=function(){if(null==n.statisticData)return null;var e=n.statisticData.statistic,t=e.issue_count;return[{proportion:e.issue_closed_count/t,label:"Closed",color:"rgb(180,230,30)",value:e.issue_closed_count},{proportion:e.issue_not_closed_count/t,label:"Not Closed",color:"rgb(255,170,200)",value:e.issue_not_closed_count}]},n.state=Object(k.a)(Object(k.a)({},n.state),{},{errorLoadingStatistic:!1}),n.pieChartChildTopic=r.a.createRef(),n.pieChartChildIssue=r.a.createRef(),n.historiesService=X.instance,n.statisticData=null,n.departementList=[],n.loadStatisticWithDepartement=function(e){e.preventDefault();var t=document.getElementById("input-form-field-departement").value;"all"!=t?n.loadStatistic(t):n.loadStatistic(null)},n.statisticLoaded=function(e){n.statisticData=e,n.pieChartChildTopic.current&&n.pieChartChildTopic.current.resetProportion(),n.pieChartChildIssue.current&&n.pieChartChildIssue.current.resetProportion(),n.isLoggedUserAdmin()&&(n.departementList=e.statistic.departements,n.props.storeApplicationData("departements",n.departementList))},n.statisticFailedToLoad=function(e){console.error(e),n.setState({errorLoadingStatistic:!0})},n.loadStatistic=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;n.setState({errorLoadingStatistic:!1}),n.commonAjax(n.historiesService.getStatistic,e,n.statisticLoaded,n.statisticFailedToLoad)},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){null==this.state.statisticData&&this.loadStatistic()}},{key:"render",value:function(){var e=this;if(this.isLoggedUserNull())return null;if(this.state.errorLoadingStatistic)return r.a.createElement(U,{title:"Statistik"},r.a.createElement(se,{onClick:this.loadStatistic}));var t=this.getDiscussionTopicProportion(),a=this.getIssueProportion();if(null==t||null==a)return r.a.createElement(U,{title:"Statistik"},r.a.createElement("p",null,"Please Wait"));var n=this.departementList.map((function(e){return{value:e.id,text:e.name}})),i=[{value:"all",text:"-- Semua --"}].concat(Object($.a)(n));return r.a.createElement(U,{title:"Statistik"},r.a.createElement("div",{id:"pie_chart_discussion_topics"},r.a.createElement(G,{title:"Tema Pembahasan",ref:this.pieChartChildTopic,proportions:t}),r.a.createElement(G,{title:"Aduan",ref:this.pieChartChildIssue,proportions:a}),r.a.createElement("form",{style:{marginTop:"20px"},onSubmit:this.isLoggedUserAdmin()?function(t){return e.loadStatisticWithDepartement(t)}:function(t){t.preventDefault(),e.loadStatistic(null)}},this.isLoggedUserAdmin()?r.a.createElement(re,{name:"departement",options:i}):null,r.a.createElement(ie,{label:"updated_at",value:new Date(this.statisticData.date).toString()}),r.a.createElement(le,{submitButtonClassName:"no",submitIconClassName:"fas fa-sync",submitText:"Reload"}))))}}]),a}(j),se=function(e){return r.a.createElement(L,{enableHidden:!1,className:"is-danger",header:"Gagal Memuat Data"},r.a.createElement(P,{onClick:e.onClick,iconClassName:"fas fa-sync"},"Muat Ulang"))},ce=Object(d.f)(Object(D.b)((function(e){return{loggedUser:e.userState.loggedUser,loginStatus:e.userState.loginStatus,applicationData:e.applicationState.applicationData}}),(function(e){return{storeApplicationData:function(t,a){return e(S(t,a))}}}))(oe)),ue=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state=Object(k.a)({},n.state),n}return Object(s.a)(a,[{key:"componentWillMount",value:function(){this.validateLoginStatus()}},{key:"componentDidMount",value:function(){document.title="Dashboard"}},{key:"render",value:function(){return this.isLoggedUserNull()?null:r.a.createElement("div",null,r.a.createElement(w,null,"Dashboard"),r.a.createElement(U,{title:"Welcome"},r.a.createElement("p",null,this.getLoggedUser().display_name),r.a.createElement("p",null,"Bidang ",this.props.loggedUser.departement.name)),r.a.createElement(ce,{app:this.props.app}))}}]),a}(j),me=Object(d.f)(Object(D.b)((function(e){return{loggedUser:e.userState.loggedUser,loginStatus:e.userState.loginStatus}}),(function(e){return{}}))(ue)),de=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){return Object(o.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(){(this.isLoggedUserNull()||"admin"!=this.props.loggedUser.role)&&this.backToLogin()}}]),a}(j),pe=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){return Object(o.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"componentDidMount",value:function(){(this.isLoggedUserNull()||"admin"!=this.getLoggedUser().role)&&this.backToLogin(),document.title="Management"}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(w,null,"Master Data Menu"),r.a.createElement(U,{title:"Menu"},r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column is-one-third"},r.a.createElement("div",{className:"box has-text-centered"},r.a.createElement("p",null,r.a.createElement("i",{style:{fontSize:"50px"},className:"fas fa-object-group"})),r.a.createElement(C.b,{to:"/management/departements"},"Departements"))),r.a.createElement("div",{className:"column is-one-third"},r.a.createElement("div",{className:"box has-text-centered"},r.a.createElement("p",null,r.a.createElement("i",{style:{fontSize:"50px"},className:"fas fa-users"})),r.a.createElement(C.b,{to:"/management/users"},"Users"))))))}}]),a}(de),fe=Object(d.f)(Object(D.b)((function(e){return{loggedUser:e.userState.loggedUser,loginStatus:e.userState.loginStatus}}))(pe)),he=function(){function e(){var t=this;Object(o.a)(this,e),this.setUsersData=function(e){t.usersData=e},this.storeUser=function(e){var t={code:"user",userModel:e},a=h().concat("api/masterdata/store");return Q(a,t)},this.storeIssue=function(e){var t={code:"issue",issue:e},a=h().concat("api/masterdata/store");return Q(a,t)},this.viewUser=function(e){var t=h().concat("api/masterdata/view/"+e);return Q(t,{code:"user"})},this.userList=function(e){return t.list({code:"user",filter:e})},this.viewIssue=function(e){var t=h().concat("api/masterdata/view/"+e);return Q(t,{code:"issue"})},this.issueList=function(e){return t.list({code:"issue",filter:e})},this.storeDepartement=function(e){var t={code:"departement",departement:e},a=h().concat("api/masterdata/store");return Q(a,t)},this.viewDepartement=function(e){var t=h().concat("api/masterdata/view/"+e);return Q(t,{code:"departement"})},this.deleteRecord=function(e){var t=h().concat("api/masterdata/delete/"+e.id);return Q(t,{code:e.code})},this.departementList=function(e){return t.list({code:"departement",filter:e})},this.list=function(e){var t={code:e.code,filter:e.filter},a=h().concat("api/masterdata/list");return Q(a,t)},this.usersData=null,this.departementsData=null}return Object(s.a)(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}}]),e}();he.instance=he.instance||new he;var ge=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).onClick=function(e){n.props.onClick&&n.props.onClick(e)},n}return Object(s.a)(a,[{key:"render",value:function(){for(var e=this,t=Ee(this.props.limit,this.props.totalData,this.props.activeIndex),a=[],n=0;n<t.length;n++){var i=t[n];a.push({index:i})}return r.a.createElement("div",{className:"buttons",style:{marginTop:"5px",marginBottom:"5px"}},a.map((function(t,a){var n=t.index==e.props.activeIndex?"button is-link":"button is-light";return r.a.createElement("a",{key:"nav_btn_"+a,onClick:function(){e.onClick(t.index)},className:n},t.index)})))}}]),a}(n.Component),Ee=function(e,t,a){var n=[],r=Math.ceil(t/e),i=a-2,l=a+2;r>1&&n.push(1);for(var o=i;o<=l;o++)o>1&&o<=r&&n.push(o);return l<r&&n.push(r),n},ve=ge,be=a(43),Ne=a(15),ye=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e,n,i){var l,s;return Object(o.a)(this,a),(s=t.call(this,e)).loadRecords=function(){},s.readInputForm=function(){var e=document.getElementById("list-form");if(null!=e){var t=e.getElementsByClassName("form-filter");s.fieldsFilter={};for(var a=0;a<t.length;a++){var n=t[a];null!=n.value&&""!=n.value&&(s.fieldsFilter[n.name]=n.value)}}},s.masterDataServce=he.instance,s.code=i,s.name=n,s.page=1,s.limit=5,s.count=0,s.orderBy="id",s.orderType="asc",s.fieldsFilter={},s.recordData=null,s.successLoaded=function(e){s.recordData=e},s.errorLoaded=function(e){console.error("Error loading resource: ",e)},s.getRecordDataStored=function(){return null},s.loadRecordByPage=function(e){Object(be.a)((l=Object(c.a)(s),Object(Ne.a)(a.prototype)),"page",e,l,!0),s.loadRecords()},s.onButtonOrderClick=function(e){e.preventDefault(),s.orderBy=e.target.getAttribute("data"),s.orderType=e.target.getAttribute("sort"),s.loadRecords()},s.filter=function(e){s.page=1,s.loadRecords()},s.delete=function(e){var t=Object(c.a)(s);s.showConfirmationDanger("Delete "+s.name+"?").then((function(a){a&&t.deleteRecord(e)}))},s.onSuccessDelete=function(e){s.showConfirmation("Record has been deleted").then(s.loadRecords)},s.onErrorDelete=function(e){s.showError("Error Delete Record")},s.deleteRecord=function(e){s.commonAjax(s.masterDataServce.deleteRecord,{code:s.code,id:e},s.onSuccessDelete,s.onErrorDelete)},s.linkToFormCreate=function(e,t){return r.a.createElement(C.b,{to:e,className:"button is-primary",style:{marginBottom:"10px"}},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-plus"})),r.a.createElement("span",null,t))},s.linkToFormEdit=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return r.a.createElement(C.b,{to:e,className:"button is-warning is-small"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-edit"})),t?r.a.createElement("span",null,"Edit"):null)},s.buttonsModifyAndDelete=function(e,t){return r.a.createElement("div",{className:"buttons has-addons"},s.linkToFormEdit(e,!1),s.buttonDeleteRecord(t,!1))},s.buttonDeleteRecord=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return r.a.createElement("a",{onClick:function(){return s.delete(e)},className:"button is-danger is-small"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-trash"})),t?r.a.createElement("span",null,"Delete"):null)},s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){document.title=this.name+" Management",this.loadRecords()}}]),a}(de),Se=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.cells?this.props.cells:[];return r.a.createElement("div",{className:"columns"},e.map((function(e,t){return r.a.createElement("div",{key:"column-"+t,className:"column"},e)})))}}]),a}(n.Component),De=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e,"User","user")).loadRecords=function(){n.readInputForm();var e={page:n.page,limit:n.limit,orderBy:n.orderBy,orderType:n.orderType,fieldsFilter:n.fieldsFilter};n.commonAjax(n.masterDataService.userList,e,n.successLoaded,n.errorLoaded)},n.state={showForm:!1},n.departementList=[],n.masterDataService=he.instance,n.populateDefaultInputs=function(){var e=null!=n.recordData?n.recordData:null;if(null!=e){var t=e.filter.fieldsFilter;for(var a in t)if(t.hasOwnProperty(a)){var r=t[a];try{document.getElementById("input-form-"+a).value=r}catch(i){}}}},n}return Object(s.a)(a,[{key:"createNavButton",value:function(){var e=null!=this.recordData?this.recordData:null;return null==e?r.a.createElement(r.a.Fragment,null):r.a.createElement(ve,{onClick:this.loadRecordByPage,limit:this.limit,totalData:e.count,activeIndex:this.page})}},{key:"render",value:function(){var e=this,t=this.createNavButton(),a=null!=this.recordData?this.recordData:null,n=null==a||null==a.result_list?[]:a.result_list;return r.a.createElement("div",null,r.a.createElement(w,null,"Users Management"),r.a.createElement(U,{title:"Users"},this.linkToFormCreate("/management/users/create","Tambah Data"),r.a.createElement("form",{id:"list-form",onSubmit:function(t){t.preventDefault(),e.filter(t.target)}},r.a.createElement(Se,{cells:[ae(),t]}),r.a.createElement("div",{style:{overflow:"scroll"}},r.a.createElement("table",{className:"table"},r.a.createElement(Oe,{onButtonOrderClick:this.onButtonOrderClick,headers:[{text:"No"},{text:"id",withFilter:!0},{text:"email",withFilter:!0},{text:"display_name",withFilter:!0},{text:"role",withFilter:!0},{text:"departement",withFilter:!0},{text:"action"}]}),r.a.createElement("tbody",null,n.map((function(t,a){var n=(e.page-1)*e.limit;return r.a.createElement("tr",{key:"record-user-"+a},r.a.createElement("td",null,n+a+1),r.a.createElement("td",null,t.id),r.a.createElement("td",null,t.email),r.a.createElement("td",null,t.display_name),r.a.createElement("td",null,t.role),r.a.createElement("td",null,t.departement?t.departement.name:"-"),r.a.createElement("td",null,e.buttonsModifyAndDelete("/management/users/"+t.id,t.id)))}))))))))}}]),a}(ye),Oe=function(e){return ee(e)},ke=Object(d.f)(Object(D.b)((function(e){return{loggedUser:e.userState.loggedUser,loginStatus:e.userState.loginStatus}}))(De)),Ce=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e,"Departement","departement")).loadRecords=function(){n.readInputForm();var e={page:n.page,limit:n.limit,orderBy:n.orderBy,orderType:n.orderType,fieldsFilter:n.fieldsFilter};n.commonAjax(n.masterDataService.departementList,e,n.successLoaded,n.errorLoaded)},n.state={},n.masterDataService=he.instance,n.populateDefaultInputs=function(){var e=null!=n.recordData?n.recordData:null;if(null!=e){var t=e.filter.fieldsFilter;for(var a in t)if(t.hasOwnProperty(a)){var r=t[a];try{document.getElementById("input-form-"+a).value=r}catch(i){}}}},n.onSuccessDelete=function(e){n.removeDataFromStore(e.record_id),n.showConfirmation("Record has been deleted").then(n.loadRecords)},n.removeDataFromStore=function(e){var t=n.props.applicationData.departements;if(null!=t&&null!=t.find((function(t){return t.id==e}))){for(var a=0;a<t.length;a++){if(t[a].id==e){t.splice(a,1);break}}n.props.storeApplicationData("departements",t)}},n}return Object(s.a)(a,[{key:"createNavButton",value:function(){var e=null!=this.recordData?this.recordData:null;return null==e?r.a.createElement(r.a.Fragment,null):r.a.createElement(ve,{onClick:this.loadRecordByPage,limit:this.limit,totalData:e.count,activeIndex:this.page})}},{key:"render",value:function(){var e=this,t=this.createNavButton(),a=null!=this.recordData?this.recordData:null,n=null==a||null==a.result_list?[]:a.result_list;return r.a.createElement("div",null,r.a.createElement(w,null,"Departements Management"),r.a.createElement(U,{title:"Departement"},this.linkToFormCreate("/management/departements/create","Tambah Data"),r.a.createElement("form",{id:"list-form",onSubmit:function(t){t.preventDefault(),e.filter(t.target)}},r.a.createElement(Se,{cells:[ae(),t]}),r.a.createElement("div",{style:{overflow:"scroll"}},r.a.createElement("table",{className:"table"},r.a.createElement(je,{onButtonOrderClick:this.onButtonOrderClick,headers:[{text:"No"},{text:"id",withFilter:!0},{text:"name",withFilter:!0},{text:"description",withFilter:!0},{text:"action"}]}),r.a.createElement("tbody",null,n.map((function(t,a){var n=(e.page-1)*e.limit;return r.a.createElement("tr",{key:"record_"+a},r.a.createElement("td",null,n+a+1),r.a.createElement("td",null,t.id),r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.description),r.a.createElement("td",null,e.buttonsModifyAndDelete("/management/departements/"+t.id,t.id)))}))))))))}}]),a}(ye),je=function(e){return ee(e)},we=Object(d.f)(Object(D.b)((function(e){return{loggedUser:e.userState.loggedUser,loginStatus:e.userState.loginStatus,applicationData:e.applicationState.applicationData}}),(function(e){return{storeApplicationData:function(t,a){return e(S(t,a))}}}))(Ce)),Ie=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={recordNotFound:!1,isLoadingRecord:!0,departementList:[]},n.masterDataService=he.instance,n.onSubmit=function(e){e.preventDefault();var t=e.target,a=Object(c.a)(n);n.showConfirmation("Save User?").then((function(e){e&&a.storeRecord(t)}))},n.storeRecord=function(e){for(var t=e.getElementsByClassName("input-form-field"),a={},r=0;r<t.length;r++){var i=t[r];if(null!=i.value&&""!=i.value){var l=i.name;"departement"==l&&(l="departement_id"),a[l]=i.value}}null!=n.getRecordId()&&(a.id=n.getRecordId()),n.store(a),console.debug("USER: ",a)},n.getRecordId=function(){return n.props.match.params.id},n.departementListLoaded=function(e){n.setState({departementList:e.result_list}),null!=n.getRecordId()&&n.loadRecord(),console.log("departementListLoaded: ",e)},n.recordSaved=function(e){n.showInfo("SUCCESS SAVING RECORD"),null==n.getRecordId()&&(n.handleSuccessGetRecord(e),n.props.history.push("/management/users/"+e.user.id))},n.recordFailedToSave=function(e){n.showError("FAILED SAVING RECORD")},n.store=function(e){n.commonAjax(n.masterDataService.storeUser,e,n.recordSaved,n.recordFailedToSave)},n.loadDepartements=function(){n.commonAjax(n.masterDataService.departementList,{},n.departementListLoaded,(function(e){}))},n.handleSuccessGetRecord=function(e){n.setState({isLoadingRecord:!1});for(var t=document.getElementById("form-management").getElementsByClassName("input-form-field"),a=0;a<t.length;a++){var r=t[a];"departement"==r.name?r.value=e.user.departement_id:"password"==r.name?r.value=null:r.value=e.user[r.name]}},n.handleErrorGetRecord=function(e){n.setState({recordNotFound:!0})},n.loadRecord=function(){n.commonAjax(n.masterDataService.viewUser,n.getRecordId(),n.handleSuccessGetRecord,n.handleErrorGetRecord)},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.loadDepartements(),document.title="User Form"}},{key:"render",value:function(){if(this.state.recordNotFound)return r.a.createElement(L,{className:"is-danger",body:"Record Not Found"});if(null!=this.getRecordId()&&this.state.isLoadingRecord)return r.a.createElement("div",null,r.a.createElement(w,null,"Users Management"),r.a.createElement("h3",null,"Please Wait..."));var e=r.a.createElement(r.a.Fragment,null,r.a.createElement(C.b,{to:"/management/users"},"Users"),"\xa0",r.a.createElement("i",{className:"fas fa-angle-right"}),"\xa0Form");return r.a.createElement("div",null,r.a.createElement(w,null,"Users Management"),r.a.createElement(U,{title:e},r.a.createElement("form",{onSubmit:this.onSubmit,id:"form-management"},r.a.createElement(ne,{label:"Email",name:"email",required:!0,type:"email"}),r.a.createElement(ne,{label:"Username",name:"name",required:!0}),r.a.createElement(ne,{label:"Display Name",name:"display_name",required:!0}),r.a.createElement(ne,{label:"Password",name:"password",note:"Kosongkan password apabila tidak ingin diubah"}),r.a.createElement(re,{label:"Departement",options:this.state.departementList.map((function(e){return{value:e.id,text:e.name}})),name:"departement",required:!0}),r.a.createElement(le,{submitText:null==this.getRecordId()?"Create":"Update",withReset:null==this.getRecordId()}))))}}]),a}(j),xe=Object(d.f)(Object(D.b)((function(e){return{loggedUser:e.userState.loggedUser,loginStatus:e.userState.loginStatus}}))(Ie)),Te=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={recordNotFound:!1,isLoadingRecord:!0},n.masterDataService=he.instance,n.onSubmit=function(e){e.preventDefault();var t=e.target,a=Object(c.a)(n);n.showConfirmation("Save Data?").then((function(e){e&&a.storeDepartement(t)}))},n.storeDepartement=function(e){for(var t=e.getElementsByClassName("input-form-field"),a={},r=0;r<t.length;r++){var i=t[r];if(null!=i.value&&""!=i.value)a[i.name]=i.value}null!=n.getRecordId()&&(a.id=n.getRecordId()),n.store(a),console.debug("Departement: ",a)},n.getRecordId=function(){return n.props.match.params.id},n.updateLocallyStoredDepartements=function(e){var t=n.props.applicationData.departements;if(null!=t){if(null!=t.find((function(t){return t.id==e.id})))for(var a=0;a<t.length;a++){if(t[a].id==e.id){t[a]=e;break}}else t.push(e);n.props.storeApplicationData("departements",t)}},n.recordSaved=function(e){n.showInfo("SUCCESS SAVING RECORD"),n.updateLocallyStoredDepartements(e.departement),null==n.getRecordId()&&(n.handleSuccessGetRecord(e),n.props.history.push("/management/departements/"+e.departement.id))},n.recordFailedToSave=function(e){n.showError("FAILED SAVING RECORD")},n.store=function(e){n.commonAjax(n.masterDataService.storeDepartement,e,n.recordSaved,n.recordFailedToSave)},n.handleSuccessGetRecord=function(e){n.setState({isLoadingRecord:!1});for(var t=document.getElementById("form-management").getElementsByClassName("input-form-field"),a=0;a<t.length;a++){var r=t[a];r.value=e.departement[r.name]}},n.handleErrorGetRecord=function(e){n.setState({recordNotFound:!0})},n.loadRecord=function(){n.commonAjax(n.masterDataService.viewDepartement,n.getRecordId(),n.handleSuccessGetRecord,n.handleErrorGetRecord)},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){document.title="Departement Form",null!=this.getRecordId()&&this.loadRecord()}},{key:"render",value:function(){if(this.state.recordNotFound)return r.a.createElement(L,{className:"is-danger",body:"Record Not Found"});if(null!=this.getRecordId()&&this.state.isLoadingRecord)return r.a.createElement("div",null,r.a.createElement(w,null,"Departements Management"),r.a.createElement("h3",null,"Please Wait..."));var e=r.a.createElement(r.a.Fragment,null,r.a.createElement(C.b,{to:"/management/departements"},"Departements"),"\xa0",r.a.createElement("i",{className:"fas fa-angle-right"}),"\xa0Form");return r.a.createElement("div",null,r.a.createElement(w,null,"Departements Management"),r.a.createElement(U,{title:e},r.a.createElement("form",{onSubmit:this.onSubmit,id:"form-management"},r.a.createElement(ne,{label:"Nama",name:"name",required:!0}),r.a.createElement(ne,{label:"Deskripsi",name:"description",type:"textarea",required:!0}),r.a.createElement(le,{submitText:null==this.getRecordId()?"Create":"Update",withReset:null==this.getRecordId()}))))}}]),a}(j),Re=Object(d.f)(Object(D.b)((function(e){return{loggedUser:e.userState.loggedUser,loginStatus:e.userState.loginStatus,applicationData:e.applicationState.applicationData}}),(function(e){return{storeApplicationData:function(t,a){return e(S(t,a))}}}))(Te)),_e=function e(){Object(o.a)(this,e),this.list=function(e){var t={code:"notes",filter:e},a=h().concat("api/notes/list");return Q(a,t)},this.store=function(e){var t={meeting_note:e},a=h().concat("api/notes/store");return Q(a,t)},this.view=function(e){var t=h().concat("api/notes/view/"+e);return Q(t,{})}};_e.instance=_e.instance||new _e;var Le=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).onYes=function(e){n.props.onYes&&n.props.onYes(e)},n.onNo=function(e){n.props.onNo&&n.props.onNo(e)},n.onClose=function(e){n.props.onClose&&n.props.onClose(e)},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){try{document.getElementById("button-alert-yes").focus()}catch(e){}}},{key:"render",value:function(){var e=this.props.title?this.props.title:"Info",t=(this.props.yesOnly,"modal-card-head has-background-link");return 1==this.props.isError&&(t="modal-card-head has-background-danger"),r.a.createElement(r.a.Fragment,null,r.a.createElement(Fe,null,r.a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},r.a.createElement("div",{className:"modal-card"},r.a.createElement("header",{className:t},r.a.createElement("p",{className:"modal-card-title has-text-white"},e)),r.a.createElement("section",{className:"modal-card-body"},this.props.children),r.a.createElement("footer",{className:"modal-card-foot"},r.a.createElement("div",{style:{margin:"auto"}},r.a.createElement("button",{id:"button-alert-yes",type:"submit",onClick:this.onYes,className:this.props.yesOnly||this.props.isError?"button":"button is-link"},"Yes"),this.props.yesOnly?null:r.a.createElement("button",{onClick:this.onNo,className:"button"},"No")))))))}}]),a}(n.Component),Fe=function(e){return r.a.createElement("div",{className:"modal is-active has-text-centered",style:{backgroundColor:"rgba(100,100,100,0.7)"}},r.a.createElement("div",{className:"modal-background"}),e.children)},Ae=Le,Ue=function e(){Object(o.a)(this,e),this.store=function(e){var t={discussion_topic:e},a=h().concat("api/discussiontopics/store");return Q(a,t)},this.list=function(e){var t={code:"discussion_topic",filter:e},a=h().concat("api/discussiontopics/list");return Q(a,t)},this.view=function(e){var t=h().concat("api/discussiontopics/view/"+e);return Q(t,{})},this.storeAction=function(e){var t={discussion_action:e},a=h().concat("api/discussiontopics/action");return Q(a,t)}};Ue.instance=Ue.instance||new Ue;var Be="form-input-meeting-note",Pe="discussion_topic_",Me=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={recordNotFound:!1,isLoadingRecord:!0,discussionTopicCount:[1],showFormDiscussionTopicInEditMode:!1},n.discussionTopicService=Ue.instance,n.form_temporary_inputs={},n.meetingNote={discussion_topics:[]},n.isSubmitting=!1,n.meetingNoteService=_e.instance,n.getRecordId=function(){return n.props.match.params.id},n.getMaxDiscussionTopicID=function(){for(var e=n.state.discussionTopicCount,t=0,a=0;a<e.length;a++){var r=e[a];r>t&&(t=r)}return t},n.addDiscussionTopic=function(){if(null==n.getRecordId()||null==n.meetingNote){var e=n.state.discussionTopicCount;n.saveFormTemporaryInputs(),e.push(n.getMaxDiscussionTopicID()+1),n.setState({discussionTopicCount:e})}else n.setState({showFormDiscussionTopicInEditMode:!0})},n.isDiscussionTopicClosed=function(e){if(null==n.meetingNote||null==n.meetingNote.discussion_topics)return!1;for(var t=0;t<n.meetingNote.discussion_topics.length;t++){var a=n.meetingNote.discussion_topics[t];if(a.id==e&&a.is_closed)return!0}return!1},n.removeDiscussionTopic=function(e){n.saveFormTemporaryInputs();var t=Object(c.a)(n);n.showConfirmationDanger("Remove discussion topic ("+e+")? ").then((function(a){a&&t.doRemoveDiscussionTopic(e)}))},n.doRemoveDiscussionTopic=function(e){for(var t=n.state.discussionTopicCount,a=null,r=0;r<t.length;r++){if(t[r]==e){a=r;break}}null!=a&&(t.splice(a,1),n.setState({discussionTopicCount:t}),n.setFormTemporaryInputs())},n.setFormTemporaryInputs=function(){console.debug("setTempDiscussionTopicValues: ",n.form_temporary_inputs);var e=document.getElementById(Be);if(null!=e)for(var t=e.getElementsByClassName("input-form-field"),a=0;a<t.length;a++){var r=t[a];null!=n.form_temporary_inputs[r.name]?r.value=n.form_temporary_inputs[r.name]:r.value=null,null!=n.getRecordId()&&r.setAttribute("disabled","disabled")}},n.saveFormTemporaryInputs=function(){n.form_temporary_inputs={};for(var e=document.getElementById(Be).getElementsByClassName("input-form-field"),t=0;t<e.length;t++){var a=e[t];null!=a.value&&""!=a.value&&(n.form_temporary_inputs[a.name]=a.value)}console.debug("SAVED TEMP: ",n.form_temporary_inputs)},n.onSubmit=function(e){if(e.preventDefault(),null==n.getRecordId()){n.saveFormTemporaryInputs(),n.isSubmitting=!0;var t=e.target,a=Object(c.a)(n);n.showConfirmation("Submit Data?").then((function(e){e&&a.fillDataAndStore(t),a.isSubmitting=!1}))}},n.onSubmitDiscussionTopic=function(e){e.preventDefault();var t=e.target;if(window.confirm("Submit Data?")&&null!=n.meetingNote){for(var a=t.getElementsByClassName("input-form-field"),r={note_id:n.meetingNote.id},i=0;i<a.length;i++){var l=a[i];r[l.name]=l.value}console.debug("SUBMIT:",r),n.storeDiscussionTopic(r)}},n.fillDataAndStore=function(e){var t=e.getElementsByClassName("input-form-field");n.meetingNote={discussion_topics:[]};for(var a=-1,r=-1,i=0;i<t.length;i++){var l=t[i],o=l.name;if(null!=l.value&&""!=l.value)if(o.startsWith(Pe)){var s=Ge(o);s.index!=a&&(n.meetingNote.discussion_topics.push({}),a=s.index,r++),n.meetingNote.discussion_topics[r][s.name]=l.value}else n.meetingNote[o]=l.value}null!=n.getRecordId()&&(n.meetingNote.id=n.getRecordId()),console.debug("meetingNote: ",n.meetingNote),n.storeMeetingNote()},n.recordSaved=function(e){n.showInfo("SUCCESS");try{null==n.getRecordId()&&(n.props.history.push("/meetingnote/"+e.meeting_note.id),n.handleSuccessGetRecord(e))}catch(t){console.error(t)}},n.handleErrorSubmit=function(e){n.showError("handleErrorSubmit: "+e)},n.handleErrorGetRecord=function(e){n.setState({recordNotFound:!0})},n.handleSuccessGetRecord=function(e){n.meetingNote=e.meeting_note;for(var t=n.meetingNote.discussion_topics,a=[],r=0;r<t.length;r++){var i=t[r];a.push(i.id)}for(var l in n.form_temporary_inputs={},n.meetingNote)if(n.meetingNote.hasOwnProperty(l)){var o=n.meetingNote[l];if("discussion_topics"==l)continue;n.form_temporary_inputs[l]=o}for(var s=0;s<n.meetingNote.discussion_topics.length;s++){var c=n.meetingNote.discussion_topics[s];for(var u in c)if(c.hasOwnProperty(u)){var m=c[u];n.form_temporary_inputs[Pe+c.id+"_"+u]=m}}n.setState({discussionTopicCount:a,isLoadingRecord:!1})},n.enableInputs=function(){var e=document.getElementById(Be);if(null!=e){for(var t=e.getElementsByClassName("input-form-field"),a=0;a<t.length;a++){t[a].removeAttribute("disabled")}0==n.isSubmitting&&e.reset()}},n.discussionTopicSaved=function(e){alert("SUCCESS"),n.setState({showFormDiscussionTopicInEditMode:!1}),n.loadRecord()},n.handleErrorSubmitDiscussionTopic=function(e){alert("Error Update Discussion Topic: "+e)},n.storeDiscussionTopic=function(e){n.commonAjax(n.discussionTopicService.store,e,n.discussionTopicSaved,n.handleErrorSubmitDiscussionTopic)},n.storeMeetingNote=function(){n.commonAjax(n.meetingNoteService.store,n.meetingNote,n.recordSaved,n.handleErrorSubmit)},n.loadRecord=function(){n.commonAjax(n.meetingNoteService.view,n.getRecordId(),n.handleSuccessGetRecord,n.handleErrorGetRecord)},n}return Object(s.a)(a,[{key:"componentWillMount",value:function(){this.validateLoginStatus()}},{key:"componentDidMount",value:function(){document.title="Notulensi",null!=this.getRecordId()&&this.loadRecord()}},{key:"componentDidUpdate",value:function(){this.validateLoginStatus(),null==this.getRecordId()&&this.enableInputs(),null==this.getRecordId()&&null!=this.meetingNote&&(this.meetingNote=null,this.form_temporary_inputs={},this.setState({discussionTopicCount:[1]})),this.setFormTemporaryInputs()}},{key:"render",value:function(){var e=this;if(this.isLoggedUserNull())return null;var t=this.title("Notulensi Rapat");if(this.state.recordNotFound)return r.a.createElement("div",null,t,r.a.createElement(L,{className:"is-danger",body:"Record Not Found"}));if(null!=this.getRecordId()&&this.state.isLoadingRecord)return r.a.createElement("div",null,t,r.a.createElement("h3",null,"Please Wait..."));var a="";a=null!=this.meetingNote&&null!=this.meetingNote.user?this.meetingNote.user.display_name:this.getLoggedUser().display_name;var n=r.a.createElement(r.a.Fragment,null,r.a.createElement(C.b,{to:"/discussiontopics"},"Tema Pembahasan"),"\xa0",r.a.createElement("i",{className:"fas fa-angle-right"}),"\xa0 Form");return r.a.createElement("div",null,t,this.state.showFormDiscussionTopicInEditMode?r.a.createElement(qe,{onSubmit:this.onSubmitDiscussionTopic,onClose:function(t){return e.setState({showFormDiscussionTopicInEditMode:!1})}}):null,r.a.createElement("form",{id:Be,onSubmit:this.onSubmit},r.a.createElement(U,{title:n},null!=this.getRecordId()&&null!=this.meetingNote?r.a.createElement(Je,{meetingNote:this.meetingNote}):null,r.a.createElement(Ye,{required:!0,label:"Tanggal",name:"date",type:"date"}),r.a.createElement(Ye,{required:!0,label:"Tempat",name:"place"}),r.a.createElement(ie,{label:"Tema Pembahasan"},r.a.createElement("span",{className:"tag is-dark"},r.a.createElement("b",null,this.state.discussionTopicCount.length))),r.a.createElement(ie,{label:"Notulis"},a)),this.state.discussionTopicCount.map((function(t,a){var n=e.isDiscussionTopicClosed(t),i="Tema Pembahasan #"+(a+1);return r.a.createElement(U,{title:i,key:"disc_topic_field_"+a},n?r.a.createElement("span",{className:"tag is-primary"},r.a.createElement("i",{className:"fas fa-check"}),"\xa0Closed"):null,null==e.getRecordId()&&e.state.discussionTopicCount.length>1?r.a.createElement(Ke,{id:t,removeDiscussionTopic:e.removeDiscussionTopic}):null,r.a.createElement(Ye,{className:"discussion-topic",required:!0,label:"Pembahasan",name:Pe+t+"_content",type:"textarea"}),r.a.createElement(Ye,{className:"discussion-topic",required:!0,label:"Keputusan",name:Pe+t+"_decision",type:"textarea"}),r.a.createElement(Ye,{className:"discussion-topic",required:!0,label:"Deadline",name:Pe+t+"_deadline_date",type:"date"}),r.a.createElement(Ye,{className:"discussion-topic",required:!0,label:"Penganggung Jawab",name:Pe+t+"_person_in_charge"}),null!=e.getRecordId()?r.a.createElement(ze,{id:t}):null)})),r.a.createElement(Ve,{addDiscussionTopic:this.addDiscussionTopic}),null==this.getRecordId()?r.a.createElement(U,{title:"Action"},r.a.createElement(le,{submitText:"Create",withReset:!0})):null))}}]),a}(j),qe=function(e){return r.a.createElement(Fe,null,r.a.createElement("div",{className:"container"},r.a.createElement(U,{title:"Tambah Tema Pembahasan",headerIconClassName:"fas fa-times",headerIconOnClick:e.onClose},r.a.createElement("form",{onSubmit:e.onSubmit},r.a.createElement(Ye,{className:"discussion-topic",required:!0,label:"Pembahasan",name:"content",type:"textarea"}),r.a.createElement(Ye,{className:"discussion-topic",required:!0,label:"Keputusan",name:"decision",type:"textarea"}),r.a.createElement(Ye,{className:"discussion-topic",required:!0,label:"Deadline",name:"deadline_date",type:"date"}),r.a.createElement(Ye,{className:"discussion-topic",required:!0,label:"Penganggung Jawab",name:"person_in_charge"}),r.a.createElement(le,null)),r.a.createElement("div",{className:"level"},r.a.createElement("div",{className:"level-left"},r.a.createElement("a",{className:"button",onClick:e.onClose},"Close"))))))},Ge=function(e){var t={index:0,name:null},a=e.split(Pe)[1].split("_");return t.index=parseInt(a[0]),t.name=e.split(Pe+t.index+"_")[1],t},Ke=function(e){return r.a.createElement("a",{className:"button is-danger is-outlined",onClick:function(t){return e.removeDiscussionTopic(e.id)}},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-times"})),r.a.createElement("span",null,"Remove"))},We=function(e){var t=e.meetingNote;if(null==t)return null;var a=t.discussion_topics;if(null==a)return null;for(var n=0,i=0;i<a.length;i++){a[i].is_closed&&n++}return r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{style:{border:"none"}},r.a.createElement("div",{className:"tags has-addons are-small"},r.a.createElement("span",{className:"tag is-light"},"Closed"),r.a.createElement("span",{className:"tag is-info"},n))),r.a.createElement("td",{style:{border:"none"}},r.a.createElement("div",{className:"tags has-addons are-small"},r.a.createElement("span",{className:"tag is-light"},"Not Closed"),r.a.createElement("span",{className:"tag is-danger"},a.length-n))))))},Ve=function(e){return r.a.createElement("div",{className:"has-text-centered"},r.a.createElement("a",{className:"button is-primary is-outlined",onClick:e.addDiscussionTopic,style:{marginTop:"10px",marginBottom:"10px"}},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-plus"})),r.a.createElement("span",null,"Tambah Tema Pembahasan")))},ze=function(e){var t=e.id;return r.a.createElement("div",{className:"buttons has-addons"},r.a.createElement(C.b,{to:"/discussiontopics/"+t,className:"button is-warning"},r.a.createElement("i",{className:"fas fa-edit"}),"\xa0Edit"),r.a.createElement(C.b,{to:"/discussiontopics/"+t+"/action",className:"button is-primary"},r.a.createElement("i",{className:"fas fa-location-arrow"}),"\xa0Konfirmasi"))},Ye=function(e){return ne(e)},Je=function(e){var t=e.meetingNote;return r.a.createElement("div",{style:{marginBottom:"20px"}},r.a.createElement("div",{className:"level"},r.a.createElement("div",{className:"level-left"},r.a.createElement(We,{meetingNote:t})),r.a.createElement("div",{className:"level-right"},r.a.createElement("span",{className:"tag is-primary is-medium"},t.departement.name))))},He=Object(d.f)(Object(D.b)((function(e){return{loggedUser:e.userState.loggedUser,loginStatus:e.userState.loginStatus}}),(function(e){return{}}))(Me)),Qe=function e(t){Object(o.a)(this,e),this.updateProfile=function(e){var t={userModel:e},a=h().concat("api/accountdashboard/updateprofile");return Q(a,t)}};Qe.instance=Qe.instance||new Qe;var Xe=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={},n.userService=Qe.instance,n.populateForm=function(){for(var e=document.getElementById("form-profile").getElementsByClassName("input-form-field"),t=n.props.loggedUser,a=0;a<e.length;a++){var r=e[a];"password"==r.name?r.value=null:r.value=t[r.name]}},n.onSubmit=function(e){e.preventDefault();var t=e.target,a=Object(c.a)(n);n.showConfirmation("Update Profile?").then((function(e){e&&a.updateProfile(t)}))},n.updateProfile=function(e){for(var t=e.getElementsByClassName("input-form-field"),a={},r=0;r<t.length;r++){var i=t[r];if(null!=i.value&&""!=i.value)a[i.name]=i.value}n.commonAjax(n.userService.updateProfile,a,n.onSubmitSuccess,n.onSubmitError)},n.onSubmitSuccess=function(e){n.showInfo("Update Profile Success"),n.props.requestAppId(n.getParentApp())},n.onSubmitError=function(e){n.showError("Update Profile Failed")},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.validateLoginStatus(),document.title="Profile",this.populateForm()}},{key:"componentDidUpdate",value:function(){this.validateLoginStatus()}},{key:"render",value:function(){var e=this.props.loggedUser;return null==e?r.a.createElement(r.a.Fragment,null):r.a.createElement("div",null,r.a.createElement(w,null,"Profile"),r.a.createElement(U,{title:"Update Profile"},r.a.createElement("form",{onSubmit:this.onSubmit,id:"form-profile"},r.a.createElement(ne,{label:"Email",name:"email",required:!0,type:"email"}),r.a.createElement(ne,{label:"Username",name:"name",required:!0}),r.a.createElement(ne,{label:"Display Name",name:"display_name",required:!0}),r.a.createElement(ne,{label:"Password",name:"password",note:"Kosongkan password apabila tidak ingin diubah"}),r.a.createElement(ie,{label:"Departement"},e.departement?e.departement.name:""),r.a.createElement(le,{submitText:"Update"}))))}}]),a}(j),$e=Object(d.f)(Object(D.b)((function(e){return{loggedUser:e.userState.loggedUser,loginStatus:e.userState.loginStatus}}),(function(e){return{requestAppId:function(t){return e(b(t))}}}))(Xe)),Ze=function e(){Object(o.a)(this,e),this.departementList=function(){var e=h().concat("api/public/issues/departements");return Q(e,{})},this.storePublicIssue=function(e){var t=h().concat("api/public/issues/store");return Q(t,{issue:e})},this.list=function(e){var t={code:"issue",filter:e},a=h().concat("api/issues/list");return Q(a,t)},this.view=function(e){var t=h().concat("api/issues/view/"+e);return Q(t,{})},this.delete=function(e){var t=h().concat("api/issues/delete/"+e);return Q(t,{})},this.followUpIssue=function(e){var t={followed_up_issue:e},a=h().concat("api/issues/followup");return Q(a,t)}};Ze.instance=Ze.instance||new Ze;var et=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e,"Aduan","issue")).loadRecords=function(){n.readInputForm();var e={page:n.page,limit:n.limit,orderBy:n.orderBy,orderType:n.orderType,fieldsFilter:n.fieldsFilter};n.commonAjax(n.issueService.list,e,n.successLoaded,n.errorLoaded)},n.state={},n.issueService=Ze.instance,n.deleteRecord=function(e){n.commonAjax(n.issueService.delete,e,n.onSuccessDelete,n.onErrorDelete)},n}return Object(s.a)(a,[{key:"createNavButton",value:function(){var e=null!=this.recordData?this.recordData:null;return null==e?r.a.createElement(r.a.Fragment,null):r.a.createElement(ve,{onClick:this.loadRecordByPage,limit:this.limit,totalData:e.count,activeIndex:this.page})}},{key:"componentDidMount",value:function(){this.validateLoginStatus()&&(this.loadRecords(),document.title="Daftar Aduan")}},{key:"componentDidUpdate",value:function(){this.isLoggedUserNull()&&this.backToLogin()}},{key:"render",value:function(){var e=this;if(this.isLoggedUserNull())return null;var t=this.createNavButton(),a=null!=this.recordData?this.recordData:null,n=null==a||null==a.result_list?[]:a.result_list,i="admin"==this.props.loggedUser.role;return r.a.createElement("div",null,r.a.createElement(w,null,"Daftar Aduan"),r.a.createElement(U,{title:"Daftar Aduan"},i?this.linkToFormCreate("/issues/create","Tambah Aduan"):null,r.a.createElement("form",{id:"list-form",onSubmit:function(t){t.preventDefault(),e.filter(t.target)}},r.a.createElement(Se,{cells:[ae(),t]}),r.a.createElement("div",{style:{overflow:"scroll"}},r.a.createElement("table",{className:"table"},r.a.createElement(ee,{onButtonOrderClick:this.onButtonOrderClick,headers:[{text:"No"},{text:"id",withFilter:!0},{text:"date",withFilter:!0},{text:"place",withFilter:!0},{text:"content",withFilter:!0},{text:"issuer",withFilter:!0},{text:"email",withFilter:!0},{text:"departement",withFilter:!0},{text:"issue_input",withFilter:!0},{text:"is_closed",alias:"Status",withFilter:!0},{text:"closed_date",alias:"Closed",withFilter:!0},{text:"action"}]}),r.a.createElement("tbody",null,n.map((function(t,a){var n=(e.page-1)*e.limit;return r.a.createElement("tr",{key:"record_"+a},r.a.createElement("td",null,n+a+1),r.a.createElement("td",null,t.id),r.a.createElement("td",null,t.date),r.a.createElement("td",null,t.place),r.a.createElement("td",null,t.content&&t.content.length>10?t.content.substring(0,10)+"...":t.content),r.a.createElement("td",null,t.issuer),r.a.createElement("td",null,t.email),r.a.createElement("td",null,t.departement.name),r.a.createElement("td",null,t.issue_input),r.a.createElement("td",null,1==t.is_closed?r.a.createElement("span",{className:"tag is-info"},"Closed"):r.a.createElement("span",{className:"tag is-warning"},"Not Closed")),r.a.createElement("td",null,t.closed_date),r.a.createElement("td",null,i?r.a.createElement(r.a.Fragment,null,r.a.createElement(C.b,{to:"/issues/"+t.id,className:"button is-small"},r.a.createElement("i",{className:"fas fa-edit"})),e.buttonDeleteRecord(t.id,!1)):null,r.a.createElement(C.b,{to:"/issues/"+t.id+"/followup",className:"button is-primary is-small"},r.a.createElement("i",{className:"fas fa-location-arrow"}))))}))))))))}}]),a}(ye),tt=Object(d.f)(Object(D.b)((function(e){return{loggedUser:e.userState.loggedUser,loginStatus:e.userState.loginStatus}}),(function(e){return{}}))(et)),at=["Yayasan","Orang Tua","Santri","Pegawai","Tamu"],nt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={recordNotFound:!1,isLoadingRecord:!0},n.departementList=[],n.masterDataService=he.instance,n.onSubmit=function(e){e.preventDefault();var t=e.target,a=Object(c.a)(n);n.showConfirmation("Save Data?").then((function(e){e&&a.storeRecord(t)}))},n.storeRecord=function(e){for(var t=e.getElementsByClassName("input-form-field"),a={},r=0;r<t.length;r++){var i=t[r];if(null!=i.value&&""!=i.value){var l=i.name;"departement"==l&&(l="departement_id"),a[l]=i.value}}null!=n.getRecordId()&&(a.id=n.getRecordId()),n.store(a),console.debug("ISSUE: ",a)},n.getRecordId=function(){return n.props.match.params.id},n.departementListLoaded=function(e){n.departementList=e.result_list,null!=n.getRecordId()&&n.loadRecord(),n.props.storeApplicationData("departements",n.departementList)},n.recordSaved=function(e){n.showInfo("SUCCESS SAVING RECORD"),null==n.getRecordId()&&(n.handleSuccessGetRecord(e),n.props.history.push("/issues/"+e.issue.id))},n.recordFailedToSave=function(e){n.showError("FAILED SAVING RECORD")},n.store=function(e){n.commonAjax(n.masterDataService.storeIssue,e,n.recordSaved,n.recordFailedToSave)},n.loadDepartements=function(){var e=n.props.applicationData;null==e.departements||0==e.departements.length?n.commonAjax(n.masterDataService.departementList,{},n.departementListLoaded,(function(e){})):n.departementList=e.departements,n.refresh()},n.handleSuccessGetRecord=function(e){n.setState({isLoadingRecord:!1});for(var t=document.getElementById("form-management").getElementsByClassName("input-form-field"),a=0;a<t.length;a++){var r=t[a];"departement"==r.name?r.value=e.issue.departement_id:r.value=e.issue[r.name]}},n.handleErrorGetRecord=function(e){n.setState({recordNotFound:!0})},n.loadRecord=function(){n.commonAjax(n.masterDataService.viewIssue,n.getRecordId(),n.handleSuccessGetRecord,n.handleErrorGetRecord)},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.validateLoginStatus()&&(this.loadDepartements(),document.title="Form Aduan")}},{key:"render",value:function(){if(this.state.recordNotFound)return r.a.createElement(L,{className:"is-danger",body:"Record Not Found"});if(null!=this.getRecordId()&&this.state.isLoadingRecord)return r.a.createElement("div",null,r.a.createElement("h2",{style:{textAlign:"center"}},"Form Aduan"),r.a.createElement("h3",null,"Please Wait..."));var e=r.a.createElement(r.a.Fragment,null,r.a.createElement(C.b,{to:"/issues"},"Aduan"),"\xa0",r.a.createElement("i",{className:"fas fa-angle-right"}),"\xa0Form");return r.a.createElement("div",null,r.a.createElement(w,null,"Form Aduan"),r.a.createElement(U,{title:e},r.a.createElement("form",{onSubmit:this.onSubmit,id:"form-management"},r.a.createElement(ne,{label:"Tanggal",name:"date",type:"date",required:!0}),r.a.createElement(ne,{label:"Tempat",name:"place",required:!0}),r.a.createElement(ne,{label:"Permasalahan",name:"content",type:"textarea",required:!0}),r.a.createElement(ne,{label:"Email",name:"email",required:!0,type:"email"}),r.a.createElement(ne,{label:"Sumber Aduan",name:"issue_input",required:!0}),r.a.createElement(re,{label:"Pengadu",options:at.map((function(e){return{value:e,text:e}})),name:"issuer",required:!0}),r.a.createElement(re,{label:"Departement",options:this.departementList.map((function(e){return{value:e.id,text:e.name}})),name:"departement",required:!0}),r.a.createElement(le,{submitText:null==this.getRecordId()?"Create":"Update",withReset:null==this.getRecordId()}))))}}]),a}(de),rt=Object(d.f)(Object(D.b)((function(e){return{loggedUser:e.userState.loggedUser,loginStatus:e.userState.loginStatus,applicationData:e.applicationState.applicationData}}),(function(e){return{storeApplicationData:function(t,a){return e(S(t,a))}}}))(nt)),it=["January","February","March","April","May","June","July","August","September","October","November","December"],lt=function(e){var t=e.split("-"),a=t[2],n=t[1],r=t[0];return a+" "+it[n-1]+" "+r},ot=function(e){return(e.getTime()-(new Date).getTime())/864e5},st=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){return Object(o.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"render",value:function(){var e=1==this.props.closed;return r.a.createElement("div",{className:"tags has-addons are-medium"},r.a.createElement("span",{className:"tag is-dark"},"Status"),r.a.createElement("span",{className:"tag "+(e?"is-info":"is-warning")},1==e?"Closed":"Not Closed"))}}]),a}(n.Component),ct=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={recordNotFound:!1,isLoadingRecord:!0,showDetailIssue:!0},n.issue={},n.issueService=Ze.instance,n.getRecordId=function(){return n.props.match.params.id},n.hideDetailIssue=function(){n.setState({showDetailIssue:!1})},n.showDetailIssue=function(){n.setState({showDetailIssue:!0})},n.onSubmit=function(e){e.preventDefault();var t=e.target,a=Object(c.a)(n);n.showConfirmation("Submit Data?").then((function(e){e&&a.fillDataAndStore(t)}))},n.fillDataAndStore=function(e){for(var t=e.getElementsByClassName("input-form-field"),a={issue_id:n.issue.id},r=0;r<t.length;r++){var i=t[r];null!=i.value&&""!=i.value&&(a[i.name]=i.value)}console.debug("issue action>>",a),n.storeAction(a)},n.handleSuccessSubmit=function(e){n.issue.follow_up=e.followed_up_issue,n.issue.is_closed=!0,n.showInfo("SUCCESS");try{null==n.getRecordId()&&document.getElementById("form-input-follow-up-issue").reset()}catch(t){}},n.handleErrorSubmit=function(e){n.showError("handleErrorSubmit: "+e)},n.handleErrorGetRecord=function(e){n.setState({recordNotFound:!0})},n.handleSuccessGetRecord=function(e){n.issue=e.issue,n.setState({isLoadingRecord:!1,recordNotFound:!1})},n.storeAction=function(e){n.commonAjax(n.issueService.followUpIssue,e,n.handleSuccessSubmit,n.handleErrorSubmit)},n.loadRecord=function(){n.commonAjax(n.issueService.view,n.getRecordId(),n.handleSuccessGetRecord,n.handleErrorGetRecord)},n.isClosed=function(){return null!=n.getRecordId()&&null!=n.issue&&1==n.issue.is_closed},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.validateLoginStatus()&&(document.title="Follow Up Issue",null==this.getRecordId()&&this.backToLogin(),this.loadRecord())}},{key:"render",value:function(){if(this.state.recordNotFound)return r.a.createElement(L,{className:"is-danger",body:"Record Not Found"});if(this.state.isLoadingRecord)return r.a.createElement("h3",null,"Please Wait...");if(this.isLoggedUserNull())return null;var e=this.issue.is_closed;return r.a.createElement("div",null,r.a.createElement(w,null,"Tindak Lanjut Aduan"),r.a.createElement(U,{title:"Detail Aduan"},r.a.createElement(st,{closed:e}),this.state.showDetailIssue?r.a.createElement("article",{style:{marginBottom:"10px"},className:"is-info"},r.a.createElement("div",{className:"message-header"},r.a.createElement("p",null,"Detail Aduan"),r.a.createElement("button",{onClick:this.hideDetailIssue,className:"delete","aria-label":"delete"})),r.a.createElement("div",{className:"message-body has-background-light"},r.a.createElement(ie,{label:"Waktu dan Tempat"},r.a.createElement("p",null,this.issue.place,", ",lt(this.issue.date))),r.a.createElement(ie,{label:"Bidang"},r.a.createElement("p",null,this.issue.departement.name)),r.a.createElement(ie,{label:"Permasalahan"},r.a.createElement("p",null,this.issue.content)),r.a.createElement(ie,{label:"Pengadu"},r.a.createElement("p",null,this.issue.email,", ",this.issue.issuer)),r.a.createElement(ie,{label:"Sumber Input"},r.a.createElement("p",null,this.issue.issue_input)))):r.a.createElement(P,{iconClassName:"fas fa-angle-down",onClick:this.showDetailIssue},"Detail Aduan")),r.a.createElement(U,{title:"Formulir Tindak Lanjut"},null==this.issue.follow_up?r.a.createElement("form",{id:"form-input-follow-up-issue",onSubmit:this.onSubmit},r.a.createElement(ut,{required:!0,label:"Tanggal",name:"date",type:"date"}),r.a.createElement(ut,{required:!0,label:"Keterangan",name:"description",type:"textarea"}),r.a.createElement(le,{submitText:"Submit",withReset:!0})):r.a.createElement("article",{style:{marginBottom:"10px"},className:"is-info"},r.a.createElement("div",{className:"message-header"},r.a.createElement("p",null,"Detail Tindak Lanjut")),r.a.createElement("div",{className:"message-body has-background-light"},r.a.createElement(ie,{label:"Tanggal"},r.a.createElement("p",null,this.issue.follow_up.date)),r.a.createElement(ie,{label:"Keterangan"},r.a.createElement("p",null,this.issue.follow_up.description))))))}}]),a}(j),ut=function(e){return ne(e)},mt=Object(d.f)(Object(D.b)((function(e){return{loggedUser:e.userState.loggedUser,loginStatus:e.userState.loginStatus}}),(function(e){return{}}))(ct)),dt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={recordNotFound:!1,isLoadingRecord:!0},n.discussionTopicService=Ue.instance,n.onSubmit=function(e){e.preventDefault();var t=e.target,a=Object(c.a)(n);n.showConfirmation("Save Data?").then((function(e){e&&a.storeRecord(t)}))},n.storeRecord=function(e){for(var t=e.getElementsByClassName("input-form-field"),a={},r=0;r<t.length;r++){var i=t[r];if(null!=i.value&&""!=i.value)a[i.name]=i.value}null!=n.getRecordId()&&(a.id=n.getRecordId()),n.store(a),console.debug("discussionTopic: ",a)},n.getRecordId=function(){return n.props.match.params.id},n.recordSaved=function(e){n.showInfo("SUCCESS SAVING RECORD"),null==n.getRecordId()&&(n.handleSuccessGetRecord(e),n.props.history.push("/discussiontopics/"+e.discussion_topic.id))},n.recordFailedToSave=function(e){n.showError("FAILED SAVING RECORD")},n.store=function(e){n.commonAjax(n.discussionTopicService.store,e,n.recordSaved,n.recordFailedToSave)},n.handleSuccessGetRecord=function(e){n.recordData=e,n.discussionTopic=e.discussion_topic,n.setState({isLoadingRecord:!1});for(var t=document.getElementById("form-management").getElementsByClassName("input-form-field"),a=0;a<t.length;a++){var r=t[a];r.value=n.discussionTopic[r.name],0==n.isClosed()&&"content"!=r.name&&"decision"!=r.name&&r.setAttribute("disabled","disabled"),1==n.isClosed()&&r.setAttribute("disabled","disabled")}},n.handleErrorGetRecord=function(e){n.setState({recordNotFound:!0})},n.loadRecord=function(){n.commonAjax(n.discussionTopicService.view,n.getRecordId(),n.handleSuccessGetRecord,n.handleErrorGetRecord)},n.isClosed=function(){return null!=n.getRecordId()&&null!=n.discussionTopic&&1==n.discussionTopic.is_closed},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.validateLoginStatus()&&(null!=this.getRecordId()&&this.loadRecord(),document.title="Form Tema Pembahasan")}},{key:"render",value:function(){var e=this.title("Form Tema Pembahasan");if(this.state.recordNotFound)return r.a.createElement("div",null,e,r.a.createElement(L,{className:"is-danger",body:"Record Not Found"}));if(null!=this.getRecordId()&&this.state.isLoadingRecord)return r.a.createElement("div",null,e,r.a.createElement("h3",null,"Please Wait..."));var t=r.a.createElement(r.a.Fragment,null,r.a.createElement(C.b,{to:"/discussiontopics"},"Tema Pembahasan"),"\xa0",r.a.createElement("i",{className:"fas fa-angle-right"}),"\xa0Form"),a=this.discussionTopic.is_closed;return r.a.createElement("div",null,e,r.a.createElement(U,{title:t},null!=this.getRecordId()&&null!=this.discussionTopic?r.a.createElement("div",{className:"level"},r.a.createElement("div",{className:"level-left"},r.a.createElement(st,{closed:a})),r.a.createElement("div",{className:"level-right"},r.a.createElement("span",{className:"tag is-primary is-medium"},null==this.discussionTopic.departement?null:this.discussionTopic.departement.name))):null,r.a.createElement(pt,{note_id:this.discussionTopic.note_id}),r.a.createElement("form",{onSubmit:this.onSubmit,id:"form-management"},r.a.createElement(ne,{required:!0,label:"Tanggal",name:"date",type:"date"}),r.a.createElement(ne,{required:!0,label:"Pembahasan",name:"content",type:"textarea"}),r.a.createElement(ne,{required:!0,label:"Keputusan",name:"decision",type:"textarea"}),r.a.createElement(ne,{required:!0,label:"Deadline",name:"deadline_date",type:"date"}),r.a.createElement(ne,{required:!0,label:"Penganggung Jawab",name:"person_in_charge"}),this.isClosed()?null:r.a.createElement(le,{submitText:null==this.getRecordId()?"Create":"Update",withReset:null==this.getRecordId()}))))}}]),a}(ye),pt=function(e){e.note_id;return r.a.createElement("div",{style:{marginBottom:"20px"}},r.a.createElement(C.b,{to:"/meetingnote/"+e.note_id,className:"button is-info"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-clipboard"})),r.a.createElement("span",null,"Detail Notulensi")))},ft=Object(d.f)(Object(D.b)((function(e){return{loggedUser:e.userState.loggedUser,loginStatus:e.userState.loginStatus}}))(dt)),ht=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={recordNotFound:!1,isLoadingRecord:!0,showDetailDiscussionTopic:!0},n.discussionTopic={},n.discussionTopicSerivce=Ue.instance,n.getRecordId=function(){return n.props.match.params.id},n.hideDetailIssue=function(){n.setState({showDetailDiscussionTopic:!1})},n.showDetailDiscussionTopic=function(){n.setState({showDetailDiscussionTopic:!0})},n.onSubmit=function(e){e.preventDefault();var t=e.target,a=Object(c.a)(n);n.showConfirmation("Submit Data?").then((function(e){e&&a.fillDataAndStore(t)}))},n.fillDataAndStore=function(e){for(var t=e.getElementsByClassName("input-form-field"),a={topic_id:n.discussionTopic.id},r=0;r<t.length;r++){var i=t[r];null!=i.value&&""!=i.value&&(a[i.name]=i.value)}console.debug("issue action>>",a),n.storeAction(a)},n.handleSuccessSubmit=function(e){n.discussionTopic.action=e.discussion_action,n.discussionTopic.is_closed=!0,n.showInfo("SUCCESS");try{null==n.getRecordId()&&document.getElementById("form-input-discussion-action").reset()}catch(t){}},n.handleErrorSubmit=function(e){n.showError("handleErrorSubmit: "+e)},n.handleErrorGetRecord=function(e){n.setState({recordNotFound:!0})},n.handleSuccessGetRecord=function(e){n.discussionTopic=e.discussion_topic,n.setState({isLoadingRecord:!1,recordNotFound:!1})},n.storeAction=function(e){n.commonAjax(n.discussionTopicSerivce.storeAction,e,n.handleSuccessSubmit,n.handleErrorSubmit)},n.loadRecord=function(){n.commonAjax(n.discussionTopicSerivce.view,n.getRecordId(),n.handleSuccessGetRecord,n.handleErrorGetRecord)},n.isClosed=function(){return null!=n.getRecordId()&&null!=n.discussionTopic&&1==n.discussionTopic.is_closed},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.validateLoginStatus()&&(document.title="Konfirmasi Tema Pembahasan",null==this.getRecordId()&&this.backToLogin(),this.loadRecord())}},{key:"render",value:function(){if(null==this.props.loggedUser)return null;var e=this.title("Penyelesaian/Pelaksanaan Keputusan");if(this.state.recordNotFound)return r.a.createElement("div",null,e,r.a.createElement(L,{className:"is-danger",body:"Record Not Found"}));if(this.state.isLoadingRecord)return r.a.createElement("div",null,e,r.a.createElement("h3",null,"Please Wait..."));var t=this.discussionTopic.is_closed;return r.a.createElement("div",null,e,r.a.createElement(U,{title:"Detail Tema Pembahasan"},r.a.createElement(st,{closed:t}),r.a.createElement(pt,{note_id:this.discussionTopic.note_id}),this.state.showDetailDiscussionTopic?r.a.createElement("article",{style:{marginBottom:"10px"},className:"is-info"},r.a.createElement("div",{className:"message-header"},r.a.createElement("p",null,"Detail Tema Pembahasan"),r.a.createElement("button",{onClick:this.hideDetailIssue,className:"delete","aria-label":"delete"})),r.a.createElement("div",{className:"message-body has-background-light"},r.a.createElement(ie,{label:"Waktu"},r.a.createElement("p",null,lt(this.discussionTopic.date))),r.a.createElement(ie,{label:"Bidang"},r.a.createElement("p",null,this.discussionTopic.departement.name)),r.a.createElement(ie,{label:"Pembahasan"},r.a.createElement("p",null,this.discussionTopic.content)),r.a.createElement(ie,{label:"Keputusan"},r.a.createElement("p",null,this.discussionTopic.decision)),r.a.createElement(ie,{label:"Deadline"},r.a.createElement("p",null,lt(this.discussionTopic.deadline_date))),r.a.createElement(ie,{label:"Penganggung Jawab"},r.a.createElement("p",null,this.discussionTopic.person_in_charge)))):r.a.createElement(P,{onClick:this.showDetailDiscussionTopic,iconClassName:"fas fa-angle-down"},"Detail Tema Pembahasan")),r.a.createElement(U,{title:"Penyelesaian/Pelaksanaan Keputusan"},null==this.discussionTopic.action?r.a.createElement("form",{id:"form-input-discussion-action",onSubmit:this.onSubmit},r.a.createElement(ne,{required:!0,label:"Tanggal",name:"date",type:"date"}),r.a.createElement(ne,{required:!0,label:"Keterangan",name:"description",type:"textarea"}),r.a.createElement(le,{submitText:"Submit",withReset:!0})):r.a.createElement("article",{style:{marginBottom:"10px"},className:"is-info"},r.a.createElement("div",{className:"message-header"},r.a.createElement("p",null,"Detail Tindak Lanjut")),r.a.createElement("div",{className:"message-body has-background-light"},r.a.createElement(ie,{label:"Tanggal"},r.a.createElement("p",null,this.discussionTopic.action.date)),r.a.createElement(ie,{label:"Keterangan"},r.a.createElement("p",null,this.discussionTopic.action.description))))))}}]),a}(j),gt=Object(d.f)(Object(D.b)((function(e){return{loggedUser:e.userState.loggedUser,loginStatus:e.userState.loginStatus}}),(function(e){return{}}))(ht)),Et=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e,"Notulensi","notes")).loadRecords=function(){n.readInputForm();var e={page:n.page,limit:n.limit,orderBy:n.orderBy,orderType:n.orderType,fieldsFilter:n.fieldsFilter};n.commonAjax(n.meetingNoteService.list,e,n.successLoaded,n.errorLoaded)},n.state={},n.meetingNoteService=_e.instance,n.deleteRecord=function(e){},n}return Object(s.a)(a,[{key:"createNavButton",value:function(){var e=null!=this.recordData?this.recordData:null;return null==e?r.a.createElement(r.a.Fragment,null):r.a.createElement(ve,{onClick:this.loadRecordByPage,limit:this.limit,totalData:e.count,activeIndex:this.page})}},{key:"componentDidMount",value:function(){this.validateLoginStatus()&&(this.loadRecords(),document.title="Daftar Notulensi")}},{key:"componentDidUpdate",value:function(){(0==this.props.loginStatus||this.isLoggedUserNull())&&this.backToLogin()}},{key:"render",value:function(){var e=this;if(null==this.props.loggedUser)return null;var t=this.createNavButton(),a=null!=this.recordData?this.recordData:null,n=null==a||null==a.result_list?[]:a.result_list;return r.a.createElement("div",null,r.a.createElement(w,null,"Daftar Notulensi"),r.a.createElement(U,{title:"Daftar Notulensi"},r.a.createElement(vt,{to:"meetingnote/create"},"Tambah Notulensi"),r.a.createElement("form",{id:"list-form",onSubmit:function(t){t.preventDefault(),e.filter(t.target)}},r.a.createElement(Se,{cells:[ae(),t]}),r.a.createElement("div",{style:{overflow:"scroll"}},r.a.createElement("table",{style:{},className:"table"},r.a.createElement(ee,{onButtonOrderClick:this.onButtonOrderClick,headers:[{text:"No"},{text:"id",alias:"Id",withFilter:!0},{text:"date",alias:"Tanggal",withFilter:!0},{text:"place",alias:"Tempat",withFilter:!0},{text:"departement",alias:"Bidang",withFilter:!0},{text:"user",alias:"Notulis",withFilter:!0},{text:"discussion_topics_count",alias:"Topik",withFilter:!0},{text:"discussion_topics_closed_count",alias:"closed",withFilter:!0},{text:"action"}]}),r.a.createElement("tbody",null,n.map((function(t,a){var n=(e.page-1)*e.limit,i=Date.parse(t.deadline_date),l={};try{var o=ot(new Date(i));0==t.is_closed&&o<=3&&o>0?l.backgroundColor="orange":0==t.is_closed&&o<0&&(l.backgroundColor="red")}catch(s){}return r.a.createElement("tr",{key:"record-meeting-note-"+a,style:l},r.a.createElement("td",null,n+a+1),r.a.createElement("td",null,t.id),r.a.createElement("td",null,t.date),r.a.createElement("td",null,t.place),r.a.createElement("td",null,t.departement?t.departement.name:"-"),r.a.createElement("td",null,t.user?t.user.name:"-"),r.a.createElement("td",null,t.discussion_topics_count),r.a.createElement("td",null,t.discussion_topics_closed_count),r.a.createElement("td",null,r.a.createElement(bt,{id:t.id})))}))))))))}}]),a}(ye),vt=function(e){return r.a.createElement(C.b,{to:e.to,className:"button is-primary",style:{marginBottom:"10px"}},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-plus"})),r.a.createElement("span",null,e.children))},bt=function(e){return r.a.createElement(C.b,{to:"/meetingnote/"+e.id,className:"button is-small"},r.a.createElement("i",{className:"fas fa-edit"}))},Nt=Object(d.f)(Object(D.b)((function(e){return{loggedUser:e.userState.loggedUser,loginStatus:e.userState.loginStatus}}),(function(e){return{}}))(Et)),yt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e,"Topik Pembahasan","discussiontopic")).loadRecords=function(){n.readInputForm();var e={page:n.page,limit:n.limit,orderBy:n.orderBy,orderType:n.orderType,fieldsFilter:n.fieldsFilter};n.commonAjax(n.discussionTopicService.list,e,n.successLoaded,n.errorLoaded)},n.state={},n.discussionTopicService=Ue.instance,n.deleteRecord=function(e){},n}return Object(s.a)(a,[{key:"createNavButton",value:function(){var e=null!=this.recordData?this.recordData:null;return null==e?r.a.createElement(r.a.Fragment,null):r.a.createElement(ve,{onClick:this.loadRecordByPage,limit:this.limit,totalData:e.count,activeIndex:this.page})}},{key:"componentDidMount",value:function(){this.validateLoginStatus()&&(this.loadRecords(),document.title="Daftar Topik")}},{key:"componentDidUpdate",value:function(){(0==this.props.loginStatus||this.isLoggedUserNull())&&this.backToLogin()}},{key:"render",value:function(){var e=this;if(null==this.props.loggedUser)return null;var t=this.createNavButton(),a=null!=this.recordData?this.recordData:null,n=null==a||null==a.result_list?[]:a.result_list;return r.a.createElement("div",null,r.a.createElement(w,null,"Daftar Topik"),r.a.createElement(U,{title:"Daftar Topik"},r.a.createElement(vt,{to:"meetingnote/create"},"Tambah Notulensi"),r.a.createElement("form",{id:"list-form",onSubmit:function(t){t.preventDefault(),e.filter(t.target)}},r.a.createElement(Se,{cells:[ae(),t]}),r.a.createElement("div",{style:{overflow:"scroll"}},r.a.createElement("table",{className:"table"},r.a.createElement(ee,{onButtonOrderClick:this.onButtonOrderClick,headers:[{text:"No"},{text:"content",alias:"Topik",withFilter:!0},{text:"person_in_charge",alias:"PIC",withFilter:!0},{text:"deadline_date",alias:"Deadline",withFilter:!0},{text:"is_closed",alias:"Status",withFilter:!0},{text:"action"},{text:"opsi"}]}),r.a.createElement("tbody",null,n.map((function(t,a){var n=(e.page-1)*e.limit,i=Date.parse(t.deadline_date),l={};try{var o=ot(new Date(i));0==t.is_closed&&o<=3&&o>0?l.backgroundColor="orange":0==t.is_closed&&o<0&&(l.backgroundColor="red")}catch(s){}return r.a.createElement("tr",{key:"record_"+a,style:l},r.a.createElement("td",null,n+a+1),r.a.createElement("td",null,t.content&&t.content.length>10?t.content.substring(0,10)+"...":t.content),r.a.createElement("td",null,t.person_in_charge),r.a.createElement("td",null,t.deadline_date),r.a.createElement("td",null,1==t.is_closed?r.a.createElement("span",{className:"tag is-info"},"Closed"):r.a.createElement("span",{className:"tag is-warning"},"Not Closed")),r.a.createElement("td",null,r.a.createElement(St,{id:t.id})),r.a.createElement("td",null,r.a.createElement(C.b,{to:"/meetingnote/"+t.note_id,className:"button is-light is-small"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-clipboard"})),r.a.createElement("span",null,"Notulensi"))))}))))))))}}]),a}(ye),St=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.b,{to:"/discussiontopics/"+e.id,className:"button is-small"},r.a.createElement("i",{className:"fas fa-edit"})),r.a.createElement(C.b,{to:"/discussiontopics/"+e.id+"/action",className:"button is-primary is-small"},r.a.createElement("i",{className:"fas fa-location-arrow"})))},Dt=Object(d.f)(Object(D.b)((function(e){return{loggedUser:e.userState.loggedUser,loginStatus:e.userState.loginStatus}}),(function(e){return{}}))(yt)),Ot=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){return Object(o.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"componentDidMount",value:function(){document.title="Not Found"}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("article",{class:"message is-warning"},r.a.createElement("div",{class:"message-header"},r.a.createElement("p",null,"404 Not Found"),r.a.createElement("button",{class:"delete","aria-label":"delete"})),r.a.createElement("div",{class:"message-body"},"Halaman tidak ditemukan")))}}]),a}(n.Component),kt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e,!1)).state=Object(k.a)(Object(k.a)({},n.state),{},{captchaUpdate:new Date,recordSave:!1}),n.issueService=Ze.instance,n.departementList=[],n.captcha={firstNumber:1,secordNumber:2,operator:"+",updatedAt:new Date},n.resetCaptcha=function(){n.captcha.firstNumber=Math.floor(10*Math.random())+1,n.captcha.secordNumber=Math.floor(10*Math.random())+1,n.captcha.operator=n.captcha.firstNumber%2==0?"+":"-",n.captcha.updatedAt=new Date,n.setState({captchaUpdate:n.captcha.updatedAt})},n.validateCaptcha=function(e){var t=n.captcha.firstNumber,a=n.captcha.secordNumber;return"+"==n.captcha.operator?t+a==e:"-"==n.captcha.operator&&t-a==e},n.onSubmit=function(e){e.preventDefault();var t=e.target,a=document.getElementsByName("captcha_result")[0].value,r=n.validateCaptcha(a),i=Object(c.a)(n);r?n.showConfirmation("Submit Data?").then((function(e){e&&i.fillDataAndStore(t)})):n.showError("Invalid Captcha")},n.fillDataAndStore=function(e){for(var t={},a=e.getElementsByClassName("input-form-field"),r=0;r<a.length;r++){var i=a[r];t[i.name]=i.value}console.debug("Issue: ",t),n.storeIssue(t)},n.departementListLoaded=function(e){n.departementList=e.result_list,n.props.storeApplicationData("departements",n.departementList)},n.departementListNotLoaded=function(e){var t=Object(c.a)(n);n.showConfirmationDanger("Error loading data.. please try or reload the page").then((function(e){e&&t.loadDepartements()}))},n.recordSaved=function(e){n.resetCaptcha(),n.setState({recordSaved:!0})},n.recordFailedToSave=function(e){n.showError("Gagal menyimpan aduan: "+e+" Silakan muat ulang halaman dan coba lagi")},n.loadDepartements=function(){var e=n.props.applicationData;null==e.departements||0==e.departements.length?n.commonAjax(n.issueService.departementList,{},n.departementListLoaded,n.departementListNotLoaded):n.departementList=e.departements,n.refresh()},n.storeIssue=function(e){n.commonAjax(n.issueService.storePublicIssue,e,n.recordSaved,n.recordFailedToSave)},n.showForm=function(){n.setState({recordSaved:!1})},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){document.title="Aduan Publik",this.loadDepartements(),this.resetCaptcha()}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this.title("Form Aduan Publik");return 1==this.state.recordSaved?r.a.createElement("div",null,e,r.a.createElement("div",{className:"box has-text-success",style:{textAlign:"center",margin:"10px"}},r.a.createElement("span",{className:"icon",style:{fontSize:"4em",marginTop:"30px"}},r.a.createElement("i",{className:"fas fa-check"})),r.a.createElement("h2",null,"Terimakasih. Aduan Anda berhasil disimpan!"),r.a.createElement(P,{iconClassName:"fas fa-angle-right",onClick:this.showForm},"Kirim Tanggapan Lain"))):r.a.createElement("div",null,e,r.a.createElement(U,{title:"Form"},r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement(ne,{name:"date",label:"tanggal",type:"date",required:!0}),r.a.createElement(ne,{name:"place",label:"tempat",required:!0}),r.a.createElement(ne,{name:"content",label:"permasalahan",type:"textarea",required:!0}),r.a.createElement(ne,{name:"email",type:"email",note:"Kosongkan jika berstatus anonim"}),r.a.createElement(re,{label:"pengadu",options:at.map((function(e){return{value:e,text:e}})),name:"issuer",required:!0}),r.a.createElement(re,{label:"bidang",options:this.departementList.map((function(e){return{value:e.id,text:e.name}})),name:"departement_id",required:!0}),r.a.createElement("div",{className:"field is-horizontal"},r.a.createElement("div",{className:"field-label"}),r.a.createElement("div",{className:"field-body"},r.a.createElement(Ct,{reset:this.resetCaptcha,captcha:this.captcha}))),r.a.createElement(le,null))))}}]),a}(j),Ct=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).canvas_id="captcha_canvas_"+(new Date).getTime(),n}return Object(s.a)(a,[{key:"getCaptchaText",value:function(){var e=this.props.captcha;return e.firstNumber+" "+e.operator+" "+e.secordNumber}},{key:"drawCanvas",value:function(){var e=document.getElementById(this.canvas_id),t=e.getContext("2d");t.clearRect(0,0,e.width,e.height),t.fillStyle="#000",t.font="70px Arial",t.fillText(this.getCaptchaText(),10,50)}},{key:"componentDidUpdate",value:function(){this.drawCanvas()}},{key:"componentDidMount",value:function(){this.drawCanvas()}},{key:"render",value:function(){this.props.captcha;return r.a.createElement("article",{style:{width:"100%"},className:"message "},r.a.createElement("div",{className:"message-header has-background-grey-lighter"},r.a.createElement("p",{className:"has-text-dark"},"Captcha"),r.a.createElement("a",{onClick:this.props.reset,className:"button"},r.a.createElement("i",{className:"fas fa-sync"}))),r.a.createElement("div",{className:"message-body has-background-light"},r.a.createElement("canvas",{id:this.canvas_id,className:"has-background-light",style:{width:"100px",height:"auto"}}),r.a.createElement("input",{className:"input",name:"captcha_result",required:!0})))}}]),a}(n.Component),jt=Object(d.f)(Object(D.b)((function(e){return{loggedUser:e.userState.loggedUser,loginStatus:e.userState.loginStatus,applicationData:e.applicationState.applicationData}}),(function(e){return{storeApplicationData:function(t,a){return e(S(t,a))}}}))(kt)),wt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"content"},r.a.createElement("div",{style:{height:"20px"}}),r.a.createElement(d.c,null,r.a.createElement(d.a,{exact:!0,path:"/",render:function(e){return r.a.createElement(It,null)}}),r.a.createElement(d.a,{path:"/home",render:function(e){return r.a.createElement(It,null)}}),r.a.createElement(d.a,{path:"/dashboard",render:function(t){return r.a.createElement(me,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/meetingnote/create",render:function(t){return r.a.createElement(He,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/meetingnote",render:function(t){return r.a.createElement(Nt,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/meetingnote/:id",render:function(t){return r.a.createElement(He,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/issues",render:function(t){return r.a.createElement(tt,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/issues/create",render:function(t){return r.a.createElement(rt,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/issues/:id",render:function(t){return r.a.createElement(rt,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/issues-public",render:function(t){return r.a.createElement(jt,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/issues/:id/followup",render:function(t){return r.a.createElement(mt,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/discussiontopics",render:function(t){return r.a.createElement(Dt,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/discussiontopics/:id",render:function(t){return r.a.createElement(ft,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/discussiontopics/:id/action",render:function(t){return r.a.createElement(gt,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/management",render:function(t){return r.a.createElement(fe,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/management/users",render:function(t){return r.a.createElement(ke,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/management/users/create",render:function(t){return r.a.createElement(xe,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/management/users/:id",render:function(t){return r.a.createElement(xe,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/management/departements",render:function(t){return r.a.createElement(we,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/management/departements/create",render:function(t){return r.a.createElement(Re,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/management/departements/:id",render:function(t){return r.a.createElement(Re,{app:e.props.app})}}),r.a.createElement(d.a,{path:"/login",render:function(t){return r.a.createElement(A,{app:e.props.app})}}),r.a.createElement(d.a,{exact:!0,path:"/profile",render:function(t){return r.a.createElement($e,{app:e.props.app})}}),r.a.createElement(d.a,{path:"",component:Ot})))}}]),a}(n.Component),It=function(e){return document.title="Home",r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("h2",null,"Kafila Console"),r.a.createElement("span",{style:{fontSize:"10em"}},r.a.createElement("i",{className:"fas fa-users-cog"})))},xt=wt,Tt=(a(76),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={opacity:1,show:!0},n}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){return 0==this.props.show?null:r.a.createElement("div",{style:{position:"fixed",zIndex:1e4,color:"#ccc"}},r.a.createElement("div",{className:"columns",style:{width:"min-content"}},r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"lds-ring"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))),r.a.createElement("div",{className:"column"},r.a.createElement("span",{style:{fontSize:"2em"}},"Loading"))))}}]),a}(n.Component)),Rt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){return Object(o.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("aside",{className:"menu"},x.map((function(t,a){var n=e.extractChildren(t.children);if(null==n||0==n.length)return null;var i=e.isMenuListShown(t.name),l=i?"fas fa-angle-up":"fas fa-angle-down";return r.a.createElement(r.a.Fragment,{key:"menu_"+t.name},r.a.createElement("p",{key:t.name,"menu-name":t.name,onClick:e.toggleMenuList,className:"menu-label"},r.a.createElement("i",{style:{marginRight:"10px"},className:l}),t.name),i?r.a.createElement("ul",{className:"menu-list"},n.map((function(e,t){return r.a.createElement("li",{key:"sidebar-menu-child-"+a+"-"+t},r.a.createElement(C.b,{to:e.link},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:e.iconClassName?e.iconClassName:"fas fa-folder"})),r.a.createElement("span",null,e.name)))}))):null)}))))}}]),a}(I),_t=Object(d.f)(Object(D.b)((function(e){return{loginStatus:e.userState.loginStatus,loggedUser:e.userState.loggedUser}}),(function(e){return{}}))(Rt)),Lt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={menus:[],menuCode:"",loading:!1,loadingPercentage:0,requestId:null,mainAppUpdated:new Date,showAlert:!1},n.alertTitle=null,n.alertBody=null,n.alertIsYesOnly=!0,n.alertIsError=!1,n.alertOnYesCallback=null,n.alertOnCancelCallback=null,n.loadings=0,n.setMenuCode=function(e){n.setState({menuCode:e})},n.refresh=function(){n.setState({mainAppUpdated:new Date})},n.incrementLoadings=function(){this.loadings++},n.decrementLoadings=function(){this.loadings--,this.loadings<0&&(this.loadings=0)},n.requestAppId=function(){n.props.requestAppId(Object(c.a)(n))},n.startLoading=function(e){n.incrementLoadings(),n.setState({loading:!0,realtime:e})},n.endLoading=function(){console.log("END LOADING"),n.decrementLoadings(),0==n.loadings&&n.setState({loading:!1,loadingPercentage:0})},n.showAlertError=function(e,t,a,r,i){n.alertIsError=!0,n.showAlert(e,t,a,r,i)},n.showAlert=function(e,t,a,r,i){n.alertTitle=e,n.alertBody=t,n.alertIsYesOnly=a;var l=Object(c.a)(n);n.alertOnYesCallback=function(e){l.dismissAlert(),r(e)},a||(n.alertOnCancelCallback=function(e){l.dismissAlert(),null!=i&&i(e)}),n.setState({showAlert:!0})},n.dismissAlert=function(){n.alertIsError=!1,n.setState({showAlert:!1})},n.routedContent=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.c,null,r.a.createElement(d.a,{path:"/home",render:function(e){return r.a.createElement("h2",null,"HOME")}}),r.a.createElement(d.a,{path:"/login",render:function(e){return r.a.createElement("h2",null,"Login")}})))},n}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(){this.props.requestId!=this.state.requestId&&this.setState({requestId:this.props.requestId})}},{key:"componentDidMount",value:function(){this.requestAppId(),this.setState({loadingPercentage:0})}},{key:"setMenus",value:function(){for(var e=this.props.menus?this.props.menus:[],t=new Array,a=0;a<e.length;a++){var n=e[a],r=1!=this.props.loginStatus&&1==n.authenticated,i=!this.state.enableShopping&&"cart"==n.code;r||(i||t.push(n))}return t}},{key:"render",value:function(){return this.props.requestId?r.a.createElement("div",{className:"App"},this.state.showAlert?r.a.createElement(Ae,{isError:this.alertIsError,yesOnly:this.alertIsYesOnly,title:this.alertTitle,onYes:this.alertOnYesCallback,onNo:this.alertOnCancelCallback},this.alertBody):null,r.a.createElement(_,{app:this}),r.a.createElement("section",{style:{minHeight:"70vh"}},r.a.createElement("div",null,r.a.createElement(Tt,{show:this.state.loading})),r.a.createElement("div",{className:"columns",style:{minHeight:"70vh",marginBottom:"1px"}},r.a.createElement("div",{style:{paddingTop:"20px",paddingLeft:"20px",borderRight:"solid 2px #ccc"},className:"menu-container column is-one-fifth has-background-water-ter"},r.a.createElement(_t,{app:this})),r.a.createElement("div",{className:"column is-four-fifths"},r.a.createElement(xt,{app:this})))),r.a.createElement(O,null)):r.a.createElement(Tt,{show:!0})}}]),a}(n.Component),Ft=Object(d.f)(Object(D.b)((function(e){return{loginStatus:e.userState.loginStatus,requestId:e.userState.requestId}}),(function(e){return{performLogout:function(t){return e(N(t))},requestAppId:function(t){return e(b(t))}}}))(Lt)),At=a(16),Ut={loginKey:null,loginStatus:!1,loginFailed:!1,loggedUser:null,loginAttempt:!1,requestId:null,lastLoginAttempt:new Date,applicationProfile:{}},Bt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ut,t=arguments.length>1?arguments[1]:void 0,a={};switch(t.type){case"req_ID":return a=Object(k.a)(Object(k.a)({},e),{},{requestId:t.payload.requestId,applicationProfile:t.payload.applicationProfile}),1!=t.payload.loginStatus?(a.loginStatus=!1,a.loggedUser=null):t.payload.user?(a.loggedUser=t.payload.user,a.loginStatus=!0,z(a.loggedUser.api_token)):(a.loginStatus=!1,a.loggedUser=null),a;case"do_login":return console.debug("DO_LOGIN"),t.payload.loginStatus?(console.debug("DO_LOGIN true ",new Date),console.debug("APITOKEN: ",t.payload.loginKey),z(t.payload.loginKey),a=Object(k.a)(Object(k.a)({},e),{},{lastLoginAttempt:new Date,loginAttempt:!0,loginStatus:!0,loginKey:t.payload.loginKey,loginFailed:!1,loggedUser:t.payload.loggedUser})):Object(k.a)(Object(k.a)({},e),{},{lastLoginAttempt:new Date,loginFailed:!0});case"do_logout":return a=Object(k.a)(Object(k.a)({},e),{},{loginStatus:!1,loggedUser:null});default:return Object(k.a)({},e)}},Pt={applicationData:{}},Mt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt,t=arguments.length>1?arguments[1]:void 0,a=e;switch(t.type){case"store-app-data":var n=t.payload.key,r=t.payload.data;return a.applicationData[n]=r,a;case"remove-app-data":return delete a[t.payload.key],a;default:return Object(k.a)({},e)}},qt=Object(At.c)({userState:Bt,applicationState:Mt}),Gt={userState:Ut,applicationState:Pt},Kt=a(31),Wt=function(e){return function(t){return function(a){if(!a.meta||"do_login"!==a.meta.type)return t(a);var n=a.meta.app;Kt.post(a.meta.url,a.payload,{headers:W()}).then((function(t){var n=t.data,r=n.user.api_token,i=Object.assign({},a,{payload:{loginStatus:!0,loginKey:r,loggedUser:n.user}});delete i.meta,e.dispatch(i)})).catch((function(t){var n=Object.assign({},a,{payload:{loginStatus:!1}});delete n.meta,e.dispatch(n)})).finally((function(e){n.endLoading()}))}}},Vt=function(e){return function(t){return function(a){if(!a.meta||"req_ID"!==a.meta.type)return t(a);var n=W();Kt.post(a.meta.url,a.payload,{headers:n}).then((function(t){var n=t.data,r="",i=n.message;n.user&&(r=n.user.api_token);var l=Object.assign({},a,{payload:Object(k.a)({loginStatus:!0,loginKey:r,requestId:i},n)});delete l.meta,e.dispatch(l)})).catch((function(t){console.error("ERROR Get User, will get requestId");var n=h().concat("api/account/requestid");Kt.get(n).then((function(t){var n=t.data,r=n.message,i=Object.assign({},a,{payload:Object(k.a)({loginStatus:!1,loginKey:null,requestId:r},n)});delete i.meta,e.dispatch(i)})).catch((function(e){alert("Error requesting application: "+e+". Try to reload the page")}))})).finally((function(e){return a.meta.app.endLoading()}))}}},zt=function(e){return function(t){return function(a){if(!a.meta||"do_logout"!==a.meta.type)return t(a);var n=a.meta.app;Kt.post(a.meta.url,a.payload,{headers:W()}).then((function(t){var n=!1;"00"==t.data.code?n=!0:alert("Logout Failed");var r=Object.assign({},a,{payload:{loginStatus:!n}});delete r.meta,e.dispatch(r)})).catch((function(e){console.log(e)})).finally((function(e){return n.endLoading()}))}}},Yt=function(e){return function(t){return function(a){if(!a.meta||"store-app-data"!==a.meta.type)return t(a);var n=Object.assign({},a,{payload:a.payload});delete n.meta,e.dispatch(n)}}},Jt=function(){return Object(At.d)(qt,Gt,Object(At.a)(Wt,zt,Vt,Yt))},Ht=function(e){var t=Jt();return r.a.createElement(D.a,{store:t},r.a.createElement(C.a,null,r.a.createElement(Ft,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(Ht,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[44,1,2]]]);
//# sourceMappingURL=main.f3a73460.chunk.js.map